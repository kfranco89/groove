
var twitterreaders={};twitterreaders.dateformat=function(time){var date=new Date(time),diff=(((new Date()).getTime()-date.getTime())/1000),day_diff=Math.floor(diff/86400);if(isNaN(day_diff)||day_diff<0||day_diff>=31)return;return day_diff==0&&(diff<60&&"En este momento"||diff<120&&"Hace un minuto"||diff<3600&&"Hace "+Math.floor(diff/60)+" minutos"||diff<7200&&"Hace una hora"||diff<86400&&"Hace "+Math.floor(diff/3600)+" horas"||day_diff==1&&"Ayer"||day_diff<7&&"Hace "+day_diff+" días"||day_diff<31&&"Hace "+Math.ceil(day_diff/7)+" semanas");}
twitterreaders.search=function(url){vsm.ajaxCall(url,function(r){r=vsm.json(r);if(!r.statuses)return;vsm.object('twitter-readers-amount').innerHTML=r.statuses.length;if(r.statuses){html='';for(var i=0,l=r.statuses.length;i<l;i++){var id=r.statuses[i].id_str;html+='<div class=twitter-reader-item>';html+='<img class=userimage align=middle src='+r.statuses[i].user.profile_image_url+' width=48 height=48>';html+='<div class="tweetinfo">';html+='<div class="username"><a target=_blank href=http://www.twitter.com/'+r.statuses[i].user.screen_name+'>'+r.statuses[i].user.name+'</a></div>';html+='<div class="text maincolor">'+replacelink(r.statuses[i].text)+'</div>';var d=twitterreaders.dateformat(r.statuses[i].created_at);if(d)html+='<div class=date>'+d+'</div>';html+='<span class="reply maincolor"><a href="https://twitter.com/intent/tweet?in_reply_to='+id+'">Responder</a></span>';html+='<span class="retweet maincolor"><a href="https://twitter.com/intent/retweet?tweet_id='+id+'">Retweet</a></span>';html+='<span class="fav maincolor"><a href="https://twitter.com/intent/favorite?tweet_id='+id+'">Favorito</a></span>';html+='<div class=tweetbutton><a href="https://twitter.com/'+r.statuses[i].user.screen_name+'" class="twitter-follow-button" data-show-count="false" data-lang="es" data-size="small" data-show-screen-name=false>Seguir</a></div>';html+='</div>';html+='</div>';}
if(l){var tri=vsm.object('twitter-readers-items');tri.innerHTML=html;vsm.replaceClass('twitter-readers','hidden','');vsm.loadScript('https://platform.twitter.com/widgets.js',function(){waitobj('twttr.widgets.load',[tri]);});}}});};function replacelink(inputText){var replaceText,replacePattern1;replacePattern1=/(\b(https?):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim;replacedText=inputText.replace(replacePattern1,'<a href="$1" target="_blank">$1</a>');return replacedText}