(function(b,a,c){if(!Array.prototype.indexOf){Array.prototype.indexOf=function(g,f){if(f===null){f=0}else{if(f<0){f=Math.max(0,this.length+f)}}for(var e=f,d=this.length;e<d;e++){if(this[e]===g){return e}}return -1}}_apw.modules.std={update:function(){},get_cookie:function(e){var d=a.cookie.split(/;\s*/);e+="=";for(var f=d.length-1;f>=0;f--){if(!d[f].indexOf(e)){return d[f].replace(e,"")}}return null},get_cookies:function(g){var d={};var e=a.cookie.split(/;\s*/);for(var f=e.length-1;f>=0;f--){var h=/^([^=]*)=(.*)$/.exec(e[f]);if(h){if(g.test(h[1])){d[h[1]]=h[2]}}}return d},set_cookie:function(e,f,d){a.cookie=e+"="+f+"; domain=."+_apw.settings.top_level_domain+"; path=/; expires="+new Date(d*1000).toGMTString()},delete_cookie:function(d){_apw.modules.std.set_cookie(d,"",0)}}})(window,document);(function(c,a,e){var d={meters:{},interval:null};function b(f,h){var g=/^(\d+)\.\d+\.(\d+)\..*\..+$/.exec(h);if(g!==null){try{return{name:f,value:h,expiration:parseInt(g[1],10),used_quota:parseInt(g[2],10)}}catch(i){return null}}else{return null}}_apw.modules.anonymous_ac={update:function(){var p=/^apw_meter_[a-zA-Z0-9\-_]+$/;var m={};var f,h,n,j,k;var o=_apw.modules.std.get_cookies(p);for(f in o){if(o.hasOwnProperty(f)){h=b(f,o[f]);if(h!==null){m[h.name]=h}else{_apw.modules.std.delete_cookie(h.name)}}}var g=[];try{for(k=0;k<localStorage.length;k++){f=localStorage.key(k);if(p.test(f)){if(!m.hasOwnProperty(f)){h=b(f,localStorage[f]);if(h!==null){m[h.name]=h;g.push(h)}else{localStorage.removeItem(h.name)}}}}}catch(l){}n=c.name.split(";");for(k=n.length-1;k>=0;k--){j=/^([^=]*)=(.*)$/.exec(n[k]);if(j){if(p.test(j[1])){if(!m.hasOwnProperty(j[1])){h=b(j[1],j[2]);if(h!==null){m[h.name]=h;g.push(h)}}}}}for(k=0;k<g.length;k++){h=g[k];_apw.modules.std.set_cookie(h.name,h.value,h.expiration)}for(f in m){n=[];if(m.hasOwnProperty(f)){h=m[f];try{localStorage[h.name]=h.value}catch(l){}n.push(h.name+"="+h.value)}c.name=n.join(";")}for(f in m){if(m.hasOwnProperty(f)){h=m[f];d.meters[h.name]={used_quota:h.used_quota,expiration:h.expiration}}}if(d.interval){clearInterval(d.interval)}d.interval=setInterval(_apw.modules.anonymous_ac.update,2000)},get:function(g){var f={pid:g,quota:_apw.settings.anonymous_ac.quota,used:0,available:_apw.settings.anonymous_ac.quota,expiration:null};var i="apw_meter_"+g;if(d.meters.hasOwnProperty(i)){var j=d.meters[i];var h=Math.round(new Date().getTime()/1000);if(h<j.expiration){f.used=j.used_quota;f.available=f.quota-f.used,f.expiration=j.expiration-h}}return f}}})(window,document);(function(b,a,d){var c=["std","anonymous_ac"];_apw.update=function(){try{for(var f=0;f<c.length;f++){if(c[f] in _apw.modules){_apw.modules[c[f]].update()}}}catch(g){if(console!==d&&console!==null){console.log("Failed to set APW state: "+g)}}};_apw.update()})(window,document);