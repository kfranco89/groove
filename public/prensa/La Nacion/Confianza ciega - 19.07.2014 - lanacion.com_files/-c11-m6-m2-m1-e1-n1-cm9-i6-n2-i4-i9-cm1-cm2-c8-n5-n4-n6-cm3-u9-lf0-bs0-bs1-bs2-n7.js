/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.core.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a,b){function c(b,f){var c=b.nodeName.toLowerCase();if("area"===c){var g=b.parentNode,h=g.name,e;return!b.href||!h||g.nodeName.toLowerCase()!=="map"?!1:(e=a("img[usemap=#"+h+"]")[0],!!e&&d(e))}return(/input|select|textarea|button|object/.test(c)?!b.disabled:"a"==c?b.href||f:f)&&d(b)}function d(b){return!a(b).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};if(a.ui.version)return;a.extend(a.ui,{version:"1.8.20",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(b,c){return typeof b=="number"?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?(b=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0)):(b=this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0)),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(f){if(f!==b)return this.css("zIndex",f);if(this.length){var c=a(this[0]),d,e;while(c.length&&c[0]!==document){d=c.css("position");if(d==="absolute"||d==="relative"||d==="fixed"){e=parseInt(c.css("zIndex"),10);if(!isNaN(e)&&e!==0)return e}c=c.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.each(["Width","Height"],function(h,c){function f(c,b,d,e){return a.each(g,function(){b-=parseFloat(a.curCSS(c,"padding"+this,!0))||0,d&&(b-=parseFloat(a.curCSS(c,"border"+this+"Width",!0))||0),e&&(b-=parseFloat(a.curCSS(c,"margin"+this,!0))||0)}),b}var g=c==="Width"?["Left","Right"]:["Top","Bottom"],d=c.toLowerCase(),e={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+c]=function(g){return g===b?e["inner"+c].call(this):this.each(function(){a(this).css(d,f(this,g)+"px")})},a.fn["outer"+c]=function(b,g){return typeof b!="number"?e["outer"+c].call(this,b):this.each(function(){a(this).css(d,f(this,b,!0,g)+"px")})}}),a.extend(a.expr[":"],{data:function(b,d,c){return!!a.data(b,c[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a(function(){var c=document.body,b=c.appendChild(b=document.createElement("div"));b.offsetHeight,a.extend(b.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=b.offsetHeight===100,a.support.selectstart="onselectstart"in b,c.removeChild(b).style.display="none"}),a.extend(a.ui,{plugin:{add:function(e,f,d){var c=a.ui[e].prototype;for(var b in d)c.plugins[b]=c.plugins[b]||[],c.plugins[b].push([f,d[b]])},call:function(a,d,e){var b=a.plugins[d];if(!b||!a.element[0].parentNode)return;for(var c=0;c<b.length;c++)a.options[b[c][0]]&&b[c][1].apply(a.element,e)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(b,d){if(a(b).css("overflow")==="hidden")return!1;var c=d&&d==="left"?"scrollLeft":"scrollTop",e=!1;return b[c]>0?!0:(b[c]=1,e=b[c]>0,b[c]=0,e)},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)}})})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.widget.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a,b){if(a.cleanData){var c=a.cleanData;a.cleanData=function(b){for(var d=0,e;(e=b[d])!=null;d++)try{a(e).triggerHandler("remove")}catch(f){}c(b)}}else{var d=a.fn.remove;a.fn.remove=function(b,c){return this.each(function(){return c||(!b||a.filter(b,[this]).length)&&a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(b){}}),d.call(a(this),b,c)})}}a.widget=function(b,d,e){var c=b.split(".")[0],f;b=b.split(".")[1],f=c+"-"+b,e||(e=d,d=a.Widget),a.expr[":"][f]=function(c){return!!a.data(c,b)},a[c]=a[c]||{},a[c][b]=function(a,b){arguments.length&&this._createWidget(a,b)};var g=new d;g.options=a.extend(!0,{},g.options),a[c][b].prototype=a.extend(!0,g,{"namespace":c,widgetName:b,widgetEventPrefix:a[c][b].prototype.widgetEventPrefix||b,widgetBaseClass:f},e),a.widget.bridge(b,a[c][b])},a.widget.bridge=function(c,d){a.fn[c]=function(e){var f=typeof e=="string",g=Array.prototype.slice.call(arguments,1),h=this;return e=!f&&g.length?a.extend.apply(null,[!0,e].concat(g)):e,f&&e.charAt(0)==="_"?h:(f?this.each(function(){var d=a.data(this,c),f=d&&a.isFunction(d[e])?d[e].apply(d,g):d;if(f!==d&&f!==b)return h=f,!1}):this.each(function(){var b=a.data(this,c);b?b.option(e||{})._init():a.data(this,c,new d(e,this))}),h)}},a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(c,b){a.data(b,this.widgetName,this),this.element=a(b),this.options=a.extend(!0,{},this.options,this._getCreateOptions(),c);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(c,e){var d=c;if(arguments.length===0)return a.extend({},this.options);if(typeof c=="string"){if(e===b)return this.options[c];d={},d[c]=e}return this._setOptions(d),this},_setOptions:function(b){var c=this;return a.each(b,function(a,b){c._setOption(a,b)}),this},_setOption:function(b,a){return this.options[b]=a,b==="disabled"&&this.widget()[a?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",a),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(c,b,d){var e,f,g=this.options[c];d=d||{},b=a.Event(b),b.type=(c===this.widgetEventPrefix?c:this.widgetEventPrefix+c).toLowerCase(),b.target=this.element[0],f=b.originalEvent;if(f)for(e in f)e in b||(b[e]=f[e]);return this.element.trigger(b,d),!(a.isFunction(g)&&g.call(this.element[0],b,d)===!1||b.isDefaultPrevented())}}})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.mouse.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a){var b=!1;a(document).mouseup(function(){b=!1}),a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){if(!0===a.data(c.target,b.widgetName+".preventClickEvent"))return a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(c){if(b)return;this._mouseStarted&&this._mouseUp(c),this._mouseDownEvent=c;var d=this,e=c.which==1,f=typeof this.options.cancel=="string"&&c.target.nodeName?a(c.target).closest(this.options.cancel).length:!1;if(!e||f||!this._mouseCapture(c))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(c)&&this._mouseDelayMet(c)){this._mouseStarted=this._mouseStart(c)!==!1;if(!this._mouseStarted)return c.preventDefault(),!0}return!0===a.data(c.target,this.widgetName+".preventClickEvent")&&a.removeData(c.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),c.preventDefault(),b=!0,!0},_mouseMove:function(b){return!a.browser.msie||document.documentMode>=9||!!b.button?this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted):this._mouseUp(b)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target==this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.position.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a){a.ui=a.ui||{};var c=/left|center|right/,d=/top|center|bottom/,b="center",e={},f=a.fn.position,g=a.fn.offset;a.fn.position=function(g){if(!g||!g.of)return f.apply(this,arguments);g=a.extend({},g);var i=a(g.of),n=i[0],m=(g.collision||"flip").split(" "),j=g.offset?g.offset.split(" "):[0,0],k,l,h;return n.nodeType===9?(k=i.width(),l=i.height(),h={top:0,left:0}):n.setTimeout?(k=i.width(),l=i.height(),h={top:i.scrollTop(),left:i.scrollLeft()}):n.preventDefault?(g.at="left top",k=l=0,h={top:g.of.pageY,left:g.of.pageX}):(k=i.outerWidth(),l=i.outerHeight(),h=i.offset()),a.each(["my","at"],function(){var a=(g[this]||"").split(" ");a.length===1&&(a=c.test(a[0])?a.concat([b]):d.test(a[0])?[b].concat(a):[b,b]),a[0]=c.test(a[0])?a[0]:b,a[1]=d.test(a[1])?a[1]:b,g[this]=a}),m.length===1&&(m[1]=m[0]),j[0]=parseInt(j[0],10)||0,j.length===1&&(j[1]=j[0]),j[1]=parseInt(j[1],10)||0,g.at[0]==="right"?(h.left+=k):g.at[0]===b&&(h.left+=k/2),g.at[1]==="bottom"?(h.top+=l):g.at[1]===b&&(h.top+=l/2),h.left+=j[0],h.top+=j[1],this.each(function(){var d=a(this),f=d.outerWidth(),i=d.outerHeight(),n=parseInt(a.curCSS(this,"marginLeft",!0))||0,o=parseInt(a.curCSS(this,"marginTop",!0))||0,q=f+n+(parseInt(a.curCSS(this,"marginRight",!0))||0),r=i+o+(parseInt(a.curCSS(this,"marginBottom",!0))||0),c=a.extend({},h),p;g.my[0]==="right"?(c.left-=f):g.my[0]===b&&(c.left-=f/2),g.my[1]==="bottom"?(c.top-=i):g.my[1]===b&&(c.top-=i/2),e.fractions||(c.left=Math.round(c.left),c.top=Math.round(c.top)),p={left:c.left-n,top:c.top-o},a.each(["left","top"],function(b,d){a.ui.position[m[b]]&&a.ui.position[m[b]][d](c,{targetWidth:k,targetHeight:l,elemWidth:f,elemHeight:i,collisionPosition:p,collisionWidth:q,collisionHeight:r,offset:j,my:g.my,at:g.at})}),a.fn.bgiframe&&d.bgiframe(),d.offset(a.extend(c,{using:g.using}))})},a.ui.position={fit:{left:function(b,c){var d=a(window),e=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft();b.left=e>0?b.left-e:Math.max(b.left-c.collisionPosition.left,b.left)},top:function(b,c){var d=a(window),e=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop();b.top=e>0?b.top-e:Math.max(b.top-c.collisionPosition.top,b.top)}},flip:{left:function(h,c){if(c.at[0]===b)return;var d=a(window),i=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft(),e=c.my[0]==="left"?-c.elemWidth:c.my[0]==="right"?c.elemWidth:0,f=c.at[0]==="left"?c.targetWidth:-c.targetWidth,g=-2*c.offset[0];h.left+=c.collisionPosition.left<0?e+f+g:i>0?e+f+g:0},top:function(h,c){if(c.at[1]===b)return;var d=a(window),i=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop(),e=c.my[1]==="top"?-c.elemHeight:c.my[1]==="bottom"?c.elemHeight:0,f=c.at[1]==="top"?c.targetHeight:-c.targetHeight,g=-2*c.offset[1];h.top+=c.collisionPosition.top<0?e+f+g:i>0?e+f+g:0}}},a.offset.setOffset||(a.offset.setOffset=function(b,c){/static/.test(a.curCSS(b,"position"))&&(b.style.position="relative");var d=a(b),e=d.offset(),g=parseInt(a.curCSS(b,"top",!0),10)||0,h=parseInt(a.curCSS(b,"left",!0),10)||0,f={top:c.top-e.top+g,left:c.left-e.left+h};"using"in c?c.using.call(b,f):d.css(f)},a.fn.offset=function(b){var c=this[0];return!c||!c.ownerDocument?null:b?this.each(function(){a.offset.setOffset(this,b)}):g.call(this)}),function(){var c=document.getElementsByTagName("body")[0],g=document.createElement("div"),b,d,f,h,i;b=document.createElement(c?"div":"body"),f={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},c&&a.extend(f,{position:"absolute",left:"-1000px",top:"-1000px"});for(var j in f)b.style[j]=f[j];b.appendChild(g),d=c||document.documentElement,d.insertBefore(b,d.firstChild),g.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",h=a(g).offset(function(b,a){return a}).offset(),b.innerHTML="",d.removeChild(b),i=h.top+h.left+(c?2e3:0),e.fractions=i>21&&i<22}()})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.draggable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){return!this.element.data("draggable")?void 0:(this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this)},_mouseCapture:function(c){var b=this.options;return this.helper||b.disabled||a(c.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(c),this.handle?(b.iframeFix&&a(b.iframeFix===!0?"iframe":b.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),c.containment&&this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.helper.addClass("ui-draggable-dragging"),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(b,d){this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute");if(!d){var c=this._uiHash();if(this._trigger("drag",b,c)===!1)return this._mouseUp({}),!1;this.position=c.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";return a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(d){var b=!1;a.ui.ddmanager&&!this.options.dropBehaviour&&(b=a.ui.ddmanager.drop(this,d)),this.dropped&&(b=this.dropped,this.dropped=!1);var c=this.element[0],e=!1;while(c&&(c=c.parentNode))c==document&&(e=!0);if(!e&&this.options.helper==="original")return!1;if(this.options.revert=="invalid"&&!b||this.options.revert=="valid"&&b||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,b)){var f=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){f._trigger("stop",d)!==!1&&f._clear()})}else this._trigger("stop",d)!==!1&&this._clear();return!1},_mouseUp:function(b){return this.options.iframeFix===!0&&a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(c){var b=!this.options.handle||!a(this.options.handle,this.element).length?!0:!1;return a(this.options.handle,this.element).find("*").andSelf().each(function(){this==c.target&&(b=!0)}),b},_createHelper:function(d){var c=this.options,b=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[d])):c.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return b.parents("body").length||b.appendTo(c.appendTo=="parent"?this.element[0].parentNode:c.appendTo),b[0]!=this.element[0]&&!/(fixed|absolute)/.test(b.css("position"))&&b.css("position","absolute"),b},_adjustOffsetFromHelper:function(b){typeof b=="string"&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var c=this.options;c.containment=="parent"&&(c.containment=this.helper[0].parentNode);if(c.containment=="document"||c.containment=="window")this.containment=[c.containment=="document"?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,c.containment=="document"?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(c.containment=="document"?0:a(window).scrollLeft())+a(c.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(c.containment=="document"?0:a(window).scrollTop())+(a(c.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(c.containment)&&c.containment.constructor!=Array){var d=a(c.containment),b=d[0];if(!b)return;var f=d.offset(),e=a(b).css("overflow")!="hidden";this.containment=[(parseInt(a(b).css("borderLeftWidth"),10)||0)+(parseInt(a(b).css("paddingLeft"),10)||0),(parseInt(a(b).css("borderTopWidth"),10)||0)+(parseInt(a(b).css("paddingTop"),10)||0),(e?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(a(b).css("borderLeftWidth"),10)||0)-(parseInt(a(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(a(b).css("borderTopWidth"),10)||0)-(parseInt(a(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=d}else c.containment.constructor==Array&&(this.containment=c.containment)},_convertPositionTo:function(f,c){c||(c=this.position);var b=f=="absolute"?1:-1,g=this.options,d=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(d[0].tagName);return{top:c.top+this.offset.relative.top*b+this.offset.parent.top*b-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():e?0:d.scrollTop())*b),left:c.left+this.offset.relative.left*b+this.offset.parent.left*b-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())*b)}},_generatePosition:function(f){var c=this.options,j=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,k=/(html|body)/i.test(j[0].tagName),g=f.pageX,h=f.pageY;if(this.originalPosition){var b;if(this.containment){if(this.relative_container){var i=this.relative_container.offset();b=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]}else b=this.containment;f.pageX-this.offset.click.left<b[0]&&(g=b[0]+this.offset.click.left),f.pageY-this.offset.click.top<b[1]&&(h=b[1]+this.offset.click.top),f.pageX-this.offset.click.left>b[2]&&(g=b[2]+this.offset.click.left),f.pageY-this.offset.click.top>b[3]&&(h=b[3]+this.offset.click.top)}if(c.grid){var d=c.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/c.grid[1])*c.grid[1]:this.originalPageY;h=b?d-this.offset.click.top<b[1]||d-this.offset.click.top>b[3]?d-this.offset.click.top<b[1]?d+c.grid[1]:d-c.grid[1]:d:d;var e=c.grid[0]?this.originalPageX+Math.round((g-this.originalPageX)/c.grid[0])*c.grid[0]:this.originalPageX;g=b?e-this.offset.click.left<b[0]||e-this.offset.click.left>b[2]?e-this.offset.click.left<b[0]?e+c.grid[0]:e-c.grid[0]:e:e}}return{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():k?0:j.scrollTop()),left:g-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():k?0:j.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(c,d,b){return b=b||this._uiHash(),a.ui.plugin.call(this,c,[d,b]),c=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,c,d,b)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.extend(a.ui.draggable,{version:"1.8.20"}),a.ui.plugin.add("draggable","connectToSortable",{start:function(c,d){var b=a(this).data("draggable"),e=b.options,f=a.extend({},d,{item:b.element});b.sortables=[],a(e.connectToSortable).each(function(){var d=a.data(this,"sortable");d&&!d.options.disabled&&(b.sortables.push({instance:d,shouldRevert:d.options.revert}),d.refreshPositions(),d._trigger("activate",c,f))})},stop:function(c,d){var b=a(this).data("draggable"),e=a.extend({},d,{item:b.element});a.each(b.sortables,function(){this.instance.isOver?(this.instance.isOver=0,b.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(c),this.instance.options.helper=this.instance.options._helper,b.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",c,e))})},drag:function(c,d){var b=a(this).data("draggable"),e=this,f=function(b){var c=this.offset.click.top,d=this.offset.click.left,e=this.positionAbs.top,f=this.positionAbs.left,g=b.height,h=b.width,i=b.top,j=b.left;return a.ui.isOver(e+c,f+d,i,j,g,h)};a.each(b.sortables,function(){this.instance.positionAbs=b.positionAbs,this.instance.helperProportions=b.helperProportions,this.instance.offset.click=b.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return d.helper[0]},c.target=this.instance.currentItem[0],this.instance._mouseCapture(c,!0),this.instance._mouseStart(c,!0,!0),this.instance.offset.click.top=b.offset.click.top,this.instance.offset.click.left=b.offset.click.left,this.instance.offset.parent.left-=b.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=b.offset.parent.top-this.instance.offset.parent.top,b._trigger("toSortable",c),b.dropped=this.instance.element,b.currentItem=b.element,this.instance.fromOutside=b),this.instance.currentItem&&this.instance._mouseDrag(c)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",c,this.instance._uiHash(this.instance)),this.instance._mouseStop(c,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),b._trigger("fromSortable",c),b.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(){var b=a("body"),c=a(this).data("draggable").options;b.css("cursor")&&(c._cursor=b.css("cursor")),b.css("cursor",c.cursor)},stop:function(){var b=a(this).data("draggable").options;b._cursor&&a("body").css("cursor",b._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(e,d){var b=a(d.helper),c=a(this).data("draggable").options;b.css("opacity")&&(c._opacity=b.css("opacity")),b.css("opacity",c.opacity)},stop:function(d,c){var b=a(this).data("draggable").options;b._opacity&&a(c.helper).css("opacity",b._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(){var b=a(this).data("draggable");b.scrollParent[0]!=document&&b.scrollParent[0].tagName!="HTML"&&(b.overflowOffset=b.scrollParent.offset())},drag:function(d){var c=a(this).data("draggable"),b=c.options,e=!1;if(c.scrollParent[0]!=document&&c.scrollParent[0].tagName!="HTML"){if(!b.axis||b.axis!="x")c.overflowOffset.top+c.scrollParent[0].offsetHeight-d.pageY<b.scrollSensitivity?(c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop+b.scrollSpeed):d.pageY-c.overflowOffset.top<b.scrollSensitivity&&(c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop-b.scrollSpeed);if(!b.axis||b.axis!="y")c.overflowOffset.left+c.scrollParent[0].offsetWidth-d.pageX<b.scrollSensitivity?(c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft+b.scrollSpeed):d.pageX-c.overflowOffset.left<b.scrollSensitivity&&(c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft-b.scrollSpeed)}else{if(!b.axis||b.axis!="x")d.pageY-a(document).scrollTop()<b.scrollSensitivity?(e=a(document).scrollTop(a(document).scrollTop()-b.scrollSpeed)):a(window).height()-(d.pageY-a(document).scrollTop())<b.scrollSensitivity&&(e=a(document).scrollTop(a(document).scrollTop()+b.scrollSpeed));if(!b.axis||b.axis!="y")d.pageX-a(document).scrollLeft()<b.scrollSensitivity?(e=a(document).scrollLeft(a(document).scrollLeft()-b.scrollSpeed)):a(window).width()-(d.pageX-a(document).scrollLeft())<b.scrollSensitivity&&(e=a(document).scrollLeft(a(document).scrollLeft()+b.scrollSpeed))}e!==!1&&a.ui.ddmanager&&!b.dropBehaviour&&a.ui.ddmanager.prepareOffsets(c,d)}}),a.ui.plugin.add("draggable","snap",{start:function(){var b=a(this).data("draggable"),c=b.options;b.snapElements=[],a(c.snap.constructor!=String?c.snap.items||":data(draggable)":c.snap).each(function(){var c=a(this),d=c.offset();this!=b.element[0]&&b.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:d.top,left:d.left})})},drag:function(s,e){for(var b=a(this).data("draggable"),r=b.options,c=r.snapTolerance,j=e.offset.left,l=j+b.helperProportions.width,k=e.offset.top,m=k+b.helperProportions.height,d=b.snapElements.length-1;d>=0;d--){var f=b.snapElements[d].left,h=f+b.snapElements[d].width,g=b.snapElements[d].top,i=g+b.snapElements[d].height;if(!(f-c<j&&j<h+c&&g-c<k&&k<i+c||f-c<j&&j<h+c&&g-c<m&&m<i+c||f-c<l&&l<h+c&&g-c<k&&k<i+c||f-c<l&&l<h+c&&g-c<m&&m<i+c)){b.snapElements[d].snapping&&b.options.snap.release&&b.options.snap.release.call(b.element,s,a.extend(b._uiHash(),{snapItem:b.snapElements[d].item})),b.snapElements[d].snapping=!1;continue}if(r.snapMode!="inner"){var n=Math.abs(g-m)<=c,o=Math.abs(i-k)<=c,p=Math.abs(f-l)<=c,q=Math.abs(h-j)<=c;n&&(e.position.top=b._convertPositionTo("relative",{top:g-b.helperProportions.height,left:0}).top-b.margins.top),o&&(e.position.top=b._convertPositionTo("relative",{top:i,left:0}).top-b.margins.top),p&&(e.position.left=b._convertPositionTo("relative",{top:0,left:f-b.helperProportions.width}).left-b.margins.left),q&&(e.position.left=b._convertPositionTo("relative",{top:0,left:h}).left-b.margins.left)}var t=n||o||p||q;if(r.snapMode!="outer"){var n=Math.abs(g-k)<=c,o=Math.abs(i-m)<=c,p=Math.abs(f-j)<=c,q=Math.abs(h-l)<=c;n&&(e.position.top=b._convertPositionTo("relative",{top:g,left:0}).top-b.margins.top),o&&(e.position.top=b._convertPositionTo("relative",{top:i-b.helperProportions.height,left:0}).top-b.margins.top),p&&(e.position.left=b._convertPositionTo("relative",{top:0,left:f}).left-b.margins.left),q&&(e.position.left=b._convertPositionTo("relative",{top:0,left:h-b.helperProportions.width}).left-b.margins.left)}!b.snapElements[d].snapping&&(n||o||p||q||t)&&b.options.snap.snap&&b.options.snap.snap.call(b.element,s,a.extend(b._uiHash(),{snapItem:b.snapElements[d].item})),b.snapElements[d].snapping=n||o||p||q||t}}}),a.ui.plugin.add("draggable","stack",{start:function(){var d=a(this).data("draggable").options,b=a.makeArray(a(d.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});if(!b.length)return;var c=parseInt(b[0].style.zIndex)||0;a(b).each(function(a){this.style.zIndex=c+a}),this[0].style.zIndex=c+b.length}}),a.ui.plugin.add("draggable","zIndex",{start:function(e,d){var b=a(d.helper),c=a(this).data("draggable").options;b.css("zIndex")&&(c._zIndex=b.css("zIndex")),b.css("zIndex",c.zIndex)},stop:function(d,c){var b=a(this).data("draggable").options;b._zIndex&&a(c.helper).css("zIndex",b._zIndex)}})})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.droppable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a){a.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var b=this.options,c=b.accept;this.isover=0,this.isout=1,this.accept=a.isFunction(c)?c:function(a){return a.is(c)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},a.ui.ddmanager.droppables[b.scope]=a.ui.ddmanager.droppables[b.scope]||[],a.ui.ddmanager.droppables[b.scope].push(this),b.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var c=a.ui.ddmanager.droppables[this.options.scope],b=0;b<c.length;b++)c[b]==this&&c.splice(b,1);return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(c,b){c=="accept"&&(this.accept=a.isFunction(b)?b:function(a){return a.is(b)}),a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(c){var b=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),b&&this._trigger("activate",c,this.ui(b))},_deactivate:function(c){var b=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),b&&this._trigger("deactivate",c,this.ui(b))},_over:function(c){var b=a.ui.ddmanager.current;if(!b||(b.currentItem||b.element)[0]==this.element[0])return;this.accept.call(this.element[0],b.currentItem||b.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",c,this.ui(b)))},_out:function(c){var b=a.ui.ddmanager.current;if(!b||(b.currentItem||b.element)[0]==this.element[0])return;this.accept.call(this.element[0],b.currentItem||b.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",c,this.ui(b)))},_drop:function(d,e){var b=e||a.ui.ddmanager.current;if(!b||(b.currentItem||b.element)[0]==this.element[0])return!1;var c=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var d=a.data(this,"droppable");if(d.options.greedy&&!d.options.disabled&&d.options.scope==b.options.scope&&d.accept.call(d.element[0],b.currentItem||b.element)&&a.ui.intersect(b,a.extend(d,{offset:d.element.offset()}),d.options.tolerance))return c=!0,!1}),c?!1:this.accept.call(this.element[0],b.currentItem||b.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",d,this.ui(b)),this.element):!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}}),a.extend(a.ui.droppable,{version:"1.8.20"}),a.ui.intersect=function(b,c,l){if(!c.offset)return!1;var f=(b.positionAbs||b.position.absolute).left,h=f+b.helperProportions.width,g=(b.positionAbs||b.position.absolute).top,i=g+b.helperProportions.height,d=c.offset.left,j=d+c.proportions.width,e=c.offset.top,k=e+c.proportions.height;switch(l){case"fit":return d<=f&&h<=j&&e<=g&&i<=k;case"intersect":return d<f+b.helperProportions.width/2&&h-b.helperProportions.width/2<j&&e<g+b.helperProportions.height/2&&i-b.helperProportions.height/2<k;case"pointer":var m=(b.positionAbs||b.position.absolute).left+(b.clickOffset||b.offset.click).left,n=(b.positionAbs||b.position.absolute).top+(b.clickOffset||b.offset.click).top,o=a.ui.isOver(n,m,e,d,c.proportions.height,c.proportions.width);return o;case"touch":return(g>=e&&g<=k||i>=e&&i<=k||g<e&&i>k)&&(f>=d&&f<=j||h>=d&&h<=j||f<d&&h>j);default:return!1}},a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(d,e){var c=a.ui.ddmanager.droppables[d.options.scope]||[],h=e?e.type:null,g=(d.currentItem||d.element).find(":data(droppable)").andSelf();a:for(var b=0;b<c.length;b++){if(c[b].options.disabled||d&&!c[b].accept.call(c[b].element[0],d.currentItem||d.element))continue;for(var f=0;f<g.length;f++)if(g[f]==c[b].element[0]){c[b].proportions.height=0;continue a}c[b].visible=c[b].element.css("display")!="none";if(!c[b].visible)continue;h=="mousedown"&&c[b]._activate.call(c[b],e),c[b].offset=c[b].element.offset(),c[b].proportions={width:c[b].element[0].offsetWidth,height:c[b].element[0].offsetHeight}}},drop:function(b,d){var c=!1;return a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options)return;!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance)&&(c=this._drop.call(this,d)||c),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,d))}),c},dragStart:function(b,c){b.element.parents(":not(body,html)").bind("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c),a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var f=a.ui.intersect(b,this,this.options.tolerance),e=!f&&this.isover==1?"isout":f&&this.isover==0?"isover":null;if(!e)return;var d;if(this.options.greedy){var g=this.element.parents(":data(droppable):eq(0)");g.length&&(d=a.data(g[0],"droppable"),d.greedyChild=e=="isover"?1:0)}d&&e=="isover"&&(d.isover=0,d.isout=1,d._out.call(d,c)),this[e]=1,this[e=="isout"?"isover":"isout"]=0,this[e=="isover"?"_over":"_out"].call(this,c),d&&e=="isout"&&(d.isout=0,d.isover=1,d._over.call(d,c))})},dragStop:function(b,c){b.element.parents(":not(body,html)").unbind("scroll.droppable"),b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)}}})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.resizable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a){a.widget("ui.resizable",a.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var c=this,b=this.options;this.element.addClass("ui-resizable"),a.extend(this,{_aspectRatio:!!b.aspectRatio,aspectRatio:b.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:b.helper||b.ghost||b.animate?b.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=b.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw");var g=this.handles.split(",");this.handles={};for(var e=0;e<g.length;e++){var d=a.trim(g[e]),h="ui-resizable-"+d,f=a('<div class="ui-resizable-handle '+h+'"></div>');f.css({zIndex:b.zIndex}),"se"==d&&f.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[d]=".ui-resizable-"+d,this.element.append(f)}}this._renderAxis=function(c){c=c||this.element;for(var b in this.handles){this.handles[b].constructor==String&&(this.handles[b]=a(this.handles[b],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var d=a(this.handles[b],this.element),e=0;e=/sw|ne|nw|se|n|s/.test(b)?d.outerHeight():d.outerWidth();var f=["padding",/ne|nw|n/.test(b)?"Top":/se|sw|s/.test(b)?"Bottom":/^e$/.test(b)?"Right":"Left"].join("");c.css(f,e),this._proportionallyResize()}if(!a(this.handles[b]).length)continue}},this._renderAxis(this.element),this._handles=a(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!c.resizing){if(this.className)var a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);c.axis=a&&a[1]?a[1]:"se"}}),b.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").hover(function(){if(b.disabled)return;a(this).removeClass("ui-resizable-autohide"),c._handles.show()},function(){if(b.disabled)return;c.resizing||(a(this).addClass("ui-resizable-autohide"),c._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var c=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){c(this.element);var b=this.element;b.after(this.originalElement.css({position:b.css("position"),width:b.outerWidth(),height:b.outerHeight(),top:b.css("top"),left:b.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),c(this.originalElement),this},_mouseCapture:function(c){var b=!1;for(var d in this.handles)a(this.handles[d])[0]==c.target&&(b=!0);return!this.options.disabled&&b},_mouseStart:function(e){var d=this.options,h=this.element.position(),b=this.element;this.resizing=!0,this.documentScroll={top:a(document).scrollTop(),left:a(document).scrollLeft()},(b.is(".ui-draggable")||/absolute/.test(b.css("position")))&&b.css({position:"absolute",top:h.top,left:h.left}),this._renderProxy();var f=c(this.helper.css("left")),g=c(this.helper.css("top"));d.containment&&(f+=a(d.containment).scrollLeft()||0,g+=a(d.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:f,top:g},this.size=this._helper?{width:b.outerWidth(),height:b.outerHeight()}:{width:b.width(),height:b.height()},this.originalSize=this._helper?{width:b.outerWidth(),height:b.outerHeight()}:{width:b.width(),height:b.height()},this.originalPosition={left:f,top:g},this.sizeDiff={width:b.outerWidth()-b.width(),height:b.outerHeight()-b.height()},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio=typeof d.aspectRatio=="number"?d.aspectRatio:this.originalSize.width/this.originalSize.height||1;var i=a(".ui-resizable-"+this.axis).css("cursor");return a("body").css("cursor",i=="auto"?this.axis+"-resize":i),b.addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(b){var f=this.helper,j=this.options,k={},l=this,d=this.originalMousePosition,g=this.axis,h=b.pageX-d.left||0,i=b.pageY-d.top||0,e=this._change[g];if(!e)return!1;var c=e.apply(this,[b,h,i]),m=a.browser.msie&&a.browser.version<7,n=this.sizeDiff;this._updateVirtualBoundaries(b.shiftKey);if(this._aspectRatio||b.shiftKey)c=this._updateRatio(c,b);return c=this._respectSize(c,b),this._propagate("resize",b),f.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(c),this._trigger("resize",b,this.ui()),!1},_mouseStop:function(f){this.resizing=!1;var d=this.options,b=this;if(this._helper){var c=this._proportionallyResizeElements,e=c.length&&/textarea/i.test(c[0].nodeName),g=e&&a.ui.hasScroll(c[0],"left")?0:b.sizeDiff.height,h=e?0:b.sizeDiff.width,i={width:b.helper.width()-h,height:b.helper.height()-g},j=parseInt(b.element.css("left"),10)+(b.position.left-b.originalPosition.left)||null,k=parseInt(b.element.css("top"),10)+(b.position.top-b.originalPosition.top)||null;d.animate||this.element.css(a.extend(i,{top:k,left:j})),b.helper.height(b.size.height),b.helper.width(b.size.width),this._helper&&!d.animate&&this._proportionallyResize()}return a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",f),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(h){var c=this.options,d,e,f,g,a;a={minWidth:b(c.minWidth)?c.minWidth:0,maxWidth:b(c.maxWidth)?c.maxWidth:Infinity,minHeight:b(c.minHeight)?c.minHeight:0,maxHeight:b(c.maxHeight)?c.maxHeight:Infinity};if(this._aspectRatio||h)d=a.minHeight*this.aspectRatio,f=a.minWidth/this.aspectRatio,e=a.maxHeight*this.aspectRatio,g=a.maxWidth/this.aspectRatio,d>a.minWidth&&(a.minWidth=d),f>a.minHeight&&(a.minHeight=f),e<a.maxWidth&&(a.maxWidth=e),g<a.maxHeight&&(a.maxHeight=g);this._vBoundaries=a},_updateCache:function(a){var c=this.options;this.offset=this.helper.offset(),b(a.left)&&(this.position.left=a.left),b(a.top)&&(this.position.top=a.top),b(a.height)&&(this.size.height=a.height),b(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var g=this.options,c=this.position,d=this.size,e=this.axis;return b(a.height)?(a.width=a.height*this.aspectRatio):b(a.width)&&(a.height=a.width/this.aspectRatio),e=="sw"&&(a.left=c.left+(d.width-a.width),a.top=null),e=="nw"&&(a.top=c.top+(d.height-a.height),a.left=c.left+(d.width-a.width)),a},_respectSize:function(a,n){var o=this.helper,c=this._vBoundaries,p=this._aspectRatio||n.shiftKey,d=this.axis,e=b(a.width)&&c.maxWidth&&c.maxWidth<a.width,f=b(a.height)&&c.maxHeight&&c.maxHeight<a.height,g=b(a.width)&&c.minWidth&&c.minWidth>a.width,h=b(a.height)&&c.minHeight&&c.minHeight>a.height;g&&(a.width=c.minWidth),h&&(a.height=c.minHeight),e&&(a.width=c.maxWidth),f&&(a.height=c.maxHeight);var i=this.originalPosition.left+this.originalSize.width,j=this.position.top+this.size.height,k=/sw|nw|w/.test(d),l=/nw|ne|n/.test(d);g&&k&&(a.left=i-c.minWidth),e&&k&&(a.left=i-c.maxWidth),h&&l&&(a.top=j-c.minHeight),f&&l&&(a.top=j-c.maxHeight);var m=!a.width&&!a.height;return m&&!a.left&&a.top?(a.top=null):m&&!a.top&&a.left&&(a.left=null),a},_proportionallyResize:function(){var g=this.options;if(!this._proportionallyResizeElements.length)return;for(var c=this.helper||this.element,d=0;d<this._proportionallyResizeElements.length;d++){var b=this._proportionallyResizeElements[d];if(!this.borderDif){var e=[b.css("borderTopWidth"),b.css("borderRightWidth"),b.css("borderBottomWidth"),b.css("borderLeftWidth")],f=[b.css("paddingTop"),b.css("paddingRight"),b.css("paddingBottom"),b.css("paddingLeft")];this.borderDif=a.map(e,function(a,b){var c=parseInt(a,10)||0,d=parseInt(f[b],10)||0;return c+d})}if(!a.browser.msie||!a(c).is(":hidden")&&!a(c).parents(":hidden").length)b.css({height:c.height()-this.borderDif[0]-this.borderDif[2]||0,width:c.width()-this.borderDif[1]-this.borderDif[3]||0});else continue}},_renderProxy:function(){var e=this.element,f=this.options;this.elementOffset=e.offset();if(this._helper){this.helper=this.helper||a('<div style="overflow:hidden;"></div>');var b=a.browser.msie&&a.browser.version<7,c=b?1:0,d=b?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+d,height:this.element.outerHeight()+d,position:"absolute",left:this.elementOffset.left-c+"px",top:this.elementOffset.top-c+"px",zIndex:++f.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(b,a){return{width:this.originalSize.width+a}},w:function(d,a){var f=this.options,b=this.originalSize,c=this.originalPosition;return{left:c.left+a,width:b.width-a}},n:function(d,e,a){var f=this.options,b=this.originalSize,c=this.originalPosition;return{top:c.top+a,height:b.height-a}},s:function(b,c,a){return{height:this.originalSize.height+a}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),b!="resize"&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),a.extend(a.ui.resizable,{version:"1.8.20"}),a.ui.plugin.add("resizable","alsoResize",{start:function(){var d=a(this).data("resizable"),b=d.options,c=function(b){a(b).each(function(){var b=a(this);b.data("resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})};typeof b.alsoResize=="object"&&!b.alsoResize.parentNode?b.alsoResize.length?(b.alsoResize=b.alsoResize[0],c(b.alsoResize)):a.each(b.alsoResize,function(a){c(a)}):c(b.alsoResize)},resize:function(i,g){var b=a(this).data("resizable"),c=b.options,d=b.originalSize,e=b.originalPosition,h={height:b.size.height-d.height||0,width:b.size.width-d.width||0,top:b.position.top-e.top||0,left:b.position.left-e.left||0},f=function(c,b){a(c).each(function(){var c=a(this),e=a(this).data("resizable-alsoresize"),d={},f=b&&b.length?b:c.parents(g.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(f,function(c,a){var b=(e[a]||0)+(h[a]||0);b&&b>=0&&(d[a]=b||null)}),c.css(d)})};typeof c.alsoResize=="object"&&!c.alsoResize.nodeType?a.each(c.alsoResize,function(a,b){f(a,b)}):f(c.alsoResize)},stop:function(){a(this).removeData("resizable-alsoresize")}}),a.ui.plugin.add("resizable","animate",{stop:function(h){var b=a(this).data("resizable"),d=b.options,c=b._proportionallyResizeElements,e=c.length&&/textarea/i.test(c[0].nodeName),i=e&&a.ui.hasScroll(c[0],"left")?0:b.sizeDiff.height,j=e?0:b.sizeDiff.width,k={width:b.size.width-j,height:b.size.height-i},f=parseInt(b.element.css("left"),10)+(b.position.left-b.originalPosition.left)||null,g=parseInt(b.element.css("top"),10)+(b.position.top-b.originalPosition.top)||null;b.element.animate(a.extend(k,g&&f?{top:g,left:f}:{}),{duration:d.animateDuration,easing:d.animateEasing,step:function(){var d={width:parseInt(b.element.css("width"),10),height:parseInt(b.element.css("height"),10),top:parseInt(b.element.css("top"),10),left:parseInt(b.element.css("left"),10)};c&&c.length&&a(c[0]).css({width:d.width,height:d.height}),b._updateCache(d),b._propagate("resize",h)}})}}),a.ui.plugin.add("resizable","containment",{start:function(){var b=a(this).data("resizable"),i=b.options,j=b.element,e=i.containment,d=e instanceof a?e.get(0):/parent/.test(e)?j.parent().get(0):e;if(!d)return;b.containerElement=a(d);if(/document/.test(e)||e==document)b.containerOffset={left:0,top:0},b.containerPosition={left:0,top:0},b.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight};else{var f=a(d),g=[];a(["Top","Right","Left","Bottom"]).each(function(a,b){g[a]=c(f.css("padding"+b))}),b.containerOffset=f.offset(),b.containerPosition=f.position(),b.containerSize={height:f.innerHeight()-g[3],width:f.innerWidth()-g[1]};var h=b.containerOffset,k=b.containerSize.height,l=b.containerSize.width,m=a.ui.hasScroll(d,"left")?d.scrollWidth:l,n=a.ui.hasScroll(d)?d.scrollHeight:k;b.parentData={element:d,left:h.left,top:h.top,width:m,height:n}}},resize:function(j){var b=a(this).data("resizable"),k=b.options,o=b.containerSize,c=b.containerOffset,p=b.size,g=b.position,e=b._aspectRatio||j.shiftKey,d={top:0,left:0},h=b.containerElement;h[0]!=document&&/static/.test(h.css("position"))&&(d=c),g.left<(b._helper?c.left:0)&&(b.size.width=b.size.width+(b._helper?b.position.left-c.left:b.position.left-d.left),e&&(b.size.height=b.size.width/b.aspectRatio),b.position.left=k.helper?c.left:0),g.top<(b._helper?c.top:0)&&(b.size.height=b.size.height+(b._helper?b.position.top-c.top:b.position.top),e&&(b.size.width=b.size.height*b.aspectRatio),b.position.top=b._helper?c.top:0),b.offset.left=b.parentData.left+b.position.left,b.offset.top=b.parentData.top+b.position.top;var f=Math.abs((b._helper?b.offset.left-d.left:b.offset.left-d.left)+b.sizeDiff.width),i=Math.abs((b._helper?b.offset.top-d.top:b.offset.top-c.top)+b.sizeDiff.height),l=b.containerElement.get(0)==b.element.parent().get(0),m=/relative|absolute/.test(b.containerElement.css("position"));l&&m&&(f-=b.parentData.left),f+b.size.width>=b.parentData.width&&(b.size.width=b.parentData.width-f,e&&(b.size.height=b.size.width/b.aspectRatio)),i+b.size.height>=b.parentData.height&&(b.size.height=b.parentData.height-i,e&&(b.size.width=b.size.height*b.aspectRatio))},stop:function(){var b=a(this).data("resizable"),d=b.options,m=b.position,e=b.containerOffset,f=b.containerPosition,g=b.containerElement,c=a(b.helper),h=c.offset(),i=c.outerWidth()-b.sizeDiff.width,j=c.outerHeight()-b.sizeDiff.height;b._helper&&!d.animate&&/relative/.test(g.css("position"))&&a(this).css({left:h.left-f.left-e.left,width:i,height:j}),b._helper&&!d.animate&&/static/.test(g.css("position"))&&a(this).css({left:h.left-f.left-e.left,width:i,height:j})}}),a.ui.plugin.add("resizable","ghost",{start:function(){var b=a(this).data("resizable"),c=b.options,d=b.size;b.ghost=b.originalElement.clone(),b.ghost.css({opacity:.25,display:"block",position:"relative",height:d.height,width:d.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof c.ghost=="string"?c.ghost:""),b.ghost.appendTo(b.helper)},resize:function(){var b=a(this).data("resizable"),e=b.options;b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){var b=a(this).data("resizable"),e=b.options;b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}}),a.ui.plugin.add("resizable","grid",{resize:function(j){var b=a(this).data("resizable"),c=b.options,i=b.size,d=b.originalSize,g=b.originalPosition,h=b.axis,l=c._aspectRatio||j.shiftKey;c.grid=typeof c.grid=="number"?[c.grid,c.grid]:c.grid;var e=Math.round((i.width-d.width)/(c.grid[0]||1))*(c.grid[0]||1),f=Math.round((i.height-d.height)/(c.grid[1]||1))*(c.grid[1]||1);/^(se|s|e)$/.test(h)?(b.size.width=d.width+e,b.size.height=d.height+f):/^(ne)$/.test(h)?(b.size.width=d.width+e,b.size.height=d.height+f,b.position.top=g.top-f):/^(sw)$/.test(h)?(b.size.width=d.width+e,b.size.height=d.height+f,b.position.left=g.left-e):(b.size.width=d.width+e,b.size.height=d.height+f,b.position.top=g.top-f,b.position.left=g.left-e)}});var c=function(a){return parseInt(a,10)||0},b=function(a){return!isNaN(parseInt(a,10))}})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.selectable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a){a.widget("ui.selectable",a.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var c=this;this.element.addClass("ui-selectable"),this.dragged=!1;var b;this.refresh=function(){b=a(c.options.filter,c.element[0]),b.addClass("ui-selectee"),b.each(function(){var b=a(this),c=b.offset();a.data(this,"selectable-item",{element:this,$element:b,left:c.left,top:c.top,right:c.left+b.outerWidth(),bottom:c.top+b.outerHeight(),startselected:!1,selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=b.addClass("ui-selectee"),this._mouseInit(),this.helper=a("<div class='ui-selectable-helper'></div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(b){var c=this;this.opos=[b.pageX,b.pageY];if(this.options.disabled)return;var d=this.options;this.selectees=a(d.filter,this.element[0]),this._trigger("start",b),a(d.appendTo).append(this.helper),this.helper.css({left:b.clientX,top:b.clientY,width:0,height:0}),d.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var d=a.data(this,"selectable-item");d.startselected=!0,!b.metaKey&&!b.ctrlKey&&(d.$element.removeClass("ui-selected"),d.selected=!1,d.$element.addClass("ui-unselecting"),d.unselecting=!0,c._trigger("unselecting",b,{unselecting:d.element}))}),a(b.target).parents().andSelf().each(function(){var d=a.data(this,"selectable-item");if(d){var e=!b.metaKey&&!b.ctrlKey||!d.$element.hasClass("ui-selected");return d.$element.removeClass(e?"ui-unselecting":"ui-selected").addClass(e?"ui-selecting":"ui-unselecting"),d.unselecting=!e,d.selecting=e,d.selected=e,e?c._trigger("selecting",b,{selecting:d.element}):c._trigger("unselecting",b,{unselecting:d.element}),!1}})},_mouseDrag:function(b){var g=this;this.dragged=!0;if(this.options.disabled)return;var h=this.options,c=this.opos[0],d=this.opos[1],e=b.pageX,f=b.pageY;if(c>e){var i=e;e=c,c=i}if(d>f){var i=f;f=d,d=i}return this.helper.css({left:c,top:d,width:e-c,height:f-d}),this.selectees.each(function(){var i=a.data(this,"selectable-item");if(!i||i.element==g.element[0])return;var j=!1;h.tolerance=="touch"?(j=!(i.left>e||i.right<c||i.top>f||i.bottom<d)):h.tolerance=="fit"&&(j=i.left>c&&i.right<e&&i.top>d&&i.bottom<f),j?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,g._trigger("selecting",b,{selecting:i.element}))):(i.selecting&&((b.metaKey||b.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),g._trigger("unselecting",b,{unselecting:i.element}))),i.selected&&!b.metaKey&&!b.ctrlKey&&!i.startselected&&(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,g._trigger("unselecting",b,{unselecting:i.element})))}),!1},_mouseStop:function(b){var c=this;this.dragged=!1;var d=this.options;return a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-unselecting"),d.unselecting=!1,d.startselected=!1,c._trigger("unselected",b,{unselected:d.element})}),a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected"),d.selecting=!1,d.selected=!0,d.startselected=!0,c._trigger("selected",b,{selected:d.element})}),this._trigger("stop",b),this.helper.remove(),!1}}),a.extend(a.ui.selectable,{version:"1.8.20"})})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.sortable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a){a.widget("ui.sortable",a.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var a=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?a.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},destroy:function(){a.Widget.prototype.destroy.call(this),this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var b=this.items.length-1;b>=0;b--)this.items[b].item.removeData(this.widgetName+"-item");return this},_setOption:function(b,c){b==="disabled"?(this.options[b]=c,this.widget()[c?"addClass":"removeClass"]("ui-sortable-disabled")):a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(b,g){var d=this;if(this.reverting)return!1;if(this.options.disabled||this.options.type=="static")return!1;this._refreshItems(b);var c=null,e=this,h=a(b.target).parents().each(function(){if(a.data(this,d.widgetName+"-item")==e)return c=a(this),!1});a.data(b.target,d.widgetName+"-item")==e&&(c=a(b.target));if(!c)return!1;if(this.options.handle&&!g){var f=!1;a(this.options.handle,c).find("*").andSelf().each(function(){this==b.target&&(f=!0)});if(!f)return!1}return this.currentItem=c,this._removeCurrentsFromItems(),!0},_mouseStart:function(b,g,e){var c=this.options,f=this;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),c.containment&&this._setContainment(),c.cursor&&(a("body").css("cursor")&&(this._storedCursor=a("body").css("cursor")),a("body").css("cursor",c.cursor)),c.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",c.opacity)),c.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",c.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!e)for(var d=this.containers.length-1;d>=0;d--)this.containers[d]._trigger("activate",b,f._uiHash(this));return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(c){this.position=this._generatePosition(c),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var b=this.options,d=!1;this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-c.pageY<b.scrollSensitivity?(this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop+b.scrollSpeed):c.pageY-this.overflowOffset.top<b.scrollSensitivity&&(this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop-b.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-c.pageX<b.scrollSensitivity?(this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft+b.scrollSpeed):c.pageX-this.overflowOffset.left<b.scrollSensitivity&&(this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft-b.scrollSpeed)):(c.pageY-a(document).scrollTop()<b.scrollSensitivity?(d=a(document).scrollTop(a(document).scrollTop()-b.scrollSpeed)):a(window).height()-(c.pageY-a(document).scrollTop())<b.scrollSensitivity&&(d=a(document).scrollTop(a(document).scrollTop()+b.scrollSpeed)),c.pageX-a(document).scrollLeft()<b.scrollSensitivity?(d=a(document).scrollLeft(a(document).scrollLeft()-b.scrollSpeed)):a(window).width()-(c.pageX-a(document).scrollLeft())<b.scrollSensitivity&&(d=a(document).scrollLeft(a(document).scrollLeft()+b.scrollSpeed))),d!==!1&&a.ui.ddmanager&&!b.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,c)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(var g=this.items.length-1;g>=0;g--){var e=this.items[g],f=e.item[0],h=this._intersectsWithPointer(e);if(!h)continue;if(f!=this.currentItem[0]&&this.placeholder[h==1?"next":"prev"]()[0]!=f&&!a.ui.contains(this.placeholder[0],f)&&(this.options.type=="semi-dynamic"?!a.ui.contains(this.element[0],f):!0)){this.direction=h==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(e))this._rearrange(c,e);else break;this._trigger("change",c,this._uiHash());break}}return this._contactContainers(c),a.ui.ddmanager&&a.ui.ddmanager.drag(this,c),this._trigger("sort",c,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(c,e){if(!c)return;a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,c);if(this.options.revert){var b=this,d=b.placeholder.offset();b.reverting=!0,a(this.helper).animate({left:d.left-this.offset.parent.left-b.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:d.top-this.offset.parent.top-b.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){b._clear(c)})}else this._clear(c,e);return!1},cancel:function(){var c=this;if(this.dragging){this._mouseUp({target:null}),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var b=this.containers.length-1;b>=0;b--)this.containers[b]._trigger("deactivate",null,c._uiHash(this)),this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,c._uiHash(this)),this.containers[b].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var d=this._getItemsAsjQuery(b&&b.connected),c=[];return b=b||{},a(d).each(function(){var d=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[-=_](.+)/);d&&c.push((b.key||d[1]+"[]")+"="+(b.key&&b.expression?d[1]:d[2]))}),!c.length&&b.key&&c.push(b.key+"="),c.join("&")},toArray:function(b){var d=this._getItemsAsjQuery(b&&b.connected),c=[];return b=b||{},d.each(function(){c.push(a(b.item||this).attr(b.attribute||"id")||"")}),c},_intersectsWith:function(a){var b=this.positionAbs.left,j=b+this.helperProportions.width,c=this.positionAbs.top,k=c+this.helperProportions.height,d=a.left,f=d+a.width,e=a.top,g=e+a.height,h=this.offset.click.top,i=this.offset.click.left,l=c+h>e&&c+h<g&&b+i>d&&b+i<f;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?l:d<b+this.helperProportions.width/2&&j-this.helperProportions.width/2<f&&e<c+this.helperProportions.height/2&&k-this.helperProportions.height/2<g},_intersectsWithPointer:function(b){var e=this.options.axis==="x"||a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top,b.height),f=this.options.axis==="y"||a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left,b.width),g=e&&f,c=this._getDragVerticalDirection(),d=this._getDragHorizontalDirection();return g?this.floating?d&&d=="right"||c=="down"?2:1:c&&(c=="down"?2:1):!1},_intersectsWithSides:function(b){var e=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top+b.height/2,b.height),f=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left+b.width/2,b.width),c=this._getDragVerticalDirection(),d=this._getDragHorizontalDirection();return this.floating&&d?d=="right"&&f||d=="left"&&!f:c&&(c=="down"&&e||c=="up"&&!e)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return a!=0&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return a!=0&&(a>0?"right":"left")},refresh:function(a){return this._refreshItems(a),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(i){var j=this,g=[],d=[],e=this._connectWith();if(e&&i)for(var c=e.length-1;c>=0;c--)for(var h=a(e[c]),f=h.length-1;f>=0;f--){var b=a.data(h[f],this.widgetName);b&&b!=this&&!b.options.disabled&&d.push([a.isFunction(b.options.items)?b.options.items.call(b.element):a(b.options.items,b.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),b])}d.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var c=d.length-1;c>=0;c--)d[c][0].each(function(){g.push(this)});return a(g)},_removeCurrentsFromItems:function(){for(var c=this.currentItem.find(":data("+this.widgetName+"-item)"),a=0;a<this.items.length;a++)for(var b=0;b<c.length;b++)c[b]==this.items[a].item[0]&&this.items.splice(a,1)},_refreshItems:function(g){this.items=[],this.containers=[this];var l=this.items,n=this,e=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],g,{item:this.currentItem}):a(this.options.items,this.element),this]],f=this._connectWith();if(f&&this.ready)for(var c=f.length-1;c>=0;c--)for(var h=a(f[c]),d=h.length-1;d>=0;d--){var b=a.data(h[d],this.widgetName);b&&b!=this&&!b.options.disabled&&(e.push([a.isFunction(b.options.items)?b.options.items.call(b.element[0],g,{item:this.currentItem}):a(b.options.items,b.element),b]),this.containers.push(b))}for(var c=e.length-1;c>=0;c--)for(var i=e[c][1],j=e[c][0],d=0,m=j.length;d<m;d++){var k=a(j[d]);k.data(this.widgetName+"-item",i),l.push({item:k,instance:i,width:0,height:0,left:0,top:0})}},refreshPositions:function(f){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var b=this.items.length-1;b>=0;b--){var c=this.items[b];if(c.instance!=this.currentContainer&&this.currentContainer&&c.item[0]!=this.currentItem[0])continue;var e=this.options.toleranceElement?a(this.options.toleranceElement,c.item):c.item;f||(c.width=e.outerWidth(),c.height=e.outerHeight());var d=e.offset();c.left=d.left,c.top=d.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var b=this.containers.length-1;b>=0;b--){var d=this.containers[b].element.offset();this.containers[b].containerCache.left=d.left,this.containers[b].containerCache.top=d.top,this.containers[b].containerCache.width=this.containers[b].element.outerWidth(),this.containers[b].containerCache.height=this.containers[b].element.outerHeight()}return this},_createPlaceholder:function(e){var b=e||this,c=b.options;if(!c.placeholder||c.placeholder.constructor==String){var d=c.placeholder;c.placeholder={element:function(){var c=a(document.createElement(b.currentItem[0].nodeName)).addClass(d||b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return d||(c.style.visibility="hidden"),c},update:function(e,a){if(d&&!c.forcePlaceholderSize)return;a.height()||a.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10)),a.width()||a.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10))}}}b.placeholder=a(c.placeholder.element.call(b.element,b.currentItem)),b.currentItem.after(b.placeholder),c.placeholder.update(b,b.placeholder)},_contactContainers:function(d){for(var f=null,b=null,c=this.containers.length-1;c>=0;c--){if(a.ui.contains(this.currentItem[0],this.containers[c].element[0]))continue;if(this._intersectsWith(this.containers[c].containerCache)){if(f&&a.ui.contains(this.containers[c].element[0],f.element[0]))continue;f=this.containers[c],b=c}else this.containers[c].containerCache.over&&(this.containers[c]._trigger("out",d,this._uiHash(this)),this.containers[c].containerCache.over=0)}if(!f)return;if(this.containers.length===1)this.containers[b]._trigger("over",d,this._uiHash(this)),this.containers[b].containerCache.over=1;else if(this.currentContainer!=this.containers[b]){for(var h=1e4,g=null,i=this.positionAbs[this.containers[b].floating?"left":"top"],e=this.items.length-1;e>=0;e--){if(!a.ui.contains(this.containers[b].element[0],this.items[e].item[0]))continue;var j=this.items[e][this.containers[b].floating?"left":"top"];Math.abs(j-i)<h&&(h=Math.abs(j-i),g=this.items[e])}if(!g&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[b],g?this._rearrange(d,g,null,!0):this._rearrange(d,null,this.containers[b].element,!0),this._trigger("change",d,this._uiHash()),this.containers[b]._trigger("change",d,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[b]._trigger("over",d,this._uiHash(this)),this.containers[b].containerCache.over=1}},_createHelper:function(d){var c=this.options,b=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[d,this.currentItem])):c.helper=="clone"?this.currentItem.clone():this.currentItem;return b.parents("body").length||a(c.appendTo!="parent"?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(b[0]),b[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(b[0].style.width==""||c.forceHelperSize)&&b.width(this.currentItem.width()),(b[0].style.height==""||c.forceHelperSize)&&b.height(this.currentItem.height()),b},_adjustOffsetFromHelper:function(b){typeof b=="string"&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var c=this.options;c.containment=="parent"&&(c.containment=this.helper[0].parentNode);if(c.containment=="document"||c.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a(c.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a(c.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(c.containment)){var b=a(c.containment)[0],d=a(c.containment).offset(),e=a(b).css("overflow")!="hidden";this.containment=[d.left+(parseInt(a(b).css("borderLeftWidth"),10)||0)+(parseInt(a(b).css("paddingLeft"),10)||0)-this.margins.left,d.top+(parseInt(a(b).css("borderTopWidth"),10)||0)+(parseInt(a(b).css("paddingTop"),10)||0)-this.margins.top,d.left+(e?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(a(b).css("borderLeftWidth"),10)||0)-(parseInt(a(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,d.top+(e?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(a(b).css("borderTopWidth"),10)||0)-(parseInt(a(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(f,c){c||(c=this.position);var b=f=="absolute"?1:-1,g=this.options,d=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(d[0].tagName);return{top:c.top+this.offset.relative.top*b+this.offset.parent.top*b-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():e?0:d.scrollTop())*b),left:c.left+this.offset.relative.left*b+this.offset.parent.left*b-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())*b)}},_generatePosition:function(e){var b=this.options,h=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,i=/(html|body)/i.test(h[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var f=e.pageX,g=e.pageY;if(this.originalPosition){this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top));if(b.grid){var c=this.originalPageY+Math.round((g-this.originalPageY)/b.grid[1])*b.grid[1];g=this.containment?c-this.offset.click.top<this.containment[1]||c-this.offset.click.top>this.containment[3]?c-this.offset.click.top<this.containment[1]?c+b.grid[1]:c-b.grid[1]:c:c;var d=this.originalPageX+Math.round((f-this.originalPageX)/b.grid[0])*b.grid[0];f=this.containment?d-this.offset.click.left<this.containment[0]||d-this.offset.click.left>this.containment[2]?d-this.offset.click.left<this.containment[0]?d+b.grid[0]:d-b.grid[0]:d:d}}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:h.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:h.scrollLeft())}},_rearrange:function(f,a,b,d){b?b[0].appendChild(this.placeholder[0]):a.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?a.item[0]:a.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var c=this,e=this.counter;window.setTimeout(function(){e==c.counter&&c.refreshPositions(!d)},0)},_clear:function(e,d){this.reverting=!1;var c=[],f=this;!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var b in this._storedCSS)if(this._storedCSS[b]=="auto"||this._storedCSS[b]=="static")this._storedCSS[b]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!d&&c.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!d&&c.push(function(a){this._trigger("update",a,this._uiHash())});if(!a.ui.contains(this.element[0],this.currentItem[0])){d||c.push(function(a){this._trigger("remove",a,this._uiHash())});for(var b=this.containers.length-1;b>=0;b--)a.ui.contains(this.containers[b].element[0],this.currentItem[0])&&!d&&(c.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.containers[b])),c.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.containers[b])))}for(var b=this.containers.length-1;b>=0;b--)d||c.push(function(a){return function(b){a._trigger("deactivate",b,this._uiHash(this))}}.call(this,this.containers[b])),this.containers[b].containerCache.over&&(c.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[b])),this.containers[b].containerCache.over=0);this._storedCursor&&a("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!d){this._trigger("beforeStop",e,this._uiHash());for(var b=0;b<c.length;b++)c[b].call(this,e);this._trigger("stop",e,this._uiHash())}return!1}d||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!d){for(var b=0;b<c.length;b++)c[b].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(c){var b=c||this;return{helper:b.helper,placeholder:b.placeholder||a([]),position:b.position,originalPosition:b.originalPosition,offset:b.positionAbs,item:b.currentItem,sender:c?c.element:null}}}),a.extend(a.ui.sortable,{version:"1.8.20"})})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.accordion.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a){a.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var b=this,c=b.options;b.running=0,b.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix"),b.headers=b.element.find(c.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){if(c.disabled)return;a(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){if(c.disabled)return;a(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){if(c.disabled)return;a(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){if(c.disabled)return;a(this).removeClass("ui-state-focus")}),b.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");if(c.navigation){var d=b.element.find("a").filter(c.navigationFilter).eq(0);if(d.length){var e=d.closest(".ui-accordion-header");e.length?(b.active=e):(b.active=d.closest(".ui-accordion-content").prev())}}b.active=b._findActive(b.active||c.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),b.active.next().addClass("ui-accordion-content-active"),b._createIcons(),b.resize(),b.element.attr("role","tablist"),b.headers.attr("role","tab").bind("keydown.accordion",function(a){return b._keydown(a)}).next().attr("role","tabpanel"),b.headers.not(b.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide(),b.active.length?b.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):b.headers.eq(0).attr("tabIndex",0),a.browser.safari||b.headers.find("a").attr("tabIndex",-1),c.event&&b.headers.bind(c.event.split(" ").join(".accordion ")+".accordion",function(a){b._clickHandler.call(b,a,this),a.preventDefault()})},_createIcons:function(){var b=this.options;b.icons&&(a("<span></span>").addClass("ui-icon "+b.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(b.icons.header).toggleClass(b.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove(),this.element.removeClass("ui-accordion-icons")},destroy:function(){var b=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex"),this.headers.find("a").removeAttr("tabIndex"),this._destroyIcons();var c=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");return(b.autoHeight||b.fillHeight)&&c.css("height",""),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments),b=="active"&&this.activate(c),b=="icons"&&(this._destroyIcons(),c&&this._createIcons()),b=="disabled"&&this.headers.add(this.headers.next())[c?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(b){if(this.options.disabled||b.altKey||b.ctrlKey)return;var c=a.ui.keyCode,e=this.headers.length,f=this.headers.index(b.target),d=!1;switch(b.keyCode){case c.RIGHT:case c.DOWN:d=this.headers[(f+1)%e];break;case c.LEFT:case c.UP:d=this.headers[(f-1+e)%e];break;case c.SPACE:case c.ENTER:this._clickHandler({target:b.target},b.target),b.preventDefault()}return d?(a(b.target).attr("tabIndex",-1),a(d).attr("tabIndex",0),d.focus(),!1):!0},resize:function(){var c=this.options,b;if(c.fillSpace){if(a.browser.msie){var d=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}b=this.element.parent().height(),a.browser.msie&&this.element.parent().css("overflow",d),this.headers.each(function(){b-=a(this).outerHeight(!0)}),this.headers.next().each(function(){a(this).height(Math.max(0,b-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")}else c.autoHeight&&(b=0,this.headers.next().each(function(){b=Math.max(b,a(this).height("").height())}).height(b));return this},activate:function(a){this.options.active=a;var b=this._findActive(a)[0];return this._clickHandler({target:b},b),this},_findActive:function(b){return b?typeof b=="number"?this.headers.filter(":eq("+b+")"):this.headers.not(this.headers.not(b)):b===!1?a([]):this.headers.filter(":eq(0)")},_clickHandler:function(g,i){var b=this.options;if(b.disabled)return;if(!g.target){if(!b.collapsible)return;this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(b.icons.headerSelected).addClass(b.icons.header),this.active.next().addClass("ui-accordion-content-active");var e=this.active.next(),h={options:b,newHeader:a([]),oldHeader:b.active,newContent:a([]),oldContent:e},f=this.active=a([]);this._toggle(f,e,h);return}var c=a(g.currentTarget||i),d=c[0]===this.active[0];b.active=b.collapsible&&d?!1:this.headers.index(c);if(this.running||!b.collapsible&&d)return;var j=this.active,f=c.next(),e=this.active.next(),h={options:b,newHeader:d&&b.collapsible?a([]):c,oldHeader:this.active,newContent:d&&b.collapsible?a([]):f,oldContent:e},k=this.headers.index(this.active[0])>this.headers.index(c[0]);this.active=d?a([]):c,this._toggle(f,e,h,d,k),j.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(b.icons.headerSelected).addClass(b.icons.header),d||(c.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(b.icons.header).addClass(b.icons.headerSelected),c.next().addClass("ui-accordion-content-active"));return},_toggle:function(f,e,l,j,k){var c=this,b=c.options;c.toShow=f,c.toHide=e,c.data=l;var i=function(){return!c?void 0:c._completed.apply(c,arguments)};c._trigger("changestart",null,c.data),c.running=e.size()===0?f.size():e.size();if(b.animated){var g={};b.collapsible&&j?(g={toShow:a([]),toHide:e,complete:i,down:k,autoHeight:b.autoHeight||b.fillSpace}):(g={toShow:f,toHide:e,complete:i,down:k,autoHeight:b.autoHeight||b.fillSpace}),b.proxied||(b.proxied=b.animated),b.proxiedDuration||(b.proxiedDuration=b.duration),b.animated=a.isFunction(b.proxied)?b.proxied(g):b.proxied,b.duration=a.isFunction(b.proxiedDuration)?b.proxiedDuration(g):b.proxiedDuration;var h=a.ui.accordion.animations,m=b.duration,d=b.animated;d&&!h[d]&&!a.easing[d]&&(d="slide"),h[d]||(h[d]=function(a){this.slide(a,{easing:d,duration:m||700})}),h[d](g)}else b.collapsible&&j?f.toggle():(e.hide(),f.show()),i(!0);e.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur(),f.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(a){this.running=a?0:--this.running;if(this.running)return;this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data)}}),a.extend(a.ui.accordion,{version:"1.8.20",animations:{slide:function(b,h){b=a.extend({easing:"swing",duration:300},b,h);if(!b.toHide.size()){b.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},b);return}if(!b.toShow.size()){b.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},b);return}var i=b.toShow.css("overflow"),e=0,d={},f={},j=["height","paddingTop","paddingBottom"],g,c=b.toShow;g=c[0].style.width,c.width(c.parent().width()-parseFloat(c.css("paddingLeft"))-parseFloat(c.css("paddingRight"))-(parseFloat(c.css("borderLeftWidth"))||0)-(parseFloat(c.css("borderRightWidth"))||0)),a.each(j,function(g,c){f[c]="hide";var e=(""+a.css(b.toShow[0],c)).match(/^([\d+-.]+)(.*)$/);d[c]={value:e[1],unit:e[2]||"px"}}),b.toShow.css({height:0,overflow:"hidden"}).show(),b.toHide.filter(":hidden").each(b.complete).end().filter(":visible").animate(f,{step:function(c,a){a.prop=="height"&&(e=a.end-a.start===0?0:(a.now-a.start)/(a.end-a.start)),b.toShow[0].style[a.prop]=e*d[a.prop].value+d[a.prop].unit},duration:b.duration,easing:b.easing,complete:function(){b.autoHeight||b.toShow.css("height",""),b.toShow.css({width:g,overflow:i}),b.complete()}})},bounceslide:function(a){this.slide(a,{easing:a.down?"easeOutBounce":"swing",duration:a.down?1e3:200})}}})})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.autocomplete.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a){var b=0;a.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var b=this,d=this.element[0].ownerDocument,c;this.isMultiLine=this.element.is("textarea"),this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(d){if(b.options.disabled||b.element.propAttr("readOnly"))return;c=!1;var e=a.ui.keyCode;switch(d.keyCode){case e.PAGE_UP:b._move("previousPage",d);break;case e.PAGE_DOWN:b._move("nextPage",d);break;case e.UP:b._keyEvent("previous",d);break;case e.DOWN:b._keyEvent("next",d);break;case e.ENTER:case e.NUMPAD_ENTER:b.menu.active&&(c=!0,d.preventDefault());case e.TAB:if(!b.menu.active)return;b.menu.select(d);break;case e.ESCAPE:b.element.val(b.term),b.close(d);break;default:clearTimeout(b.searching),b.searching=setTimeout(function(){b.term!=b.element.val()&&(b.selectedItem=null,b.search(null,d))},b.options.delay)}}).bind("keypress.autocomplete",function(a){c&&(c=!1,a.preventDefault())}).bind("focus.autocomplete",function(){if(b.options.disabled)return;b.selectedItem=null,b.previous=b.element.val()}).bind("blur.autocomplete",function(a){if(b.options.disabled)return;clearTimeout(b.searching),b.closing=setTimeout(function(){b.close(a),b._change(a)},150)}),this._initSource(),this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo(a(this.options.appendTo||"body",d)[0]).mousedown(function(d){var c=b.menu.element[0];a(d.target).closest(".ui-menu-item").length||setTimeout(function(){a(document).one("mousedown",function(d){d.target!==b.element[0]&&d.target!==c&&!a.ui.contains(c,d.target)&&b.close()})},1),setTimeout(function(){clearTimeout(b.closing)},13)}).menu({focus:function(a,d){var c=d.item.data("item.autocomplete");!1!==b._trigger("focus",a,{item:c})&&/^key/.test(a.originalEvent.type)&&b.element.val(c.value)},selected:function(c,f){var a=f.item.data("item.autocomplete"),e=b.previous;b.element[0]!==d.activeElement&&(b.element.focus(),b.previous=e,setTimeout(function(){b.previous=e,b.selectedItem=a},1)),!1!==b._trigger("select",c,{item:a})&&b.element.val(a.value),b.term=b.element.val(),b.close(c),b.selectedItem=a},blur:function(){b.menu.element.is(":visible")&&b.element.val()!==b.term&&b.element.val(b.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),a.fn.bgiframe&&this.menu.element.bgiframe(),b.beforeunloadHandler=function(){b.element.removeAttr("autocomplete")},a(window).bind("beforeunload",b.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),a(window).unbind("beforeunload",this.beforeunloadHandler),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments),b==="source"&&this._initSource(),b==="appendTo"&&this.menu.element.appendTo(a(c||"body",this.element[0].ownerDocument)[0]),b==="disabled"&&c&&this.xhr&&this.xhr.abort()},_initSource:function(){var b=this,c,d;a.isArray(this.options.source)?(c=this.options.source,this.source=function(b,d){d(a.ui.autocomplete.filter(c,b.term))}):typeof this.options.source=="string"?(d=this.options.source,this.source=function(e,c){b.xhr&&b.xhr.abort(),b.xhr=a.ajax({url:d,data:e,dataType:"json",success:function(a){c(a)},error:function(){c([])}})}):(this.source=this.options.source)},search:function(a,b){a=a!=null?a:this.element.val(),this.term=this.element.val();if(a.length<this.options.minLength)return this.close(b);clearTimeout(this.closing);return this._trigger("search",b)===!1?void 0:this._search(a)},_search:function(a){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:a},this._response())},_response:function(){var a=this,c=++b;return function(d){c===b&&a.__response(d),a.pending--,a.pending||a.element.removeClass("ui-autocomplete-loading")}},__response:function(a){!this.options.disabled&&a&&a.length?(a=this._normalize(a),this._suggest(a),this._trigger("open")):this.close()},close:function(a){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",a))},_change:function(a){this.previous!==this.element.val()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return typeof b=="string"?{label:b,value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(c){var b=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(b,c),this.menu.deactivate(),this.menu.refresh(),b.show(),this._resizeMenu(),b.position(a.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new a.Event("mouseover"))},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,function(c,a){d._renderItem(b,a)})},_renderItem:function(c,b){if(LN.Tools.verificaDescripcionUbicacion(b.label,this.element.val())==true)return a("<li></li>").data("item.autocomplete",b).append(a("<a></a>").html(LN.Tools.getTitleBold(b.label,this.element.val()))).appendTo(c)},_move:function(a,b){if(!this.menu.element.is(":visible")){this.search(null,b);return}if(this.menu.first()&&/^previous/.test(a)||this.menu.last()&&/^next/.test(a)){this.element.val(this.term),this.menu.deactivate();return}this.menu[a](b)},widget:function(){return this.menu.element},_keyEvent:function(b,a){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(b,a),a.preventDefault()}}),a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(b,c){var d=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}})})(jQuery),function(a){a.widget("ui.menu",{_create:function(){var b=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(c){if(!a(c.target).closest(".ui-menu-item a").length)return;c.preventDefault(),b.select(c)}),this.refresh()},refresh:function(){var b=this,c=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");c.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(c){b.activate(c,a(this).parent())}).mouseleave(function(){b.deactivate()})},activate:function(e,a){this.deactivate();if(this.hasScroll()){var b=a.offset().top-this.element.offset().top,c=this.element.scrollTop(),d=this.element.height();b<0?this.element.scrollTop(c+b):b>=d&&this.element.scrollTop(c+b-d+a.height())}this.active=a.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",e,{item:a})},deactivate:function(){if(!this.active)return;this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null},next:function(a){this.move("next",".ui-menu-item:first",a)},previous:function(a){this.move("prev",".ui-menu-item:last",a)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(d,b,a){if(!this.active){this.activate(a,this.element.children(b));return}var c=this.active[d+"All"](".ui-menu-item").eq(0);c.length?this.activate(a,c):this.activate(a,this.element.children(b))},nextPage:function(b){if(this.hasScroll()){if(!this.active||this.last()){this.activate(b,this.element.children(".ui-menu-item:first"));return}var d=this.active.offset().top,e=this.element.height(),c=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-d-e+a(this).height();return b<10&&b>-10});c.length||(c=this.element.children(".ui-menu-item:last")),this.activate(b,c)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(b){if(this.hasScroll()){if(!this.active||this.first()){this.activate(b,this.element.children(".ui-menu-item:last"));return}var d=this.active.offset().top,e=this.element.height(),c=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-d+e-a(this).height();return b<10&&b>-10});c.length||(c=this.element.children(".ui-menu-item:first")),this.activate(b,c)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[a.fn.prop?"prop":"attr"]("scrollHeight")},select:function(a){this._trigger("selected",a,{item:this.active})}})}(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.button.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a){var c,d,e,b,f="ui-button ui-widget ui-state-default ui-corner-all",i="ui-state-hover ui-state-active ",g="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",j=function(){var b=a(this).find(":ui-button");setTimeout(function(){b.button("refresh")},1)},h=function(b){var c=b.name,e=b.form,d=a([]);return c&&(e?(d=a(e).find("[name='"+c+"']")):(d=a("[name='"+c+"']",b.ownerDocument).filter(function(){return!this.form}))),d};a.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",j),typeof this.options.disabled!="boolean"?(this.options.disabled=!!this.element.propAttr("disabled")):this.element.propAttr("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var i=this,g=this.options,k=this.type==="checkbox"||this.type==="radio",m="ui-state-hover"+(k?"":" ui-state-active"),l="ui-state-focus";g.label===null&&(g.label=this.buttonElement.html()),this.buttonElement.addClass(f).attr("role","button").bind("mouseenter.button",function(){if(g.disabled)return;a(this).addClass("ui-state-hover"),this===c&&a(this).addClass("ui-state-active")}).bind("mouseleave.button",function(){if(g.disabled)return;a(this).removeClass(m)}).bind("click.button",function(a){g.disabled&&(a.preventDefault(),a.stopImmediatePropagation())}),this.element.bind("focus.button",function(){i.buttonElement.addClass(l)}).bind("blur.button",function(){i.buttonElement.removeClass(l)}),k&&(this.element.bind("change.button",function(){if(b)return;i.refresh()}),this.buttonElement.bind("mousedown.button",function(a){if(g.disabled)return;b=!1,d=a.pageX,e=a.pageY}).bind("mouseup.button",function(a){if(g.disabled)return;if(d!==a.pageX||e!==a.pageY)b=!0})),this.type==="checkbox"?this.buttonElement.bind("click.button",function(){if(g.disabled||b)return!1;a(this).toggleClass("ui-state-active"),i.buttonElement.attr("aria-pressed",i.element[0].checked)}):this.type==="radio"?this.buttonElement.bind("click.button",function(){if(g.disabled||b)return!1;a(this).addClass("ui-state-active"),i.buttonElement.attr("aria-pressed","true");var c=i.element[0];h(c).not(c).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){if(g.disabled)return!1;a(this).addClass("ui-state-active"),c=this,a(document).one("mouseup",function(){c=null})}).bind("mouseup.button",function(){if(g.disabled)return!1;a(this).removeClass("ui-state-active")}).bind("keydown.button",function(b){if(g.disabled)return!1;(b.keyCode==a.ui.keyCode.SPACE||b.keyCode==a.ui.keyCode.ENTER)&&a(this).addClass("ui-state-active")}).bind("keyup.button",function(){a(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(b){b.keyCode===a.ui.keyCode.SPACE&&a(this).click()})),this._setOption("disabled",g.disabled),this._resetButton()},_determineButtonType:function(){this.element.is(":checkbox")?(this.type="checkbox"):this.element.is(":radio")?(this.type="radio"):this.element.is("input")?(this.type="input"):(this.type="button");if(this.type==="checkbox"||this.type==="radio"){var a=this.element.parents().filter(":last"),b="label[for='"+this.element.attr("id")+"']";this.buttonElement=a.find(b),this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||(this.buttonElement=a.find(b))),this.element.addClass("ui-helper-hidden-accessible");var c=this.element.is(":checked");c&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.attr("aria-pressed",c)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(f+" "+i+" "+g).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title"),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments);if(b==="disabled"){c?this.element.propAttr("disabled",!0):this.element.propAttr("disabled",!1);return}this._resetButton()},refresh:function(){var b=this.element.is(":disabled");b!==this.options.disabled&&this._setOption("disabled",b),this.type==="radio"?h(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var c=this.buttonElement.removeClass(g),f=a("<span></span>",this.element[0].ownerDocument).addClass("ui-button-text").html(this.options.label).appendTo(c.empty()).text(),b=this.options.icons,e=b.primary&&b.secondary,d=[];b.primary||b.secondary?(this.options.text&&d.push("ui-button-text-icon"+(e?"s":b.primary?"-primary":"-secondary")),b.primary&&c.prepend("<span class='ui-button-icon-primary ui-icon "+b.primary+"'></span>"),b.secondary&&c.append("<span class='ui-button-icon-secondary ui-icon "+b.secondary+"'></span>"),this.options.text||(d.push(e?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||c.attr("title",f))):d.push("ui-button-text-only"),c.addClass(d.join(" "))}}),a.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(b,c){b==="disabled"&&this.buttons.button("option",b,c),a.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var b=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(b?"ui-corner-left":"ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy"),a.Widget.prototype.destroy.call(this)}})})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.dialog.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a,c){var b="ui-dialog ui-widget ui-widget-content ui-corner-all ",d={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},e={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},f=a.attrFn||{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0,click:!0};a.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(b){var c=a(this).css(b).offset().top;c<0&&a(this).css("top",b.top-c)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),typeof this.originalTitle!="string"&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;var c=this,d=c.options,i=d.title||"&#160;",h=a.ui.dialog.getTitleId(c.element),g=(c.uiDialog=a("<div></div>")).appendTo(document.body).hide().addClass(b+d.dialogClass).css({zIndex:d.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(b){d.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===a.ui.keyCode.ESCAPE&&(c.close(b),b.preventDefault())}).attr({role:"dialog","aria-labelledby":h}).mousedown(function(a){c.moveToTop(!1,a)}),j=c.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(g),f=(c.uiDialogTitlebar=a("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(g),e=a('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){e.addClass("ui-state-hover")},function(){e.removeClass("ui-state-hover")}).focus(function(){e.addClass("ui-state-focus")}).blur(function(){e.removeClass("ui-state-focus")}).click(function(a){return c.close(a),!1}).appendTo(f),k=(c.uiDialogTitlebarCloseText=a("<span></span>")).addClass("ui-icon ui-icon-closethick").text(d.closeText).appendTo(e),l=a("<span></span>").addClass("ui-dialog-title").attr("id",h).html(i).prependTo(f);a.isFunction(d.beforeclose)&&!a.isFunction(d.beforeClose)&&(d.beforeClose=d.beforeclose),f.find("*").add(f).disableSelection(),d.draggable&&a.fn.draggable&&c._makeDraggable(),d.resizable&&a.fn.resizable&&c._makeResizable(),c._createButtons(d.buttons),c._isOpen=!1,a.fn.bgiframe&&g.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var a=this;return a.overlay&&a.overlay.destroy(),a.uiDialog.hide(),a.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),a.uiDialog.remove(),a.originalTitle&&a.element.attr("title",a.originalTitle),a},widget:function(){return this.uiDialog},close:function(d){var b=this,c,e;return!1===b._trigger("beforeClose",d)?void 0:(b.overlay&&b.overlay.destroy(),b.uiDialog.unbind("keypress.ui-dialog"),b._isOpen=!1,b.options.hide?b.uiDialog.hide(b.options.hide,function(){b._trigger("close",d)}):(b.uiDialog.hide(),b._trigger("close",d)),a.ui.dialog.overlay.resize(),b.options.modal&&(c=0,a(".ui-dialog").each(function(){this!==b.uiDialog[0]&&(e=a(this).css("z-index"),isNaN(e)||(c=Math.max(c,e)))}),a.ui.dialog.maxZ=c),b)},isOpen:function(){return this._isOpen},moveToTop:function(f,d){var b=this,c=b.options,e;return c.modal&&!f||!c.stack&&!c.modal?b._trigger("focus",d):(c.zIndex>a.ui.dialog.maxZ&&(a.ui.dialog.maxZ=c.zIndex),b.overlay&&(a.ui.dialog.maxZ+=1,b.overlay.$el.css("z-index",a.ui.dialog.overlay.maxZ=a.ui.dialog.maxZ)),e={scrollTop:b.element.scrollTop(),scrollLeft:b.element.scrollLeft()},a.ui.dialog.maxZ+=1,b.uiDialog.css("z-index",a.ui.dialog.maxZ),b.element.attr(e),b._trigger("focus",d),b)},open:function(){if(this._isOpen)return;var b=this,c=b.options,d=b.uiDialog;return b.overlay=c.modal?new a.ui.dialog.overlay(b):null,b._size(),b._position(c.position),d.show(c.show),b.moveToTop(!0),c.modal&&d.bind("keydown.ui-dialog",function(b){if(b.keyCode!==a.ui.keyCode.TAB)return;var c=a(":tabbable",this),d=c.filter(":first"),e=c.filter(":last");return b.target===e[0]&&!b.shiftKey?(d.focus(1),!1):b.target===d[0]&&b.shiftKey?(e.focus(1),!1):void 0}),a(b.element.find(":tabbable").get().concat(d.find(".ui-dialog-buttonpane :tabbable").get().concat(d.get()))).eq(0).focus(),b._isOpen=!0,b._trigger("open"),b},_createButtons:function(b){var c=this,d=!1,e=a("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),g=a("<div></div>").addClass("ui-dialog-buttonset").appendTo(e);c.uiDialog.find(".ui-dialog-buttonpane").remove(),typeof b=="object"&&b!==null&&a.each(b,function(){return!(d=!0)}),d&&(a.each(b,function(e,b){b=a.isFunction(b)?{click:b,text:e}:b;var d=a('<button type="button"></button>').click(function(){b.click.apply(c.element[0],arguments)}).appendTo(g);a.each(b,function(a,b){if(a==="click")return;a in f?d[a](b):d.attr(a,b)}),a.fn.button&&d.button()}),e.appendTo(c.uiDialog))},_makeDraggable:function(){function c(a){return{position:a.position,offset:a.offset}}var b=this,d=b.options,e=a(document),f;b.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(e,g){f=d.height==="auto"?"auto":a(this).height(),a(this).height(a(this).height()).addClass("ui-dialog-dragging"),b._trigger("dragStart",e,c(g))},drag:function(a,d){b._trigger("drag",a,c(d))},stop:function(h,g){d.position=[g.position.left-e.scrollLeft(),g.position.top-e.scrollTop()],a(this).removeClass("ui-dialog-dragging").height(f),b._trigger("dragStop",h,c(g)),a.ui.dialog.overlay.resize()}})},_makeResizable:function(d){function f(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}d=d===c?this.options.resizable:d;var b=this,e=b.options,g=b.uiDialog.css("position"),h=typeof d=="string"?d:"n,e,s,w,se,sw,ne,nw";b.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:b.element,maxWidth:e.maxWidth,maxHeight:e.maxHeight,minWidth:e.minWidth,minHeight:b._minHeight(),handles:h,start:function(c,d){a(this).addClass("ui-dialog-resizing"),b._trigger("resizeStart",c,f(d))},resize:function(a,c){b._trigger("resize",a,f(c))},stop:function(c,d){a(this).removeClass("ui-dialog-resizing"),e.height=a(this).height(),e.width=a(this).width(),b._trigger("resizeStop",c,f(d)),a.ui.dialog.overlay.resize()}}).css("position",g).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;return a.height==="auto"?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(b){var c=[],e=[0,0],d;if(b){if(typeof b=="string"||typeof b=="object"&&"0"in b)c=b.split?b.split(" "):[b[0],b[1]],c.length===1&&(c[1]=c[0]),a.each(["left","top"],function(a,b){+c[a]===c[a]&&(e[a]=c[a],c[a]=b)}),b={my:c.join(" "),at:c.join(" "),offset:e.join(" ")};b=a.extend({},a.ui.dialog.prototype.options.position,b)}else b=a.ui.dialog.prototype.options.position;d=this.uiDialog.is(":visible"),d||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(a.extend({of:window},b)),d||this.uiDialog.hide()},_setOptions:function(f){var g=this,b={},c=!1;a.each(f,function(a,f){g._setOption(a,f),a in d&&(c=!0),a in e&&(b[a]=f)}),c&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",b)},_setOption:function(g,c){var d=this,e=d.uiDialog;switch(g){case"beforeclose":g="beforeClose";break;case"buttons":d._createButtons(c);break;case"closeText":d.uiDialogTitlebarCloseText.text(""+c);break;case"dialogClass":e.removeClass(d.options.dialogClass).addClass(b+c);break;case"disabled":c?e.addClass("ui-dialog-disabled"):e.removeClass("ui-dialog-disabled");break;case"draggable":var h=e.is(":data(draggable)");h&&!c&&e.draggable("destroy"),!h&&c&&d._makeDraggable();break;case"position":d._position(c);break;case"resizable":var f=e.is(":data(resizable)");f&&!c&&e.resizable("destroy"),f&&typeof c=="string"&&e.resizable("option","handles",c),!f&&c!==!1&&d._makeResizable(c);break;case"title":a(".ui-dialog-title",d.uiDialogTitlebar).html(""+(c||"&#160;"))}a.Widget.prototype._setOption.apply(d,arguments)},_size:function(){var b=this.options,c,d,e=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),b.minWidth>b.width&&(b.width=b.minWidth),c=this.uiDialog.css({height:"auto",width:b.width}).height(),d=Math.max(0,b.minHeight-c);if(b.height==="auto")if(a.support.minHeight)this.element.css({minHeight:d,height:"auto"});else{this.uiDialog.show();var f=this.element.css("height","auto").height();e||this.uiDialog.hide(),this.element.height(Math.max(f,d))}else this.element.height(Math.max(b.height-c,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),a.extend(a.ui.dialog,{version:"1.8.20",uuid:0,maxZ:0,getTitleId:function(b){var a=b.attr("id");return a||(this.uuid+=1,a=this.uuid),"ui-dialog-title-"+a},overlay:function(b){this.$el=a.ui.dialog.overlay.create(b)}}),a.extend(a.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:a.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(a){return a+".dialog-overlay"}).join(" "),create:function(c){this.instances.length===0&&(setTimeout(function(){a.ui.dialog.overlay.instances.length&&a(document).bind(a.ui.dialog.overlay.events,function(b){if(a(b.target).zIndex()<a.ui.dialog.overlay.maxZ)return!1})},1),a(document).bind("keydown.dialog-overlay",function(b){c.options.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===a.ui.keyCode.ESCAPE&&(c.close(b),b.preventDefault())}),a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize));var b=(this.oldInstances.pop()||a("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return a.fn.bgiframe&&b.bgiframe(),this.instances.push(b),b},destroy:function(c){var d=a.inArray(c,this.instances);d!=-1&&this.oldInstances.push(this.instances.splice(d,1)[0]),this.instances.length===0&&a([document,window]).unbind(".dialog-overlay"),c.remove();var b=0;a.each(this.instances,function(){b=Math.max(b,this.css("z-index"))}),this.maxZ=b},height:function(){var b,c;return a.browser.msie&&a.browser.version<7?(b=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),c=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),b<c?a(window).height()+"px":b+"px"):a(document).height()+"px"},width:function(){var b,c;return a.browser.msie?(b=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),c=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),b<c?a(window).width()+"px":b+"px"):a(document).width()+"px"},resize:function(){var b=a([]);a.each(a.ui.dialog.overlay.instances,function(){b=b.add(this)}),b.css({width:0,height:0}).css({width:a.ui.dialog.overlay.width(),height:a.ui.dialog.overlay.height()})}}),a.extend(a.ui.dialog.overlay.prototype,{destroy:function(){a.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.slider.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a){var b=5;a.widget("ui.slider",a.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var c=this,d=this.options,e=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),h="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",i=d.values&&d.values.length||1,f=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(d.disabled?" ui-slider-disabled ui-disabled":"")),this.range=a([]),d.range&&(d.range===!0&&(d.values||(d.values=[this._valueMin(),this._valueMin()]),d.values.length&&d.values.length!==2&&(d.values=[d.values[0],d.values[0]])),this.range=a("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(d.range==="min"||d.range==="max"?" ui-slider-range-"+d.range:"")));for(var g=e.length;g<i;g+=1)f.push(h);this.handles=e.add(a(f.join("")).appendTo(c.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(a){a.preventDefault()}).hover(function(){d.disabled||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}).focus(function(){d.disabled?a(this).blur():(a(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),a(this).addClass("ui-state-focus"))}).blur(function(){a(this).removeClass("ui-state-focus")}),this.handles.each(function(b){a(this).data("index.ui-slider-handle",b)}),this.handles.keydown(function(f){var g=a(this).data("index.ui-slider-handle"),i,e,d,h;if(c.options.disabled)return;switch(f.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:f.preventDefault();if(!c._keySliding){c._keySliding=!0,a(this).addClass("ui-state-active"),i=c._start(f,g);if(i===!1)return}}h=c.options.step,c.options.values&&c.options.values.length?(e=d=c.values(g)):(e=d=c.value());switch(f.keyCode){case a.ui.keyCode.HOME:d=c._valueMin();break;case a.ui.keyCode.END:d=c._valueMax();break;case a.ui.keyCode.PAGE_UP:d=c._trimAlignValue(e+(c._valueMax()-c._valueMin())/b);break;case a.ui.keyCode.PAGE_DOWN:d=c._trimAlignValue(e-(c._valueMax()-c._valueMin())/b);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(e===c._valueMax())return;d=c._trimAlignValue(e+h);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(e===c._valueMin())return;d=c._trimAlignValue(e-h)}c._slide(f,g,d)}).keyup(function(b){var d=a(this).data("index.ui-slider-handle");c._keySliding&&(c._keySliding=!1,c._stop(b,d),c._change(b,d),a(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(c){var e=this.options,j,f,g,b,h,d,k,i,l;return e.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),j={x:c.pageX,y:c.pageY},f=this._normValueFromMouse(j),g=this._valueMax()-this._valueMin()+1,h=this,this.handles.each(function(c){var e=Math.abs(f-h.values(c));g>e&&(g=e,b=a(this),d=c)}),e.range===!0&&this.values(1)===e.min&&(d+=1,b=a(this.handles[d])),k=this._start(c,d),k===!1?!1:(this._mouseSliding=!0,h._handleIndex=d,b.addClass("ui-state-active").focus(),i=b.offset(),l=!a(c.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:c.pageX-i.left-b.width()/2,top:c.pageY-i.top-b.height()/2-(parseInt(b.css("borderTopWidth"),10)||0)-(parseInt(b.css("borderBottomWidth"),10)||0)+(parseInt(b.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(c,d,f),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(a){var b={x:a.pageX,y:a.pageY},c=this._normValueFromMouse(b);return this._slide(a,this._handleIndex,c),!1},_mouseStop:function(a){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(d){var b,c,a,e,f;return this.orientation==="horizontal"?(b=this.elementSize.width,c=d.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,c=d.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),a=c/b,a>1&&(a=1),a<0&&(a=0),this.orientation==="vertical"&&(a=1-a),e=this._valueMax()-this._valueMin(),f=this._valueMin()+a*e,this._trimAlignValue(f)},_start:function(c,b){var a={handle:this.handles[b],value:this.value()};return this.options.values&&this.options.values.length&&(a.value=this.values(b),a.values=this.values()),this._trigger("start",c,a)},_slide:function(f,b,a){var c,e,d;this.options.values&&this.options.values.length?(c=this.values(b?0:1),this.options.values.length===2&&this.options.range===!0&&(b===0&&a>c||b===1&&a<c)&&(a=c),a!==this.values(b)&&(e=this.values(),e[b]=a,d=this._trigger("slide",f,{handle:this.handles[b],value:a,values:e}),c=this.values(b?0:1),d!==!1&&this.values(b,a,!0))):a!==this.value()&&(d=this._trigger("slide",f,{handle:this.handles[b],value:a}),d!==!1&&this.value(a))},_stop:function(c,b){var a={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(a.value=this.values(b),a.values=this.values()),this._trigger("stop",c,a)},_change:function(c,b){if(!this._keySliding&&!this._mouseSliding){var a={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(a.value=this.values(b),a.values=this.values()),this._trigger("change",c,a)}},value:function(a){if(arguments.length){this.options.value=this._trimAlignValue(a),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(c,f){var d,e,b;if(arguments.length>1){this.options.values[c]=this._trimAlignValue(f),this._refreshValue(),this._change(null,c);return}if(!arguments.length)return this._values();if(!a.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(c):this.value();d=this.options.values,e=arguments[0];for(b=0;b<d.length;b+=1)d[b]=this._trimAlignValue(e[b]),this._change(null,b);this._refreshValue()},_setOption:function(d,e){var b,c=0;a.isArray(this.options.values)&&(c=this.options.values.length),a.Widget.prototype._setOption.apply(this,arguments);switch(d){case"disabled":e?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(b=0;b<c;b+=1)this._change(null,b);this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a),a},_values:function(d){var c,a,b;if(arguments.length)return c=this.options.values[d],c=this._trimAlignValue(c),c;a=this.options.values.slice();for(b=0;b<a.length;b+=1)a[b]=this._trimAlignValue(a[b]);return a},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=this.options.step>0?this.options.step:1,c=(a-this._valueMin())%b,d=a-c;return Math.abs(c)*2>=b&&(d+=c>0?b:-b),parseFloat(d.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var f=this.options.range,d=this.options,c=this,e=this._animateOff?!1:d.animate,b,g={},i,k,h,j;this.options.values&&this.options.values.length?this.handles.each(function(f){b=(c.values(f)-c._valueMin())/(c._valueMax()-c._valueMin())*100,g[c.orientation==="horizontal"?"left":"bottom"]=b+"%",a(this).stop(1,1)[e?"animate":"css"](g,d.animate),c.options.range===!0&&(c.orientation==="horizontal"?(f===0&&c.range.stop(1,1)[e?"animate":"css"]({left:b+"%"},d.animate),f===1&&c.range[e?"animate":"css"]({width:b-i+"%"},{queue:!1,duration:d.animate})):(f===0&&c.range.stop(1,1)[e?"animate":"css"]({bottom:b+"%"},d.animate),f===1&&c.range[e?"animate":"css"]({height:b-i+"%"},{queue:!1,duration:d.animate}))),i=b}):(k=this.value(),h=this._valueMin(),j=this._valueMax(),b=j!==h?(k-h)/(j-h)*100:0,g[c.orientation==="horizontal"?"left":"bottom"]=b+"%",this.handle.stop(1,1)[e?"animate":"css"](g,d.animate),f==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[e?"animate":"css"]({width:b+"%"},d.animate),f==="max"&&this.orientation==="horizontal"&&this.range[e?"animate":"css"]({width:100-b+"%"},{queue:!1,duration:d.animate}),f==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[e?"animate":"css"]({height:b+"%"},d.animate),f==="max"&&this.orientation==="vertical"&&this.range[e?"animate":"css"]({height:100-b+"%"},{queue:!1,duration:d.animate}))}}),a.extend(a.ui.slider,{version:"1.8.20"})})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.tabs.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a,b){function e(){return++c}function f(){return++d}var c=0,d=0;a.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(b,a){if(b=="selected"){if(this.options.collapsible&&a==this.options.selected)return;this.select(a)}else this.options[b]=a,this._tabify()},_tabId:function(a){return a.title&&a.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+e()},_sanitizeSelector:function(a){return a.replace(/:/g,"\\:")},_cookie:function(){var b=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+f());return a.cookie.apply(null,[b].concat(a.makeArray(arguments)))},_ui:function(a,b){return{tab:a,panel:b,index:this.anchors.index(a)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var b=a(this);b.html(b.data("label.tabs")).removeData("label.tabs")})},_tabify:function(n){function k(b,c){b.css("display",""),!a.support.opacity&&c.opacity&&b[0].style.removeAttribute("filter")}var d=this,c=this.options,o=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=a(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return a("a",this)[0]}),this.panels=a([]),this.anchors.each(function(i,e){var b=a(e).attr("href"),g=b.split("#")[0],j;g&&(g===location.toString().split("#")[0]||(j=a("base")[0])&&g===j.href)&&(b=e.hash,e.href=b);if(o.test(b))d.panels=d.panels.add(d.element.find(d._sanitizeSelector(b)));else if(b&&b!=="#"){a.data(e,"href.tabs",b),a.data(e,"load.tabs",b.replace(/#.*$/,""));var h=d._tabId(e);e.href="#"+h;var f=d.element.find("#"+h);f.length||(f=a(c.panelTemplate).attr("id",h).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(d.panels[i-1]||d.list),f.data("destroy.tabs",!0)),d.panels=d.panels.add(f)}else c.disabled.push(i)}),n?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),c.selected===b?(location.hash&&this.anchors.each(function(a,b){if(b.hash==location.hash)return c.selected=a,!1}),typeof c.selected!="number"&&c.cookie&&(c.selected=parseInt(d._cookie(),10)),typeof c.selected!="number"&&this.lis.filter(".ui-tabs-selected").length&&(c.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),c.selected=c.selected||(this.lis.length?0:-1)):c.selected===null&&(c.selected=-1),c.selected=c.selected>=0&&this.anchors[c.selected]||c.selected<0?c.selected:0,c.disabled=a.unique(c.disabled.concat(a.map(this.lis.filter(".ui-state-disabled"),function(a){return d.lis.index(a)}))).sort(),a.inArray(c.selected,c.disabled)!=-1&&c.disabled.splice(a.inArray(c.selected,c.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),c.selected>=0&&this.anchors.length&&(d.element.find(d._sanitizeSelector(d.anchors[c.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(c.selected).addClass("ui-tabs-selected ui-state-active"),d.element.queue("tabs",function(){d._trigger("show",null,d._ui(d.anchors[c.selected],d.element.find(d._sanitizeSelector(d.anchors[c.selected].hash))[0]))}),this.load(c.selected)),a(window).bind("unload",function(){d.lis.add(d.anchors).unbind(".tabs"),d.lis=d.anchors=d.panels=null})):(c.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),this.element[c.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),c.cookie&&this._cookie(c.selected,c.cookie);for(var g=0,h;h=this.lis[g];g++)a(h)[a.inArray(g,c.disabled)!=-1&&!a(h).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled");c.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs");if(c.event!=="mouseover"){var i=function(b,a){a.is(":not(.ui-state-disabled)")&&a.addClass("ui-state-"+b)},j=function(a,b){b.removeClass("ui-state-"+a)};this.lis.bind("mouseover.tabs",function(){i("hover",a(this))}),this.lis.bind("mouseout.tabs",function(){j("hover",a(this))}),this.anchors.bind("focus.tabs",function(){i("focus",a(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){j("focus",a(this).closest("li"))})}var e,f;c.fx&&(a.isArray(c.fx)?(e=c.fx[0],f=c.fx[1]):(e=f=c.fx));var l=f?function(c,b){a(c).closest("li").addClass("ui-tabs-selected ui-state-active"),b.hide().removeClass("ui-tabs-hide").animate(f,f.duration||"normal",function(){k(b,f),d._trigger("show",null,d._ui(c,b[0]))})}:function(b,c){a(b).closest("li").addClass("ui-tabs-selected ui-state-active"),c.removeClass("ui-tabs-hide"),d._trigger("show",null,d._ui(b,c[0]))},m=e?function(b,a){a.animate(e,e.duration||"normal",function(){d.lis.removeClass("ui-tabs-selected ui-state-active"),a.addClass("ui-tabs-hide"),k(a,e),d.element.dequeue("tabs")})}:function(b,a){d.lis.removeClass("ui-tabs-selected ui-state-active"),a.addClass("ui-tabs-hide"),d.element.dequeue("tabs")};this.anchors.bind(c.event+".tabs",function(){var b=this,e=a(b).closest("li"),f=d.panels.filter(":not(.ui-tabs-hide)"),g=d.element.find(d._sanitizeSelector(b.hash));if(e.hasClass("ui-tabs-selected")&&!c.collapsible||e.hasClass("ui-state-disabled")||e.hasClass("ui-state-processing")||d.panels.filter(":animated").length||d._trigger("select",null,d._ui(this,g[0]))===!1)return this.blur(),!1;c.selected=d.anchors.index(this),d.abort();if(c.collapsible){if(e.hasClass("ui-tabs-selected"))return c.selected=-1,c.cookie&&d._cookie(c.selected,c.cookie),d.element.queue("tabs",function(){m(b,f)}).dequeue("tabs"),this.blur(),!1;if(!f.length)return c.cookie&&d._cookie(c.selected,c.cookie),d.element.queue("tabs",function(){l(b,g)}),d.load(d.anchors.index(this)),this.blur(),!1}c.cookie&&d._cookie(c.selected,c.cookie);if(g.length)f.length&&d.element.queue("tabs",function(){m(b,f)}),d.element.queue("tabs",function(){l(b,g)}),d.load(d.anchors.index(this));else throw"jQuery UI Tabs: Mismatching fragment identifier.";a.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return!1})},_getIndex:function(a){return typeof a=="string"&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']"))),a},destroy:function(){var b=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var b=a.data(this,"href.tabs");b&&(this.href=b);var c=a(this).unbind(".tabs");a.each(["href","load","cache"],function(b,a){c.removeData(a+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){a.data(this,"destroy.tabs")?a(this).remove():a(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}),b.cookie&&this._cookie(null,b.cookie),this},add:function(h,j,c){c===b&&(c=this.anchors.length);var e=this,f=this.options,g=a(f.tabTemplate.replace(/#\{href\}/g,h).replace(/#\{label\}/g,j)),i=h.indexOf("#")?this._tabId(a("a",g)[0]):h.replace("#","");g.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var d=e.element.find("#"+i);return d.length||(d=a(f.panelTemplate).attr("id",i).data("destroy.tabs",!0)),d.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),c>=this.lis.length?(g.appendTo(this.list),d.appendTo(this.list[0].parentNode)):(g.insertBefore(this.lis[c]),d.insertBefore(this.panels[c])),f.disabled=a.map(f.disabled,function(a){return a>=c?++a:a}),this._tabify(),this.anchors.length==1&&(f.selected=0,g.addClass("ui-tabs-selected ui-state-active"),d.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){e._trigger("show",null,e._ui(e.anchors[0],e.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[c],this.panels[c])),this},remove:function(b){b=this._getIndex(b);var c=this.options,d=this.lis.eq(b).remove(),e=this.panels.eq(b).remove();return d.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(b+(b+1<this.anchors.length?1:-1)),c.disabled=a.map(a.grep(c.disabled,function(a){return a!=b}),function(a){return a>=b?--a:a}),this._tabify(),this._trigger("remove",null,this._ui(d.find("a")[0],e[0])),this},enable:function(b){b=this._getIndex(b);var c=this.options;return a.inArray(b,c.disabled)==-1?void 0:(this.lis.eq(b).removeClass("ui-state-disabled"),c.disabled=a.grep(c.disabled,function(a){return a!=b}),this._trigger("enable",null,this._ui(this.anchors[b],this.panels[b])),this)},disable:function(a){a=this._getIndex(a);var c=this,b=this.options;return a!=b.selected&&(this.lis.eq(a).addClass("ui-state-disabled"),b.disabled.push(a),b.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[a],this.panels[a]))),this},select:function(a){a=this._getIndex(a);if(a==-1)if(this.options.collapsible&&this.options.selected!=-1)a=this.options.selected;else return this;return this.anchors.eq(a).trigger(this.options.event+".tabs"),this},load:function(c){c=this._getIndex(c);var b=this,d=this.options,e=this.anchors.eq(c)[0],f=a.data(e,"load.tabs");this.abort();if(!f||this.element.queue("tabs").length!==0&&a.data(e,"cache.tabs")){this.element.dequeue("tabs");return}this.lis.eq(c).addClass("ui-state-processing");if(d.spinner){var g=a("span",e);g.data("label.tabs",g.html()).html(d.spinner)}return this.xhr=a.ajax(a.extend({},d.ajaxOptions,{url:f,success:function(f,g){b.element.find(b._sanitizeSelector(e.hash)).html(f),b._cleanup(),d.cache&&a.data(e,"cache.tabs",!0),b._trigger("load",null,b._ui(b.anchors[c],b.panels[c]));try{d.ajaxOptions.success(f,g)}catch(h){}},error:function(a,f){b._cleanup(),b._trigger("load",null,b._ui(b.anchors[c],b.panels[c]));try{d.ajaxOptions.error(a,f,c,e)}catch(g){}}})),b.element.dequeue("tabs"),this},abort:function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},url:function(a,b){return this.anchors.eq(a).removeData("cache.tabs").data("load.tabs",b),this},length:function(){return this.anchors.length}}),a.extend(a.ui.tabs,{version:"1.8.20"}),a.extend(a.ui.tabs.prototype,{rotation:null,rotate:function(d,f){var a=this,c=this.options,b=a._rotate||(a._rotate=function(b){clearTimeout(a.rotation),a.rotation=setTimeout(function(){var b=c.selected;a.select(++b<a.anchors.length?b:0)},d),b&&b.stopPropagation()}),e=a._unrotate||(a._unrotate=f?function(){b()}:function(b){b.clientX&&a.rotate(null)});return d?(this.element.bind("tabsshow",b),this.anchors.bind(c.event+".tabs",e),b()):(clearTimeout(a.rotation),this.element.unbind("tabsshow",b),this.anchors.unbind(c.event+".tabs",e),delete this._rotate,delete this._unrotate),this}})})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.datepicker.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a,d){function g(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},a.extend(this._defaults,this.regional[""]),this.dpDiv=h(a('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function h(b){var c="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return b.bind("mouseout",function(d){var b=a(d.target).closest(c);if(!b.length)return;b.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(e){var d=a(e.target).closest(c);if(a.datepicker._isDisabledDatepicker(f.inline?b.parent()[0]:f.input[0])||!d.length)return;d.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),d.addClass("ui-state-hover"),d.hasClass("ui-datepicker-prev")&&d.addClass("ui-datepicker-prev-hover"),d.hasClass("ui-datepicker-next")&&d.addClass("ui-datepicker-next-hover")})}function e(e,b){a.extend(e,b);for(var c in b)if(b[c]==null||b[c]==d)e[c]=b[c];return e}a.extend(a.ui,{datepicker:{version:"1.8.20"}});var b="datepicker",c=(new Date).getTime(),f;a.extend(g.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return e(this._defaults,a||{}),this},_attachDatepicker:function(b,i){var c=null;for(var e in this._defaults){var d=b.getAttribute("date:"+e);if(d){c=c||{};try{c[e]=eval(d)}catch(j){c[e]=d}}}var f=b.nodeName.toLowerCase(),h=f=="div"||f=="span";b.id||(this.uuid+=1,b.id="dp"+this.uuid);var g=this._newInst(a(b),h);g.settings=a.extend({},i||{},c||{}),f=="input"?this._connectDatepicker(b,g):h&&this._inlineDatepicker(b,g)},_newInst:function(b,c){var d=b[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:d,input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:c,dpDiv:c?h(a('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(d,c){var e=a(d);c.append=a([]),c.trigger=a([]);if(e.hasClass(this.markerClassName))return;this._attachments(e,c),e.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(d,a,b){c.settings[a]=b}).bind("getData.datepicker",function(b,a){return this._get(c,a)}),this._autoSize(c),a.data(d,b,c),c.settings.disabled&&this._disableDatepicker(d)},_attachments:function(c,b){var g=this._get(b,"appendText"),h=this._get(b,"isRTL");b.append&&b.append.remove(),g&&(b.append=a('<span class="'+this._appendClass+'">'+g+"</span>"),c[h?"before":"after"](b.append)),c.unbind("focus",this._showDatepicker),b.trigger&&b.trigger.remove();var e=this._get(b,"showOn");(e=="focus"||e=="both")&&c.focus(this._showDatepicker);if(e=="button"||e=="both"){var d=this._get(b,"buttonText"),f=this._get(b,"buttonImage");b.trigger=a(this._get(b,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:f,alt:d,title:d}):a('<button type="button"></button>').addClass(this._triggerClass).html(f==""?d:a("<img/>").attr({src:f,alt:d,title:d}))),c[h?"before":"after"](b.trigger),b.trigger.click(function(){return a.datepicker._datepickerShowing&&a.datepicker._lastInput==c[0]?a.datepicker._hideDatepicker():a.datepicker._datepickerShowing&&a.datepicker._lastInput!=c[0]?(a.datepicker._hideDatepicker(),a.datepicker._showDatepicker(c[0])):a.datepicker._showDatepicker(c[0]),!1})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var d=function(b){for(var c=0,d=0,a=0;a<b.length;a++)b[a].length>c&&(c=b[a].length,d=a);return d};b.setMonth(d(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort"))),b.setDate(d(this._get(a,c.match(/DD/)?"dayNames":"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(d,c){var e=a(d);if(e.hasClass(this.markerClassName))return;e.addClass(this.markerClassName).append(c.dpDiv).bind("setData.datepicker",function(d,a,b){c.settings[a]=b}).bind("getData.datepicker",function(b,a){return this._get(c,a)}),a.data(d,b,c),this._setDate(c,this._getDefaultDate(c),!0),this._updateDatepicker(c),this._updateAlternate(c),c.settings.disabled&&this._disableDatepicker(d),c.dpDiv.css("display","block")},_dialogDatepicker:function(n,d,g,h,f){var c=this._dialogInst;if(!c){this.uuid+=1;var i="dp"+this.uuid;this._dialogInput=a('<input type="text" id="'+i+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>'),this._dialogInput.keydown(this._doKeyDown),a("body").append(this._dialogInput),c=this._dialogInst=this._newInst(this._dialogInput,!1),c.settings={},a.data(this._dialogInput[0],b,c)}e(c.settings,h||{}),d=d&&d.constructor==Date?this._formatDate(c,d):d,this._dialogInput.val(d),this._pos=f?f.length?f:[f.pageX,f.pageY]:null;if(!this._pos){var j=document.documentElement.clientWidth,k=document.documentElement.clientHeight,l=document.documentElement.scrollLeft||document.body.scrollLeft,m=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[j/2-100+l,k/2-150+m]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),c.settings.onSelect=g,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),a.blockUI&&a.blockUI(this.dpDiv),a.data(this._dialogInput[0],b,c),this},_destroyDatepicker:function(c){var d=a(c),f=a.data(c,b);if(!d.hasClass(this.markerClassName))return;var e=c.nodeName.toLowerCase();a.removeData(c,b),e=="input"?(f.append.remove(),f.trigger.remove(),d.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(e=="div"||e=="span")&&d.removeClass(this.markerClassName).empty()},_enableDatepicker:function(c){var e=a(c),g=a.data(c,b);if(!e.hasClass(this.markerClassName))return;var d=c.nodeName.toLowerCase();if(d=="input")c.disabled=!1,g.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if(d=="div"||d=="span"){var f=e.children("."+this._inlineClass);f.children().removeClass("ui-state-disabled"),f.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}this._disabledInputs=a.map(this._disabledInputs,function(a){return a==c?null:a})},_disableDatepicker:function(c){var e=a(c),g=a.data(c,b);if(!e.hasClass(this.markerClassName))return;var d=c.nodeName.toLowerCase();if(d=="input")c.disabled=!0,g.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if(d=="div"||d=="span"){var f=e.children("."+this._inlineClass);f.children().addClass("ui-state-disabled"),f.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}this._disabledInputs=a.map(this._disabledInputs,function(a){return a==c?null:a}),this._disabledInputs[this._disabledInputs.length]=c},_isDisabledDatepicker:function(b){if(!b)return!1;for(var a=0;a<this._disabledInputs.length;a++)if(this._disabledInputs[a]==b)return!0;return!1},_getInst:function(c){try{return a.data(c,b)}catch(d){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(g,c,j){var b=this._getInst(g);if(arguments.length==2&&typeof c=="string")return c=="defaults"?a.extend({},a.datepicker._defaults):b?c=="all"?a.extend({},b.settings):this._get(b,c):null;var f=c||{};typeof c=="string"&&(f={},f[c]=j);if(b){this._curInst==b&&this._hideDatepicker();var k=this._getDateDatepicker(g,!0),h=this._getMinMaxDate(b,"min"),i=this._getMinMaxDate(b,"max");e(b.settings,f),h!==null&&f.dateFormat!==d&&f.minDate===d&&(b.settings.minDate=this._formatDate(b,h)),i!==null&&f.dateFormat!==d&&f.maxDate===d&&(b.settings.maxDate=this._formatDate(b,i)),this._attachments(a(g),b),this._autoSize(b),this._setDate(b,k),this._updateAlternate(b),this._updateDatepicker(b)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(b){var a=this._getInst(b);a&&this._updateDatepicker(a)},_setDateDatepicker:function(b,c){var a=this._getInst(b);a&&(this._setDate(a,c),this._updateDatepicker(a),this._updateAlternate(a))},_getDateDatepicker:function(b,c){var a=this._getInst(b);return a&&!a.inline&&this._setDateFromField(a,c),a?this._getDate(a):null},_doKeyDown:function(b){var c=a.datepicker._getInst(b.target),d=!0,e=c.dpDiv.is(".ui-datepicker-rtl");c._keyEvent=!0;if(a.datepicker._datepickerShowing)switch(b.keyCode){case 9:a.datepicker._hideDatepicker(),d=!1;break;case 13:var f=a("td."+a.datepicker._dayOverClass+":not(."+a.datepicker._currentClass+")",c.dpDiv);f[0]&&a.datepicker._selectDay(b.target,c.selectedMonth,c.selectedYear,f[0]);var g=a.datepicker._get(c,"onSelect");if(g){var h=a.datepicker._formatDate(c);g.apply(c.input?c.input[0]:null,[h,c])}else a.datepicker._hideDatepicker();return!1;case 27:a.datepicker._hideDatepicker();break;case 33:a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(c,"stepBigMonths"):-a.datepicker._get(c,"stepMonths"),"M");break;case 34:a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(c,"stepBigMonths"):+a.datepicker._get(c,"stepMonths"),"M");break;case 35:(b.ctrlKey||b.metaKey)&&a.datepicker._clearDate(b.target),d=b.ctrlKey||b.metaKey;break;case 36:(b.ctrlKey||b.metaKey)&&a.datepicker._gotoToday(b.target),d=b.ctrlKey||b.metaKey;break;case 37:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,e?1:-1,"D"),d=b.ctrlKey||b.metaKey,b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(c,"stepBigMonths"):-a.datepicker._get(c,"stepMonths"),"M");break;case 38:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,-7,"D"),d=b.ctrlKey||b.metaKey;break;case 39:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,e?-1:1,"D"),d=b.ctrlKey||b.metaKey,b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(c,"stepBigMonths"):+a.datepicker._get(c,"stepMonths"),"M");break;case 40:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,7,"D"),d=b.ctrlKey||b.metaKey;break;default:d=!1}else b.keyCode==36&&b.ctrlKey?a.datepicker._showDatepicker(this):(d=!1);d&&(b.preventDefault(),b.stopPropagation())},_doKeyPress:function(b){var c=a.datepicker._getInst(b.target);if(a.datepicker._get(c,"constrainInput")){var e=a.datepicker._possibleChars(a.datepicker._get(c,"dateFormat")),f=String.fromCharCode(b.charCode==d?b.keyCode:b.charCode);return b.ctrlKey||b.metaKey||f<" "||!e||e.indexOf(f)>-1}},_doKeyUp:function(c){var b=a.datepicker._getInst(c.target);if(b.input.val()!=b.lastVal)try{var d=a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,a.datepicker._getFormatConfig(b));d&&(a.datepicker._setDateFromField(b),a.datepicker._updateAlternate(b),a.datepicker._updateDatepicker(b))}catch(e){a.datepicker.log(e)}return!0},_showDatepicker:function(c){c=c.target||c,c.nodeName.toLowerCase()!="input"&&(c=a("input",c.parentNode)[0]);if(a.datepicker._isDisabledDatepicker(c)||a.datepicker._lastInput==c)return;var b=a.datepicker._getInst(c);a.datepicker._curInst&&a.datepicker._curInst!=b&&(a.datepicker._curInst.dpDiv.stop(!0,!0),b&&a.datepicker._datepickerShowing&&a.datepicker._hideDatepicker(a.datepicker._curInst.input[0]));var j=a.datepicker._get(b,"beforeShow"),k=j?j.apply(c,[c,b]):{};if(k===!1)return;e(b.settings,k),b.lastVal=null,a.datepicker._lastInput=c,a.datepicker._setDateFromField(b),a.datepicker._inDialog&&(c.value=""),a.datepicker._pos||(a.datepicker._pos=a.datepicker._findPos(c),a.datepicker._pos[1]+=c.offsetHeight);var d=!1;a(c).parents().each(function(){return d|=a(this).css("position")=="fixed",!d}),d&&a.browser.opera&&(a.datepicker._pos[0]-=document.documentElement.scrollLeft,a.datepicker._pos[1]-=document.documentElement.scrollTop);var g={left:a.datepicker._pos[0],top:a.datepicker._pos[1]};a.datepicker._pos=null,b.dpDiv.empty(),b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),a.datepicker._updateDatepicker(b),g=a.datepicker._checkOffset(b,g,d),b.dpDiv.css({position:a.datepicker._inDialog&&a.blockUI?"static":d?"fixed":"absolute",display:"none",left:g.left+"px",top:g.top+"px"});if(!b.inline){var f=a.datepicker._get(b,"showAnim"),h=a.datepicker._get(b,"duration"),i=function(){var c=b.dpDiv.find("iframe.ui-datepicker-cover");if(!!c.length){var d=a.datepicker._getBorders(b.dpDiv);c.css({left:-d[0],top:-d[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex(a(c).zIndex()+1),a.datepicker._datepickerShowing=!0,a.effects&&a.effects[f]?b.dpDiv.show(f,a.datepicker._get(b,"showOptions"),h,i):b.dpDiv[f||"show"](f?h:null,i),(!f||!h)&&i(),b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus(),a.datepicker._curInst=b}},_updateDatepicker:function(b){var i=this;i.maxRows=4;var e=a.datepicker._getBorders(b.dpDiv);f=b,b.dpDiv.empty().append(this._generateHTML(b));var g=b.dpDiv.find("iframe.ui-datepicker-cover");!g.length||g.css({left:-e[0],top:-e[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()}),b.dpDiv.find("."+this._dayOverClass+" a").mouseover();var c=this._getNumberOfMonths(b),d=c[1],j=17;b.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),d>1&&b.dpDiv.addClass("ui-datepicker-multi-"+d).css("width",j*d+"em"),b.dpDiv[(c[0]!=1||c[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi"),b.dpDiv[(this._get(b,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),b==a.datepicker._curInst&&a.datepicker._datepickerShowing&&b.input&&b.input.is(":visible")&&!b.input.is(":disabled")&&b.input[0]!=document.activeElement&&b.input.focus();if(b.yearshtml){var h=b.yearshtml;setTimeout(function(){h===b.yearshtml&&b.yearshtml&&b.dpDiv.find("select.ui-datepicker-year:first").replaceWith(b.yearshtml),h=b.yearshtml=null},0)}},_getBorders:function(a){var b=function(a){return({thin:1,medium:2,thick:3})[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(c,b,g){var d=c.dpDiv.outerWidth(),e=c.dpDiv.outerHeight(),j=c.input?c.input.outerWidth():0,h=c.input?c.input.outerHeight():0,f=document.documentElement.clientWidth+a(document).scrollLeft(),i=document.documentElement.clientHeight+a(document).scrollTop();return b.left-=this._get(c,"isRTL")?d-j:0,b.left-=g&&b.left==c.input.offset().left?a(document).scrollLeft():0,b.top-=g&&b.top==c.input.offset().top+h?a(document).scrollTop():0,b.left-=Math.min(b.left,b.left+d>f&&f>d?Math.abs(b.left+d-f):0),b.top-=Math.min(b.top,b.top+e>i&&i>e?Math.abs(e+h):0),b},_findPos:function(b){var d=this._getInst(b),e=this._get(d,"isRTL");while(b&&(b.type=="hidden"||b.nodeType!=1||a.expr.filters.hidden(b)))b=b[e?"previousSibling":"nextSibling"];var c=a(b).offset();return[c.left,c.top]},_hideDatepicker:function(f){var c=this._curInst;if(!c||f&&c!=a.data(f,b))return;if(this._datepickerShowing){var d=this._get(c,"showAnim"),g=this._get(c,"duration"),e=function(){a.datepicker._tidyDialog(c)};a.effects&&a.effects[d]?c.dpDiv.hide(d,a.datepicker._get(c,"showOptions"),g,e):c.dpDiv[d=="slideDown"?"slideUp":d=="fadeIn"?"fadeOut":"hide"](d?g:null,e),d||e(),this._datepickerShowing=!1;var h=this._get(c,"onClose");h&&h.apply(c.input?c.input[0]:null,[c.input?c.input.val():"",c]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),a.blockUI&&(a.unblockUI(),a("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(c){if(!a.datepicker._curInst)return;var b=a(c.target),d=a.datepicker._getInst(b[0]);(b[0].id!=a.datepicker._mainDivId&&b.parents("#"+a.datepicker._mainDivId).length==0&&!b.hasClass(a.datepicker.markerClassName)&&!b.closest("."+a.datepicker._triggerClass).length&&a.datepicker._datepickerShowing&&(!a.datepicker._inDialog||!a.blockUI)||b.hasClass(a.datepicker.markerClassName)&&a.datepicker._curInst!=d)&&a.datepicker._hideDatepicker()},_adjustDate:function(e,f,c){var d=a(e),b=this._getInst(d[0]);if(this._isDisabledDatepicker(d[0]))return;this._adjustInstDate(b,f+(c=="M"?this._get(b,"showCurrentAtPos"):0),c),this._updateDatepicker(b)},_gotoToday:function(e){var d=a(e),b=this._getInst(d[0]);if(this._get(b,"gotoCurrent")&&b.currentDay)b.selectedDay=b.currentDay,b.drawMonth=b.selectedMonth=b.currentMonth,b.drawYear=b.selectedYear=b.currentYear;else{var c=new Date;b.selectedDay=c.getDate(),b.drawMonth=b.selectedMonth=c.getMonth(),b.drawYear=b.selectedYear=c.getFullYear()}this._notifyChange(b),this._adjustDate(d)},_selectMonthYear:function(f,c,d){var e=a(f),b=this._getInst(e[0]);b["selected"+(d=="M"?"Month":"Year")]=b["draw"+(d=="M"?"Month":"Year")]=parseInt(c.options[c.selectedIndex].value,10),this._notifyChange(b),this._adjustDate(e)},_selectDay:function(c,f,g,d){var e=a(c);if(a(d).hasClass(this._unselectableClass)||this._isDisabledDatepicker(e[0]))return;var b=this._getInst(e[0]);b.selectedDay=b.currentDay=a("a",d).html(),b.selectedMonth=b.currentMonth=f,b.selectedYear=b.currentYear=g,this._selectDate(c,this._formatDate(b,b.currentDay,b.currentMonth,b.currentYear))},_clearDate:function(c){var b=a(c),d=this._getInst(b[0]);this._selectDate(b,"")},_selectDate:function(e,c){var f=a(e),b=this._getInst(f[0]);c=c!=null?c:this._formatDate(b),b.input&&b.input.val(c),this._updateAlternate(b);var d=this._get(b,"onSelect");d?d.apply(b.input?b.input[0]:null,[c,b]):b.input&&b.input.trigger("change"),b.inline?this._updateDatepicker(b):(this._hideDatepicker(),this._lastInput=b.input[0],typeof b.input[0]!="object"&&b.input.focus(),this._lastInput=null)},_updateAlternate:function(b){var c=this._get(b,"altField");if(c){var d=this._get(b,"altFormat")||this._get(b,"dateFormat"),e=this._getDate(b),f=this.formatDate(d,e,this._getFormatConfig(b));a(c).each(function(){a(this).val(f)})}},noWeekends:function(b){var a=b.getDay();return[a>0&&a<6,""]},iso8601Week:function(b){var a=new Date(b.getTime());a.setDate(a.getDate()+4-(a.getDay()||7));var c=a.getTime();return a.setMonth(0),a.setDate(1),Math.floor(Math.round((c-a)/8.64e7)/7)+1},parseDate:function(j,b,e){if(j==null||b==null)throw"Invalid arguments";b=typeof b=="object"?b.toString():b+"";if(b=="")return null;var l=(e?e.shortYearCutoff:null)||this._defaults.shortYearCutoff;l=typeof l!="string"?l:(new Date).getFullYear()%100+parseInt(l,10);for(var s=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort,t=(e?e.dayNames:null)||this._defaults.dayNames,u=(e?e.monthNamesShort:null)||this._defaults.monthNamesShort,v=(e?e.monthNames:null)||this._defaults.monthNames,c=-1,g=-1,h=-1,n=-1,o=!1,m=function(b){var a=i+1<j.length&&j.charAt(i+1)==b;return a&&i++,a},k=function(a){var e=m(a),f=a=="@"?14:a=="!"?20:a=="y"&&e?4:a=="o"?3:2,g=new RegExp("^\\d{1,"+f+"}"),c=b.substring(d).match(g);if(!c)throw"Missing number at position "+d;return d+=c[0].length,parseInt(c[0],10)},q=function(e,f,g){var h=a.map(m(e)?g:f,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)}),c=-1;a.each(h,function(f,e){var a=e[1];if(b.substr(d,a.length).toLowerCase()==a.toLowerCase())return c=e[0],d+=a.length,!1});if(c!=-1)return c+1;throw"Unknown name at position "+d;},p=function(){if(b.charAt(d)!=j.charAt(i))throw"Unexpected literal at position "+d;d++},d=0,i=0;i<j.length;i++)if(o)j.charAt(i)=="'"&&!m("'")?(o=!1):p();else switch(j.charAt(i)){case"d":h=k("d");break;case"D":q("D",s,t);break;case"o":n=k("o");break;case"m":g=k("m");break;case"M":g=q("M",u,v);break;case"y":c=k("y");break;case"@":var f=new Date(k("@"));c=f.getFullYear(),g=f.getMonth()+1,h=f.getDate();break;case"!":var f=new Date((k("!")-this._ticksTo1970)/1e4);c=f.getFullYear(),g=f.getMonth()+1,h=f.getDate();break;case"'":m("'")?p():(o=!0);break;default:p()}if(d<b.length)throw"Extra/unparsed characters found in date: "+b.substring(d);c==-1?(c=(new Date).getFullYear()):c<100&&(c+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c<=l?0:-100));if(n>-1){g=1,h=n;do{var r=this._getDaysInMonth(c,g-1);if(h<=r)break;g++,h-=r}while(!0)}var f=this._daylightSavingAdjust(new Date(c,g-1,h));if(f.getFullYear()!=c||f.getMonth()+1!=g||f.getDate()!=h)throw"Invalid date";return f},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1e7,formatDate:function(e,a,d){if(!a)return"";var j=(d?d.dayNamesShort:null)||this._defaults.dayNamesShort,k=(d?d.dayNames:null)||this._defaults.dayNames,l=(d?d.monthNamesShort:null)||this._defaults.monthNamesShort,m=(d?d.monthNames:null)||this._defaults.monthNames,f=function(b){var a=c+1<e.length&&e.charAt(c+1)==b;return a&&c++,a},g=function(b,c,d){var a=""+c;if(f(b))while(a.length<d)a="0"+a;return a},i=function(b,a,c,d){return f(b)?d[a]:c[a]},b="",h=!1;if(a)for(var c=0;c<e.length;c++)if(h)e.charAt(c)=="'"&&!f("'")?(h=!1):(b+=e.charAt(c));else switch(e.charAt(c)){case"d":b+=g("d",a.getDate(),2);break;case"D":b+=i("D",a.getDay(),j,k);break;case"o":b+=g("o",Math.round(((new Date(a.getFullYear(),a.getMonth(),a.getDate())).getTime()-(new Date(a.getFullYear(),0,0)).getTime())/8.64e7),3);break;case"m":b+=g("m",a.getMonth()+1,2);break;case"M":b+=i("M",a.getMonth(),l,m);break;case"y":b+=f("y")?a.getFullYear():(a.getYear()%100<10?"0":"")+a.getYear()%100;break;case"@":b+=a.getTime();break;case"!":b+=a.getTime()*1e4+this._ticksTo1970;break;case"'":f("'")?(b+="'"):(h=!0);break;default:b+=e.charAt(c)}return b},_possibleChars:function(b){for(var c="",d=!1,e=function(d){var c=a+1<b.length&&b.charAt(a+1)==d;return c&&a++,c},a=0;a<b.length;a++)if(d)b.charAt(a)=="'"&&!e("'")?(d=!1):(c+=b.charAt(a));else switch(b.charAt(a)){case"d":case"m":case"y":case"@":c+="0123456789";break;case"D":case"M":return null;case"'":e("'")?(c+="'"):(d=!0);break;default:c+=b.charAt(a)}return c},_get:function(b,a){return b.settings[a]!==d?b.settings[a]:this._defaults[a]},_setDateFromField:function(a,e){if(a.input.val()==a.lastVal)return;var f=this._get(a,"dateFormat"),c=a.lastVal=a.input?a.input.val():null,b,d;b=d=this._getDefaultDate(a);var g=this._getFormatConfig(a);try{b=this.parseDate(f,c,g)||d}catch(h){this.log(h),c=e?"":c}a.selectedDay=b.getDate(),a.drawMonth=a.selectedMonth=b.getMonth(),a.drawYear=a.selectedYear=b.getFullYear(),a.currentDay=c?b.getDate():0,a.currentMonth=c?b.getMonth():0,a.currentYear=c?b.getFullYear():0,this._adjustInstDate(a)},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(d,c,e){var f=function(b){var a=new Date;return a.setDate(a.getDate()+b),a},g=function(e){try{return a.datepicker.parseDate(a.datepicker._get(d,"dateFormat"),e,a.datepicker._getFormatConfig(d))}catch(j){}var h=(e.toLowerCase().match(/^c/)?a.datepicker._getDate(d):null)||new Date,f=h.getFullYear(),g=h.getMonth(),b=h.getDate(),i=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,c=i.exec(e);while(c){switch(c[2]||"d"){case"d":case"D":b+=parseInt(c[1],10);break;case"w":case"W":b+=parseInt(c[1],10)*7;break;case"m":case"M":g+=parseInt(c[1],10),b=Math.min(b,a.datepicker._getDaysInMonth(f,g));break;case"y":case"Y":f+=parseInt(c[1],10),b=Math.min(b,a.datepicker._getDaysInMonth(f,g))}c=i.exec(e)}return new Date(f,g,b)},b=c==null||c===""?e:typeof c=="string"?g(c):typeof c=="number"?isNaN(c)?e:f(c):new Date(c.getTime());return b=b&&b.toString()=="Invalid Date"?e:b,b&&(b.setHours(0),b.setMinutes(0),b.setSeconds(0),b.setMilliseconds(0)),this._daylightSavingAdjust(b)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(a,c,d){var e=!c,f=a.selectedMonth,g=a.selectedYear,b=this._restrictMinMax(a,this._determineDate(a,c,new Date));a.selectedDay=a.currentDay=b.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=b.getMonth(),a.drawYear=a.selectedYear=a.currentYear=b.getFullYear(),(f!=a.selectedMonth||g!=a.selectedYear)&&!d&&this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(e?"":this._formatDate(a))},_getDate:function(a){return!a.currentYear||a.input&&a.input.val()==""?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay))},_generateHTML:function(b){var j=new Date;j=this._daylightSavingAdjust(new Date(j.getFullYear(),j.getMonth(),j.getDate()));var h=this._get(b,"isRTL"),Y=this._get(b,"showButtonPanel"),F=this._get(b,"hideIfNoPrevNext"),z=this._get(b,"navigationAsDateFormat"),i=this._getNumberOfMonths(b),bb=this._get(b,"showCurrentAtPos"),v=this._get(b,"stepMonths"),B=i[0]!=1||i[1]!=1,D=this._daylightSavingAdjust(b.currentDay?new Date(b.currentYear,b.currentMonth,b.currentDay):new Date(9999,9,9)),q=this._getMinMaxDate(b,"min"),k=this._getMinMaxDate(b,"max"),d=b.drawMonth-bb,f=b.drawYear;d<0&&(d+=12,f--);if(k){var w=this._daylightSavingAdjust(new Date(k.getFullYear(),k.getMonth()-i[0]*i[1]+1,k.getDate()));w=q&&w<q?q:w;while(this._daylightSavingAdjust(new Date(f,d,1))>w)d--,d<0&&(d=11,f--)}b.drawMonth=d,b.drawYear=f;var l=this._get(b,"prevText");l=z?this.formatDate(l,this._daylightSavingAdjust(new Date(f,d-v,1)),this._getFormatConfig(b)):l;var K=this._canAdjustMonth(b,-1,f,d)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+c+".datepicker._adjustDate('#"+b.id+"', -"+v+", 'M');\" title=\""+l+'"><span class="ui-icon ui-icon-circle-triangle-'+(h?"e":"w")+'">'+l+"</span></a>":F?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+l+'"><span class="ui-icon ui-icon-circle-triangle-'+(h?"e":"w")+'">'+l+"</span></a>",m=this._get(b,"nextText");m=z?this.formatDate(m,this._daylightSavingAdjust(new Date(f,d+v,1)),this._getFormatConfig(b)):m;var N=this._canAdjustMonth(b,1,f,d)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+c+".datepicker._adjustDate('#"+b.id+"', +"+v+", 'M');\" title=\""+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(h?"w":"e")+'">'+m+"</span></a>":F?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(h?"w":"e")+'">'+m+"</span></a>",x=this._get(b,"currentText"),P=this._get(b,"gotoCurrent")&&b.currentDay?D:j;x=z?this.formatDate(x,P,this._getFormatConfig(b)):x;var R=b.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+c+'.datepicker._hideDatepicker();">'+this._get(b,"closeText")+"</button>",db=Y?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(h?R:"")+(this._isInRange(b,P)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+c+".datepicker._gotoToday('#"+b.id+"');\">"+x+"</button>":"")+(h?"":R)+"</div>":"",o=parseInt(this._get(b,"firstDay"),10);o=isNaN(o)?0:o;for(var U=this._get(b,"showWeek"),W=this._get(b,"dayNames"),eb=this._get(b,"dayNamesShort"),X=this._get(b,"dayNamesMin"),Z=this._get(b,"monthNames"),ab=this._get(b,"monthNamesShort"),G=this._get(b,"beforeShowDay"),A=this._get(b,"showOtherMonths"),cb=this._get(b,"selectOtherMonths"),fb=this._get(b,"calculateWeek")||this.iso8601Week,H=this._getDefaultDate(b),C="",s=0;s<i[0];s++){var I="";this.maxRows=4;for(var t=0;t<i[1];t++){var J=this._daylightSavingAdjust(new Date(f,d,b.selectedDay)),r=" ui-corner-all",g="";if(B){g+='<div class="ui-datepicker-group';if(i[1]>1)switch(t){case 0:g+=" ui-datepicker-group-first",r=" ui-corner-"+(h?"right":"left");break;case i[1]-1:g+=" ui-datepicker-group-last",r=" ui-corner-"+(h?"left":"right");break;default:g+=" ui-datepicker-group-middle",r=""}g+='">'}g+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+r+'">'+(/all|left/.test(r)&&s==0?h?N:K:"")+(/all|right/.test(r)&&s==0?h?K:N:"")+this._generateMonthYearHeader(b,d,f,q,k,s>0||t>0,Z,ab)+'</div><table class="ui-datepicker-calendar"><thead><tr>';for(var L=U?'<th class="ui-datepicker-week-col">'+this._get(b,"weekHeader")+"</th>":"",n=0;n<7;n++){var M=(n+o)%7;L+="<th"+((n+o+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+W[M]+'">'+X[M]+"</span></th>"}g+=L+"</tr></thead><tbody>";var O=this._getDaysInMonth(f,d);f==b.selectedYear&&d==b.selectedMonth&&(b.selectedDay=Math.min(b.selectedDay,O));var Q=(this._getFirstDayOfMonth(f,d)-o+7)%7,E=Math.ceil((Q+O)/7),S=B?this.maxRows>E?this.maxRows:E:E;this.maxRows=S;for(var e=this._daylightSavingAdjust(new Date(f,d,1-Q)),T=0;T<S;T++){g+="<tr>";for(var V=U?'<td class="ui-datepicker-week-col">'+this._get(b,"calculateWeek")(e)+"</td>":"",n=0;n<7;n++){var u=G?G.apply(b.input?b.input[0]:null,[e]):[!0,""],p=e.getMonth()!=d,y=p&&!cb||!u[0]||q&&e<q||k&&e>k;V+='<td class="'+((n+o+6)%7>=5?" ui-datepicker-week-end":"")+(p?" ui-datepicker-other-month":"")+(e.getTime()==J.getTime()&&d==b.selectedMonth&&b._keyEvent||H.getTime()==e.getTime()&&H.getTime()==J.getTime()?" "+this._dayOverClass:"")+(y?" "+this._unselectableClass+" ui-state-disabled":"")+(p&&!A?"":" "+u[1]+(e.getTime()==D.getTime()?" "+this._currentClass:"")+(e.getTime()==j.getTime()?" ui-datepicker-today":""))+'"'+((!p||A)&&u[2]?' title="'+u[2]+'"':"")+(y?"":' onclick="DP_jQuery_'+c+".datepicker._selectDay('#"+b.id+"',"+e.getMonth()+","+e.getFullYear()+', this);return false;"')+">"+(p&&!A?"&#xa0;":y?'<span class="ui-state-default">'+e.getDate()+"</span>":'<a class="ui-state-default'+(e.getTime()==j.getTime()?" ui-state-highlight":"")+(e.getTime()==D.getTime()?" ui-state-active":"")+(p?" ui-priority-secondary":"")+'" href="#">'+e.getDate()+"</a>")+"</td>",e.setDate(e.getDate()+1),e=this._daylightSavingAdjust(e)}g+=V+"</tr>"}d++,d>11&&(d=0,f++),g+="</tbody></table>"+(B?"</div>"+(i[0]>0&&t==i[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),I+=g}C+=I}return C+=db+(a.browser.msie&&parseInt(a.browser.version,10)<7&&!b.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),b._keyEvent=!1,C},_generateMonthYearHeader:function(a,n,g,h,i,j,s,t){var l=this._get(a,"changeMonth"),m=this._get(a,"changeYear"),o=this._get(a,"showMonthAfterYear"),d='<div class="ui-datepicker-title">',f="";if(j||!l)f+='<span class="ui-datepicker-month">'+s[n]+"</span>";else{var u=h&&h.getFullYear()==g,v=i&&i.getFullYear()==g;f+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+c+".datepicker._selectMonthYear('#"+a.id+"', this, 'M');\" >";for(var e=0;e<12;e++)(!u||e>=h.getMonth())&&(!v||e<=i.getMonth())&&(f+='<option value="'+e+'"'+(e==n?' selected="selected"':"")+">"+t[e]+"</option>");f+="</select>"}o||(d+=f+(j||!l||!m?"&#xa0;":""));if(!a.yearshtml){a.yearshtml="";if(j||!m)d+='<span class="ui-datepicker-year">'+g+"</span>";else{var p=this._get(a,"yearRange").split(":"),q=(new Date).getFullYear(),r=function(a){var b=a.match(/c[+-].*/)?g+parseInt(a.substring(1),10):a.match(/[+-].*/)?q+parseInt(a,10):parseInt(a,10);return isNaN(b)?q:b},b=r(p[0]),k=Math.max(b,r(p[1]||""));b=h?Math.max(b,h.getFullYear()):b,k=i?Math.min(k,i.getFullYear()):k,a.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+c+".datepicker._selectMonthYear('#"+a.id+"', this, 'Y');\" >";for(;b<=k;b++)a.yearshtml+='<option value="'+b+'"'+(b==g?' selected="selected"':"")+">"+b+"</option>";a.yearshtml+="</select>",d+=a.yearshtml,a.yearshtml=null}}return d+=this._get(a,"yearSuffix"),o&&(d+=(j||!l||!m?"&#xa0;":"")+f),d+="</div>",d},_adjustInstDate:function(a,c,b){var e=a.drawYear+(b=="Y"?c:0),f=a.drawMonth+(b=="M"?c:0),g=Math.min(a.selectedDay,this._getDaysInMonth(e,f))+(b=="D"?c:0),d=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(e,f,g)));a.selectedDay=d.getDate(),a.drawMonth=a.selectedMonth=d.getMonth(),a.drawYear=a.selectedYear=d.getFullYear(),(b=="M"||b=="Y")&&this._notifyChange(a)},_restrictMinMax:function(d,e){var b=this._getMinMaxDate(d,"min"),c=this._getMinMaxDate(d,"max"),a=b&&e<b?b:e;return a=c&&a>c?c:a,a},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(b){var a=this._get(b,"numberOfMonths");return a==null?[1,1]:typeof a=="number"?[1,a]:a},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(c,b,e,f){var d=this._getNumberOfMonths(c),a=this._daylightSavingAdjust(new Date(e,f+(b<0?b:d[0]*d[1]),1));return b<0&&a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth())),this._isInRange(c,a)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!d||b.getTime()<=d.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b=typeof b!="string"?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);var e=b?typeof b=="object"?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))}}),a.fn.datepicker=function(b){if(!this.length)return this;a.datepicker.initialized||(a(document).mousedown(a.datepicker._checkExternalClick).find("body").append(a.datepicker.dpDiv),a.datepicker.initialized=!0);var c=Array.prototype.slice.call(arguments,1);return typeof b!="string"||b!="isDisabled"&&b!="getDate"&&b!="widget"?b=="option"&&arguments.length==2&&typeof arguments[1]=="string"?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c)):this.each(function(){typeof b=="string"?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this].concat(c)):a.datepicker._attachDatepicker(this,b)}):a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c))},a.datepicker=new g,a.datepicker.initialized=!1,a.datepicker.uuid=(new Date).getTime(),a.datepicker.version="1.8.20",window["DP_jQuery_"+c]=a})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.progressbar.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a,b){a.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),a.Widget.prototype.destroy.apply(this,arguments)},value:function(a){return a===b?this._value():(this._setOption("value",a),this)},_setOption:function(b,c){b==="value"&&(this.options.value=c,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),a.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var a=this.options.value;return typeof a!="number"&&(a=0),Math.min(this.options.max,Math.max(this.min,a))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var a=this.value(),b=this._percentage();this.oldValue!==a&&(this.oldValue=a,this._trigger("change")),this.valueDiv.toggle(a>this.min).toggleClass("ui-corner-right",a===this.options.max).width(b.toFixed(0)+"%"),this.element.attr("aria-valuenow",a)}}),a.extend(a.ui.progressbar,{version:"1.8.20"})})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.core.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
jQuery.effects||function(a,b){function e(c){var b;return c&&c.constructor==Array&&c.length==3?c:(b=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(c))?[parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3],10)]:(b=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(c))?[parseFloat(b[1])*2.55,parseFloat(b[2])*2.55,parseFloat(b[3])*2.55]:(b=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(c))?[parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16)]:(b=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(c))?[parseInt(b[1]+b[1],16),parseInt(b[2]+b[2],16),parseInt(b[3]+b[3],16)]:(b=/rgba\(0, 0, 0, 0\)/.exec(c))?f.transparent:f[a.trim(c).toLowerCase()]}function j(b,d){var c;do{c=a.curCSS(b,d);if(c!=""&&c!="transparent"||a.nodeName(b,"body"))break;d="backgroundColor"}while(b=b.parentNode);return e(c)}function h(){var a=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,c={},b,d;if(a&&a.length&&a[0]&&a[a[0]]){var e=a.length;while(e--)b=a[e],typeof a[b]=="string"&&(d=b.replace(/\-(\w)/g,function(b,a){return a.toUpperCase()}),c[d]=a[b])}else for(b in a)typeof a[b]=="string"&&(c[b]=a[b]);return c}function i(c){var b,d;for(b in c)d=c[b],(d==null||a.isFunction(d)||b in k||/scrollbar/.test(b)||!/color/i.test(b)&&isNaN(parseFloat(d)))&&delete c[b];return c}function l(d,b){var c={_:0},a;for(a in b)d[a]!=b[a]&&(c[a]=b[a]);return c}function c(e,b,c,d){typeof e=="object"&&(d=b,c=null,b=e,e=b.effect),a.isFunction(b)&&(d=b,c=null,b={});if(typeof b=="number"||a.fx.speeds[b])d=c,c=b,b={};return a.isFunction(c)&&(d=c,c=null),b=b||{},c=c||b.duration,c=a.fx.off?0:typeof c=="number"?c:c in a.fx.speeds?a.fx.speeds[c]:a.fx.speeds._default,d=d||b.complete,[e,b,c,d]}function d(b){return!b||typeof b=="number"||a.fx.speeds[b]?!0:typeof b=="string"&&!a.effects[b]?!0:!1}a.effects={},a.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(c,b){a.fx.step[b]=function(a){a.colorInit||(a.start=j(a.elem,b),a.end=e(a.end),a.colorInit=!0),a.elem.style[b]="rgb("+Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2],10),255),0)+")"}});var f={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},g=["add","remove","toggle"],k={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.effects.animateClass=function(b,e,c,d){return a.isFunction(c)&&(d=c,c=null),this.queue(function(){var f=a(this),j=f.attr("style")||" ",m=i(h.call(this)),k,n=f.attr("class")||"";a.each(g,function(c,a){b[a]&&f[a+"Class"](b[a])}),k=i(h.call(this)),f.attr("class",n),f.animate(l(m,k),{queue:!1,duration:e,easing:c,complete:function(){a.each(g,function(c,a){b[a]&&f[a+"Class"](b[a])}),typeof f.attr("style")=="object"?(f.attr("style").cssText="",f.attr("style").cssText=j):f.attr("style",j),d&&d.apply(this,arguments),a.dequeue(this)}})})},a.fn.extend({_addClass:a.fn.addClass,addClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{add:b},c,d,e]):this._addClass(b)},_removeClass:a.fn.removeClass,removeClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{remove:b},c,d,e]):this._removeClass(b)},_toggleClass:a.fn.toggleClass,toggleClass:function(d,c,e,f,g){return typeof c=="boolean"||c===b?e?a.effects.animateClass.apply(this,[c?{add:d}:{remove:d},e,f,g]):this._toggleClass(d,c):a.effects.animateClass.apply(this,[{toggle:d},c,e,f])},switchClass:function(b,c,d,e,f){return a.effects.animateClass.apply(this,[{add:c,remove:b},d,e,f])}}),a.extend(a.effects,{version:"1.8.20",save:function(c,b){for(var a=0;a<b.length;a++)b[a]!==null&&c.data("ec.storage."+b[a],c[0].style[b[a]])},restore:function(c,b){for(var a=0;a<b.length;a++)b[a]!==null&&c.css(b[a],c.data("ec.storage."+b[a]))},setMode:function(b,a){return a=="toggle"&&(a=b.is(":hidden")?"show":"hide"),a},getBaseline:function(c,d){var a,b;switch(c[0]){case"top":a=0;break;case"middle":a=.5;break;case"bottom":a=1;break;default:a=c[0]/d.height}switch(c[1]){case"left":b=0;break;case"center":b=.5;break;case"right":b=1;break;default:b=c[1]/d.width}return{x:b,y:a}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e=document.activeElement;return b.wrap(d),(b[0]===e||a.contains(b[0],e))&&a(e).focus(),d=b.parent(),b.css("position")=="static"?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(d,a){c[a]=b.css(a),isNaN(parseInt(c[a],10))&&(c[a]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),d.css(c).show()},removeWrapper:function(b){var d,c=document.activeElement;return b.parent().is(".ui-effects-wrapper")?(d=b.parent().replaceWith(b),(b[0]===c||a.contains(b[0],c))&&a(c).focus(),d):b},setTransition:function(c,d,e,b){return b=b||{},a.each(d,function(f,d){var a=c.cssUnit(d);a[0]>0&&(b[d]=a[0]*e+a[1])}),b}}),a.fn.extend({effect:function(g){var d=c.apply(this,arguments),b={options:d[1],duration:d[2],callback:d[3]},e=b.options.mode,f=a.effects[g];return a.fx.off||!f?e?this[e](b.duration,b.callback):this.each(function(){b.callback&&b.callback.call(this)}):f.call(this,b)},_show:a.fn.show,show:function(b){if(d(b))return this._show.apply(this,arguments);var a=c.apply(this,arguments);return a[1].mode="show",this.effect.apply(this,a)},_hide:a.fn.hide,hide:function(b){if(d(b))return this._hide.apply(this,arguments);var a=c.apply(this,arguments);return a[1].mode="hide",this.effect.apply(this,a)},__toggle:a.fn.toggle,toggle:function(b){if(d(b)||typeof b=="boolean"||a.isFunction(b))return this.__toggle.apply(this,arguments);var e=c.apply(this,arguments);return e[1].mode="toggle",this.effect.apply(this,e)},cssUnit:function(d){var b=this.css(d),c=[];return a.each(["em","px","%","pt"],function(d,a){b.indexOf(a)>0&&(c=[parseFloat(b),a])}),c}}),a.easing.jswing=a.easing.swing,a.extend(a.easing,{def:"easeOutQuad",swing:function(b,c,d,e,f){return a.easing[a.easing.def](b,c,d,e,f)},easeInQuad:function(e,a,b,c,d){return c*(a/=d)*a+b},easeOutQuad:function(e,a,b,c,d){return-c*(a/=d)*(a-2)+b},easeInOutQuad:function(e,a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b},easeInCubic:function(e,a,b,c,d){return c*(a/=d)*a*a+b},easeOutCubic:function(e,a,b,c,d){return c*((a=a/d-1)*a*a+1)+b},easeInOutCubic:function(e,a,b,c,d){return(a/=d/2)<1?c/2*a*a*a+b:c/2*((a-=2)*a*a+2)+b},easeInQuart:function(e,a,b,c,d){return c*(a/=d)*a*a*a+b},easeOutQuart:function(e,a,b,c,d){return-c*((a=a/d-1)*a*a*a-1)+b},easeInOutQuart:function(e,a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a+b:-c/2*((a-=2)*a*a*a-2)+b},easeInQuint:function(e,a,b,c,d){return c*(a/=d)*a*a*a*a+b},easeOutQuint:function(e,a,b,c,d){return c*((a=a/d-1)*a*a*a*a+1)+b},easeInOutQuint:function(e,a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a*a+b:c/2*((a-=2)*a*a*a*a+2)+b},easeInSine:function(e,b,c,a,d){return-a*Math.cos(b/d*(Math.PI/2))+a+c},easeOutSine:function(e,a,b,c,d){return c*Math.sin(a/d*(Math.PI/2))+b},easeInOutSine:function(e,a,b,c,d){return-c/2*(Math.cos(Math.PI*a/d)-1)+b},easeInExpo:function(e,a,b,c,d){return a==0?b:c*Math.pow(2,10*(a/d-1))+b},easeOutExpo:function(e,a,b,c,d){return a==d?b+c:c*(-Math.pow(2,-10*a/d)+1)+b},easeInOutExpo:function(e,a,b,c,d){return a==0?b:a==d?b+c:(a/=d/2)<1?c/2*Math.pow(2,10*(a-1))+b:c/2*(-Math.pow(2,-10*--a)+2)+b},easeInCirc:function(e,a,b,c,d){return-c*(Math.sqrt(1-(a/=d)*a)-1)+b},easeOutCirc:function(e,a,b,c,d){return c*Math.sqrt(1-(a=a/d-1)*a)+b},easeInOutCirc:function(e,a,b,c,d){return(a/=d/2)<1?-c/2*(Math.sqrt(1-a*a)-1)+b:c/2*(Math.sqrt(1-(a-=2)*a)+1)+b},easeInElastic:function(h,c,e,a,f){var g=1.70158,b=0,d=a;if(c==0)return e;if((c/=f)==1)return e+a;b||(b=f*.3);if(d<Math.abs(a)){d=a;var g=b/4}else var g=b/(2*Math.PI)*Math.asin(a/d);return-(d*Math.pow(2,10*(c-=1))*Math.sin((c*f-g)*2*Math.PI/b))+e},easeOutElastic:function(h,c,e,a,f){var g=1.70158,b=0,d=a;if(c==0)return e;if((c/=f)==1)return e+a;b||(b=f*.3);if(d<Math.abs(a)){d=a;var g=b/4}else var g=b/(2*Math.PI)*Math.asin(a/d);return d*Math.pow(2,-10*c)*Math.sin((c*f-g)*2*Math.PI/b)+a+e},easeInOutElastic:function(h,a,e,b,f){var g=1.70158,c=0,d=b;if(a==0)return e;if((a/=f/2)==2)return e+b;c||(c=f*.3*1.5);if(d<Math.abs(b)){d=b;var g=c/4}else var g=c/(2*Math.PI)*Math.asin(b/d);return a<1?-.5*d*Math.pow(2,10*(a-=1))*Math.sin((a*f-g)*2*Math.PI/c)+e:d*Math.pow(2,-10*(a-=1))*Math.sin((a*f-g)*2*Math.PI/c)*.5+b+e},easeInBack:function(g,c,d,e,f,a){return a==b&&(a=1.70158),e*(c/=f)*c*((a+1)*c-a)+d},easeOutBack:function(g,a,d,e,f,c){return c==b&&(c=1.70158),e*((a=a/f-1)*a*((c+1)*a+c)+1)+d},easeInOutBack:function(g,a,d,e,f,c){return c==b&&(c=1.70158),(a/=f/2)<1?e/2*a*a*(((c*=1.525)+1)*a-c)+d:e/2*((a-=2)*a*(((c*=1.525)+1)*a+c)+2)+d},easeInBounce:function(d,e,f,b,c){return b-a.easing.easeOutBounce(d,c-e,0,b,c)+f},easeOutBounce:function(e,a,b,c,d){return(a/=d)<1/2.75?c*7.5625*a*a+b:a<2/2.75?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:a<2.5/2.75?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+.984375)+b},easeInOutBounce:function(e,c,f,d,b){return c<b/2?a.easing.easeInBounce(e,c*2,0,d,b)*.5+f:a.easing.easeOutBounce(e,c*2-b,0,d,b)*.5+d*.5+f}})}(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.blind.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a){a.effects.blind=function(b){return this.queue(function(){var c=a(this),f=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"hide"),g=b.options.direction||"vertical";a.effects.save(c,f),c.show();var d=a.effects.createWrapper(c).css({overflow:"hidden"}),h=g=="vertical"?"height":"width",j=g=="vertical"?d.height():d.width();e=="show"&&d.css(h,0);var i={};i[h]=e=="show"?j:0,d.animate(i,b.duration,b.options.easing,function(){e=="hide"&&c.hide(),a.effects.restore(c,f),a.effects.removeWrapper(c),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()})})}})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.bounce.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a){a.effects.bounce=function(b){return this.queue(function(){var c=a(this),i=["position","top","bottom","left","right"],f=a.effects.setMode(c,b.options.mode||"effect"),j=b.options.direction||"up",d=b.options.distance||20,k=b.options.times||5,h=b.duration||250;/show|hide/.test(f)&&i.push("opacity"),a.effects.save(c,i),c.show(),a.effects.createWrapper(c);var e=j=="up"||j=="down"?"top":"left",g=j=="up"||j=="left"?"pos":"neg",d=b.options.distance||(e=="top"?c.outerHeight({margin:!0})/3:c.outerWidth({margin:!0})/3);f=="show"&&c.css("opacity",0).css(e,g=="pos"?-d:d),f=="hide"&&(d=d/(k*2)),f!="hide"&&k--;if(f=="show"){var l={opacity:1};l[e]=(g=="pos"?"+=":"-=")+d,c.animate(l,h/2,b.options.easing),d=d/2,k--}for(var o=0;o<k;o++){var m={},n={};m[e]=(g=="pos"?"-=":"+=")+d,n[e]=(g=="pos"?"+=":"-=")+d,c.animate(m,h/2,b.options.easing).animate(n,h/2,b.options.easing),d=f=="hide"?d*2:d/2}if(f=="hide"){var l={opacity:0};l[e]=(g=="pos"?"-=":"+=")+d,c.animate(l,h/2,b.options.easing,function(){c.hide(),a.effects.restore(c,i),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)})}else{var m={},n={};m[e]=(g=="pos"?"-=":"+=")+d,n[e]=(g=="pos"?"+=":"-=")+d,c.animate(m,h/2,b.options.easing).animate(n,h/2,b.options.easing,function(){a.effects.restore(c,i),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)})}c.queue("fx",function(){c.dequeue()}),c.dequeue()})}})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.clip.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a){a.effects.clip=function(b){return this.queue(function(){var c=a(this),j=["position","top","bottom","left","right","height","width"],e=a.effects.setMode(c,b.options.mode||"hide"),g=b.options.direction||"vertical";a.effects.save(c,j),c.show();var k=a.effects.createWrapper(c).css({overflow:"hidden"}),d=c[0].tagName=="IMG"?k:c,f={size:g=="vertical"?"height":"width",position:g=="vertical"?"top":"left"},h=g=="vertical"?d.height():d.width();e=="show"&&(d.css(f.size,0),d.css(f.position,h/2));var i={};i[f.size]=e=="show"?h:0,i[f.position]=e=="show"?0:h/2,d.animate(i,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){e=="hide"&&c.hide(),a.effects.restore(c,j),a.effects.removeWrapper(c),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()}})})}})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.drop.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a){a.effects.drop=function(b){return this.queue(function(){var c=a(this),i=["position","top","bottom","left","right","opacity"],d=a.effects.setMode(c,b.options.mode||"hide"),e=b.options.direction||"left";a.effects.save(c,i),c.show(),a.effects.createWrapper(c);var f=e=="up"||e=="down"?"top":"left",g=e=="up"||e=="left"?"pos":"neg",h=b.options.distance||(f=="top"?c.outerHeight({margin:!0})/2:c.outerWidth({margin:!0})/2);d=="show"&&c.css("opacity",0).css(f,g=="pos"?-h:h);var j={opacity:d=="show"?1:0};j[f]=(d=="show"?g=="pos"?"+=":"-=":g=="pos"?"-=":"+=")+h,c.animate(j,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){d=="hide"&&c.hide(),a.effects.restore(c,i),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.explode.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a){a.effects.explode=function(b){return this.queue(function(){var d=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3,e=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3;b.options.mode=b.options.mode=="toggle"?a(this).is(":visible")?"hide":"show":b.options.mode;var c=a(this).show().css("visibility","hidden"),h=c.offset();h.top-=parseInt(c.css("marginTop"),10)||0,h.left-=parseInt(c.css("marginLeft"),10)||0;for(var i=c.outerWidth(!0),j=c.outerHeight(!0),f=0;f<d;f++)for(var g=0;g<e;g++)c.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-g*(i/e),top:-f*(j/d)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:i/e,height:j/d,left:h.left+g*(i/e)+(b.options.mode=="show"?(g-Math.floor(e/2))*(i/e):0),top:h.top+f*(j/d)+(b.options.mode=="show"?(f-Math.floor(d/2))*(j/d):0),opacity:b.options.mode=="show"?0:1}).animate({left:h.left+g*(i/e)+(b.options.mode=="show"?0:(g-Math.floor(e/2))*(i/e)),top:h.top+f*(j/d)+(b.options.mode=="show"?0:(f-Math.floor(d/2))*(j/d)),opacity:b.options.mode=="show"?1:0},b.duration||500);setTimeout(function(){b.options.mode=="show"?c.css({visibility:"visible"}):c.css({visibility:"visible"}).hide(),b.callback&&b.callback.apply(c[0]),c.dequeue(),a("div.ui-effects-explode").remove()},b.duration||500)})}})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.fade.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a){a.effects.fade=function(b){return this.queue(function(){var c=a(this),d=a.effects.setMode(c,b.options.mode||"hide");c.animate({opacity:d},{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.fold.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a){a.effects.fold=function(b){return this.queue(function(){var c=a(this),h=["position","top","bottom","left","right"],d=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.size||15,i=!!b.options.horizFirst,j=b.duration?b.duration/2:a.fx.speeds._default/2;a.effects.save(c,h),c.show();var e=a.effects.createWrapper(c).css({overflow:"hidden"}),k=d=="show"!=i,l=k?["width","height"]:["height","width"],g=k?[e.width(),e.height()]:[e.height(),e.width()],m=/([0-9]+)%/.exec(f);m&&(f=parseInt(m[1],10)/100*g[d=="hide"?0:1]),d=="show"&&e.css(i?{height:0,width:f}:{height:f,width:0});var n={},o={};n[l[0]]=d=="show"?g[0]:f,o[l[1]]=d=="show"?g[1]:0,e.animate(n,j,b.options.easing).animate(o,j,b.options.easing,function(){d=="hide"&&c.hide(),a.effects.restore(c,h),a.effects.removeWrapper(c),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()})})}})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.highlight.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a){a.effects.highlight=function(b){return this.queue(function(){var c=a(this),e=["backgroundImage","backgroundColor","opacity"],d=a.effects.setMode(c,b.options.mode||"show"),f={backgroundColor:c.css("backgroundColor")};d=="hide"&&(f.opacity=0),a.effects.save(c,e),c.show().css({backgroundImage:"none",backgroundColor:b.options.color||"#ffff99"}).animate(f,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){d=="hide"&&c.hide(),a.effects.restore(c,e),d=="show"&&!a.support.opacity&&this.style.removeAttribute("filter"),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.pulsate.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a){a.effects.pulsate=function(b){return this.queue(function(){var c=a(this),f=a.effects.setMode(c,b.options.mode||"show"),g=(b.options.times||5)*2-1,h=b.duration?b.duration/2:a.fx.speeds._default/2,e=c.is(":visible"),d=0;e||(c.css("opacity",0).show(),d=1),(f=="hide"&&e||f=="show"&&!e)&&g--;for(var i=0;i<g;i++)c.animate({opacity:d},h,b.options.easing),d=(d+1)%2;c.animate({opacity:d},h,b.options.easing,function(){d==0&&c.hide(),b.callback&&b.callback.apply(this,arguments)}),c.queue("fx",function(){c.dequeue()}).dequeue()})}})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.scale.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a){a.effects.puff=function(b){return this.queue(function(){var c=a(this),d=a.effects.setMode(c,b.options.mode||"hide"),f=parseInt(b.options.percent,10)||150,g=f/100,e={height:c.height(),width:c.width()};a.extend(b.options,{fade:!0,mode:d,percent:d=="hide"?f:100,from:d=="hide"?e:{height:e.height*g,width:e.width*g}}),c.effect("scale",b.options,b.duration,b.callback),c.dequeue()})},a.effects.scale=function(b){return this.queue(function(){var c=a(this),d=a.extend(!0,{},b.options),e=a.effects.setMode(c,b.options.mode||"effect"),g=parseInt(b.options.percent,10)||(parseInt(b.options.percent,10)==0?0:e=="hide"?0:100),h=b.options.direction||"both",j=b.options.origin;e!="effect"&&(d.origin=j||["middle","center"],d.restore=!0);var f={height:c.height(),width:c.width()};c.from=b.options.from||(e=="show"?{height:0,width:0}:f);var i={y:h!="horizontal"?g/100:1,x:h!="vertical"?g/100:1};c.to={height:f.height*i.y,width:f.width*i.x},b.options.fade&&(e=="show"&&(c.from.opacity=0,c.to.opacity=1),e=="hide"&&(c.from.opacity=1,c.to.opacity=0)),d.from=c.from,d.to=c.to,d.mode=e,c.effect("size",d,b.duration,b.callback),c.dequeue()})},a.effects.size=function(b){return this.queue(function(){var c=a(this),f=["position","top","bottom","left","right","width","height","overflow","opacity"],n=["position","top","bottom","left","right","overflow","opacity"],m=["width","height","overflow"],j=["fontSize"],g=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=a.effects.setMode(c,b.options.mode||"effect"),k=b.options.restore||!1,i=b.options.scale||"both",o=b.options.origin,e={height:c.height(),width:c.width()};c.from=b.options.from||e,c.to=b.options.to||e;if(o){var l=a.effects.getBaseline(o,e);c.from.top=(e.height-c.from.height)*l.y,c.from.left=(e.width-c.from.width)*l.x,c.to.top=(e.height-c.to.height)*l.y,c.to.left=(e.width-c.to.width)*l.x}var d={from:{y:c.from.height/e.height,x:c.from.width/e.width},to:{y:c.to.height/e.height,x:c.to.width/e.width}};if(i=="box"||i=="both")d.from.y!=d.to.y&&(f=f.concat(g),c.from=a.effects.setTransition(c,g,d.from.y,c.from),c.to=a.effects.setTransition(c,g,d.to.y,c.to)),d.from.x!=d.to.x&&(f=f.concat(h),c.from=a.effects.setTransition(c,h,d.from.x,c.from),c.to=a.effects.setTransition(c,h,d.to.x,c.to));(i=="content"||i=="both")&&d.from.y!=d.to.y&&(f=f.concat(j),c.from=a.effects.setTransition(c,j,d.from.y,c.from),c.to=a.effects.setTransition(c,j,d.to.y,c.to)),a.effects.save(c,k?f:n),c.show(),a.effects.createWrapper(c),c.css("overflow","hidden").css(c.from);if(i=="content"||i=="both")g=g.concat(["marginTop","marginBottom"]).concat(j),h=h.concat(["marginLeft","marginRight"]),m=f.concat(g).concat(h),c.find("*[width]").each(function(){var c=a(this);k&&a.effects.save(c,m);var e={height:c.height(),width:c.width()};c.from={height:e.height*d.from.y,width:e.width*d.from.x},c.to={height:e.height*d.to.y,width:e.width*d.to.x},d.from.y!=d.to.y&&(c.from=a.effects.setTransition(c,g,d.from.y,c.from),c.to=a.effects.setTransition(c,g,d.to.y,c.to)),d.from.x!=d.to.x&&(c.from=a.effects.setTransition(c,h,d.from.x,c.from),c.to=a.effects.setTransition(c,h,d.to.x,c.to)),c.css(c.from),c.animate(c.to,b.duration,b.options.easing,function(){k&&a.effects.restore(c,m)})});c.animate(c.to,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){c.to.opacity===0&&c.css("opacity",c.from.opacity),p=="hide"&&c.hide(),a.effects.restore(c,k?f:n),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.shake.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a){a.effects.shake=function(b){return this.queue(function(){var c=a(this),k=["position","top","bottom","left","right"],o=a.effects.setMode(c,b.options.mode||"effect"),e=b.options.direction||"left",f=b.options.distance||20,n=b.options.times||3,d=b.duration||b.options.duration||140;a.effects.save(c,k),c.show(),a.effects.createWrapper(c);var g=e=="up"||e=="down"?"top":"left",h=e=="up"||e=="left"?"pos":"neg",i={},j={},l={};i[g]=(h=="pos"?"-=":"+=")+f,j[g]=(h=="pos"?"+=":"-=")+f*2,l[g]=(h=="pos"?"-=":"+=")+f*2,c.animate(i,d,b.options.easing);for(var m=1;m<n;m++)c.animate(j,d,b.options.easing).animate(l,d,b.options.easing);c.animate(j,d,b.options.easing).animate(i,d/2,b.options.easing,function(){a.effects.restore(c,k),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)}),c.queue("fx",function(){c.dequeue()}),c.dequeue()})}})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.slide.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a){a.effects.slide=function(b){return this.queue(function(){var c=a(this),i=["position","top","bottom","left","right"],f=a.effects.setMode(c,b.options.mode||"show"),e=b.options.direction||"left";a.effects.save(c,i),c.show(),a.effects.createWrapper(c).css({overflow:"hidden"});var g=e=="up"||e=="down"?"top":"left",h=e=="up"||e=="left"?"pos":"neg",d=b.options.distance||(g=="top"?c.outerHeight({margin:!0}):c.outerWidth({margin:!0}));f=="show"&&c.css(g,h=="pos"?isNaN(d)?"-"+d:-d:d);var j={};j[g]=(f=="show"?h=="pos"?"+=":"-=":h=="pos"?"-=":"+=")+d,c.animate(j,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){f=="hide"&&c.hide(),a.effects.restore(c,i),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.transfer.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a){a.effects.transfer=function(b){return this.queue(function(){var c=a(this),d=a(b.options.to),e=d.offset(),g={top:e.top,left:e.left,height:d.innerHeight(),width:d.innerWidth()},f=c.offset(),h=a('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(b.options.className).css({top:f.top,left:f.left,height:c.innerHeight(),width:c.innerWidth(),position:"absolute"}).animate(g,b.duration,b.options.easing,function(){h.remove(),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()})})}})(jQuery);function masleidas(a){var b=eval(a);$("#infovis").html("");draw(b)}function traerNubeSecciones(b){var a="/mas-popular/"+b+"/json/";getJSONP(a,masleidas)}function draw(b){var a=new $jit.TM.Squarified({injectInto:"infovis",titleHeight:0,offset:1,Events:{enable:true,onClick:function(a){a!=null&&a.data!=null&&a.data.url!=null}},duration:1e3,Tips:{enable:true,offsetX:3,offsetY:3,onShow:function(d,b){var a='<div class="tip-title">'+b.name+'</div><div class="tip-text">',c=b.data,g=b.id;if(c.image)a+="";a+="</div>";d.innerHTML=a}},onCreateLabel:function(d,b){var e="";if(b!=null&&b.data!=null&&b.data.url!=null)e=b.data.url;d.innerHTML='<p><a href="'+e+'" target="_blank">'+b.name+"</a></p>";var a=d.style,c=Math.floor(b.data.$width/6);if(c>22)c=22;if(c<12)c=12;a.display="";a.fontSize=c+"px";a.lineHeight=c+"px";a.border="1px solid transparent";d.onmouseover=function(){a.border="1px solid white"};d.onmouseout=function(){a.border="1px solid white"};a.backgroundColor=b.data.$color;a.border="1px solid white"}});a.loadJSON(b);a.refresh();a.canvas.getElement().oncontextmenu=null;comparaAlturas()}function comparaAlturas(){var c=document.getElementById("infovis-label");if(c.hasChildNodes())for(index in c.childNodes){var a=c.childNodes[index],b=40;if(a.nodeName=="DIV")while(parseInt(a.childNodes[0].clientHeight)+2>=parseInt(a.clientHeight)&&b>12){b-=1;a.style.fontSize=b+"px"}}}(function(){window.$jit=function(a){a=a||window;for(var b in $jit)if($jit[b].$extend)a[b]=$jit[b]};$jit.version="2.0.1";var a=function(a){return document.getElementById(a)};a.empty=function(){};a.extend=function(c,a){for(var b in a||{})c[b]=a[b];return c};a.lambda=function(a){return typeof a=="function"?a:function(){return a}};a.time=Date.now||function(){return+new Date};a.splat=function(b){var c=a.type(b);return c?c!="array"?[b]:b:[]};a.type=function(b){var c=a.type.s.call(b).match(/^\[object\s(.*)\]$/)[1].toLowerCase();return c!="object"?c:b&&b.$$family?b.$$family:b&&b.nodeName&&b.nodeType==1?"element":c};a.type.s=Object.prototype.toString;a.each=function(b,d){var g=a.type(b);if(g=="object")for(var e in b)d(b[e],e);else for(var c=0,f=b.length;c<f;c++)d(b[c],c)};a.indexOf=function(b,c){if(Array.indexOf)return b.indexOf(c);for(var a=0,d=b.length;a<d;a++)if(b[a]===c)return a;return-1};a.map=function(d,c){var b=[];a.each(d,function(a,d){b.push(c(a,d))});return b};a.reduce=function(b,e,d){var a=b.length;if(a==0)return d;var c=arguments.length==3?d:b[--a];while(a--)c=e(c,b[a]);return c};a.merge=function(){for(var b={},g=0,h=arguments.length;g<h;g++){var e=arguments[g];if(a.type(e)!="object")continue;for(var f in e){var d=e[f],c=b[f];b[f]=c&&a.type(d)=="object"&&a.type(c)=="object"?a.merge(c,d):a.unlink(d)}}return b};a.unlink=function(b){var c;switch(a.type(b)){case"object":c={};for(var e in b)c[e]=a.unlink(b[e]);break;case"array":c=[];for(var d=0,f=b.length;d<f;d++)c[d]=a.unlink(b[d]);break;default:return b}return c};a.zip=function(){if(arguments.length===0)return[];for(var a=0,d=[],f=arguments.length,e=arguments[0].length;a<e;a++){for(var b=0,c=[];b<f;b++)c.push(arguments[b][a]);d.push(c)}return d};a.rgbToHex=function(a,e){if(a.length<3)return null;if(a.length==4&&a[3]==0&&!e)return"transparent";for(var c=[],b=0;b<3;b++){var d=(a[b]-0).toString(16);c.push(d.length==1?"0"+d:d)}return e?c:"#"+c.join("")};a.hexToRgb=function(a){if(a.length!=7){a=a.match(/^#?(\w{1,2})(\w{1,2})(\w{1,2})$/);a.shift();if(a.length!=3)return null;for(var d=[],c=0;c<3;c++){var b=a[c];if(b.length==1)b+=b;d.push(parseInt(b,16))}return d}else{a=parseInt(a.slice(1),16);return[a>>16,a>>8&255,a&255]}};a.destroy=function(b){a.clean(b);b.parentNode&&b.parentNode.removeChild(b);b.clearAttributes&&b.clearAttributes()};a.clean=function(e){for(var c=e.childNodes,b=0,d=c.length;b<d;b++)a.destroy(c[b])};a.addEvent=function(a,c,b){if(a.addEventListener)a.addEventListener(c,b,false);else a.attachEvent("on"+c,b)};a.addEvents=function(d,c){for(var b in c)a.addEvent(d,b,c[b])};a.hasClass=function(b,a){return(" "+b.className+" ").indexOf(" "+a+" ")>-1};a.addClass=function(b,c){if(!a.hasClass(b,c))b.className=b.className+" "+c};a.removeClass=function(a,b){a.className=a.className.replace(new RegExp("(^|\\s)"+b+"(?:\\s|$)"),"$1")};a.getPos=function(d){var a=e(d),b=f(d);return{x:a.x-b.x,y:a.y-b.y};function e(a){var b={x:0,y:0};while(a&&!c(a)){b.x+=a.offsetLeft;b.y+=a.offsetTop;a=a.offsetParent}return b}function f(a){var b={x:0,y:0};while(a&&!c(a)){b.x+=a.scrollLeft;b.y+=a.scrollTop;a=a.parentNode}return b}function c(a){return/^(?:body|html)$/i.test(a.tagName)}};a.event={"get":function(b,a){a=a||window;return b||a.event},getWheel:function(a){return a.wheelDelta?a.wheelDelta/120:-(a.detail||0)/3},isRightClick:function(a){return a.which==3||a.button==2},getPos:function(a,c){c=c||window;a=a||c.event;var b=c.document;b=b.documentElement||b.body;if(a.touches&&a.touches.length)a=a.touches[0];var d={x:a.pageX||a.clientX+b.scrollLeft,y:a.pageY||a.clientY+b.scrollTop};return d},stop:function(a){a.stopPropagation&&a.stopPropagation();a.cancelBubble=true;if(a.preventDefault)a.preventDefault();else a.returnValue=false}};$jit.util=$jit.id=a;var b=function(c){c=c||{};var d=function(){for(var c in this)if(typeof this[c]!="function")this[c]=a.unlink(this[c]);this.constructor=d;if(b.prototyping)return this;var e=this.initialize?this.initialize.apply(this,arguments):this;this.$$family="class";return e};for(var e in b.Mutators){if(!c[e])continue;c=b.Mutators[e](c,c[e]);delete c[e]}a.extend(d,this);d.constructor=b;d.prototype=c;return d};b.Mutators={Implements:function(c,d){a.each(a.splat(d),function(a){b.prototyping=a;var e=typeof a=="function"?new a:a;for(var d in e)if(!(d in c))c[d]=e[d];delete b.prototyping});return c}};a.extend(b,{inherit:function(c,h){for(var e in h){var d=h[e],f=c[e],g=a.type(d);if(f&&g=="function")d!=f&&b.override(c,e,d);else if(g=="object")c[e]=a.merge(f,d);else c[e]=d}return c},override:function(d,a,e){var c=b.prototyping;if(c&&d[a]!=c[a])c=null;var f=function(){var b=this.parent;this.parent=c?c[a]:d[a];var f=e.apply(this,arguments);this.parent=b;return f};d[a]=f}});b.prototype.implement=function(){var c=this.prototype;a.each(Array.prototype.slice.call(arguments||[]),function(a){b.inherit(c,a)});return this};$jit.Class=b;$jit.json={prune:function(b,a){this.each(b,function(b,c){if(c==a&&b.children){delete b.children;b.children=[]}})},getParent:function(d,c){if(d.id==c)return false;var a=d.children;if(a&&a.length>0)for(var b=0;b<a.length;b++)if(a[b].id==c)return d;else{var e=this.getParent(a[b],c);if(e)return e}return false},getSubtree:function(a,d){if(a.id==d)return a;for(var b=0,c=a.children;c&&b<c.length;b++){var e=this.getSubtree(c[b],d);if(e!=null)return e}return null},eachLevel:function(b,a,e,d){if(a<=e){d(b,a);if(!b.children)return;for(var c=0,f=b.children;c<f.length;c++)this.eachLevel(f[c],a+1,e,d)}},each:function(a,b){this.eachLevel(a,0,Number.MAX_VALUE,b)}};$jit.Trans={$extend:true,linear:function(a){return a}};var l=$jit.Trans;(function(){var b=function(c,b){b=a.splat(b);return a.extend(c,{easeIn:function(a){return c(a,b)},easeOut:function(a){return 1-c(1-a,b)},easeInOut:function(a){return a<=.5?c(2*a,b)/2:(2-c(2*(1-a),b))/2}})},c={Pow:function(b,a){return Math.pow(b,a[0]||6)},Expo:function(a){return Math.pow(2,8*(a-1))},Circ:function(a){return 1-Math.sin(Math.acos(a))},Sine:function(a){return 1-Math.sin((1-a)*Math.PI/2)},Back:function(b,a){a=a[0]||1.618;return Math.pow(b,2)*((a+1)*b-a)},Bounce:function(d){for(var c,b=0,a=1;1;b+=a,a/=2)if(d>=(7-4*b)/11){c=a*a-Math.pow((11-6*b-11*d)/4,2);break}return c},Elastic:function(a,b){return Math.pow(2,10*--a)*Math.cos(20*a*Math.PI*(b[0]||1)/3)}};a.each(c,function(c,a){l[a]=b(c)});a.each(["Quad","Cubic","Quart","Quint"],function(c,a){l[c]=b(function(b){return Math.pow(b,[a+2])})})})();var r=new b({initialize:function(a){this.setOptions(a)},setOptions:function(b){var c={duration:2500,fps:40,transition:l.Quart.easeInOut,compute:a.empty,complete:a.empty,link:"ignore"};this.opt=a.merge(c,b||{});return this},step:function(){var c=a.time(),b=this.opt;if(c<this.time+b.duration){var d=b.transition((c-this.time)/b.duration);b.compute(d)}else{this.timer=clearInterval(this.timer);b.compute(1);b.complete()}},start:function(){if(!this.check())return this;this.time=0;this.startTimer();return this},startTimer:function(){var b=this,c=this.opt.fps;if(this.timer)return false;this.time=a.time()-this.time;this.timer=setInterval(function(){b.step()},Math.round(1e3/c));return true},pause:function(){this.stopTimer();return this},resume:function(){this.startTimer();return this},stopTimer:function(){if(!this.timer)return false;this.time=a.time()-this.time;this.timer=clearInterval(this.timer);return true},check:function(){if(!this.timer)return true;if(this.opt.link=="cancel"){this.stopTimer();return true}return false}}),d=function(){for(var e=arguments,b=0,g=e.length,c={};b<g;b++){var f=d[e[b]];if(f.$extend)a.extend(c,f);else c[e[b]]=f}return c};d.AreaChart={$extend:true,animate:true,labelOffset:3,type:"stacked",Tips:{enable:false,onShow:a.empty,onHide:a.empty},Events:{enable:false,onClick:a.empty},selectOnHover:true,showAggregates:true,showLabels:true,filterOnClick:false,restoreOnRightClick:false};d.Margin={$extend:false,top:0,left:0,right:0,bottom:0};d.Canvas={$extend:true,injectInto:"id",type:"2D",width:false,height:false,useCanvas:false,withLabels:true,background:false,Scene:{Lighting:{enable:false,ambient:[1,1,1],directional:{direction:{x:-100,y:-100,z:-100},color:[.5,.3,.1]}}}};d.Tree={$extend:true,orientation:"left",subtreeOffset:8,siblingOffset:5,indent:10,multitree:false,align:"center"};d.Node={$extend:false,overridable:false,type:"circle",color:"#ccb",alpha:1,dim:3,height:20,width:90,autoHeight:false,autoWidth:false,lineWidth:1,transform:true,align:"center",angularWidth:1,span:1,CanvasStyles:{}};d.Edge={$extend:false,overridable:false,type:"line",color:"#ccb",lineWidth:1,dim:15,alpha:1,epsilon:7,CanvasStyles:{}};d.Fx={$extend:true,fps:40,duration:2500,transition:$jit.Trans.Quart.easeInOut,clearCanvas:true};d.Label={$extend:false,overridable:false,type:"HTML",style:" ",size:10,family:"sans-serif",textAlign:"center",textBaseline:"alphabetic",color:"#fff"};d.Tips={$extend:false,enable:false,type:"auto",offsetX:20,offsetY:20,force:false,onShow:a.empty,onHide:a.empty};d.NodeStyles={$extend:false,enable:false,type:"auto",stylesHover:false,stylesClick:false};d.Events={$extend:false,enable:false,enableForEdges:false,type:"auto",onClick:a.empty,onRightClick:a.empty,onMouseMove:a.empty,onMouseEnter:a.empty,onMouseLeave:a.empty,onDragStart:a.empty,onDragMove:a.empty,onDragCancel:a.empty,onDragEnd:a.empty,onTouchStart:a.empty,onTouchMove:a.empty,onTouchEnd:a.empty,onMouseWheel:a.empty};d.Navigation={$extend:false,enable:false,type:"auto",panning:false,zooming:false};d.Controller={$extend:true,onBeforeCompute:a.empty,onAfterCompute:a.empty,onCreateLabel:a.empty,onPlaceLabel:a.empty,onComplete:a.empty,onBeforePlotLine:a.empty,onAfterPlotLine:a.empty,onBeforePlotNode:a.empty,onAfterPlotNode:a.empty,request:false};var q={initialize:function(c,a){this.viz=a;this.canvas=a.canvas;this.config=a.config[c];this.nodeTypes=a.fx.nodeTypes;var b=this.config.type;this.dom=b=="auto"?a.config.Label.type!="Native":b!="Native";this.labelContainer=this.dom&&a.labels.getLabelContainer();this.isEnabled()&&this.initializePost()},initializePost:a.empty,setAsProperty:a.lambda(false),isEnabled:function(){return this.config.enable},isLabel:function(b,f,g){b=a.event.get(b,f);var d=this.labelContainer,c=b.target||b.srcElement,e=b.relatedTarget;return g?e&&e==this.viz.canvas.getCtx().canvas&&!!c&&this.isDescendantOf(c,d):this.isDescendantOf(c,d)},isDescendantOf:function(a,b){while(a&&a.parentNode){if(a.parentNode==b)return a;a=a.parentNode}return false}},n={onMouseUp:a.empty,onMouseDown:a.empty,onMouseMove:a.empty,onMouseOver:a.empty,onMouseOut:a.empty,onMouseWheel:a.empty,onTouchStart:a.empty,onTouchMove:a.empty,onTouchEnd:a.empty,onTouchCancel:a.empty},v=new b({initialize:function(a){this.viz=a;this.canvas=a.canvas;this.node=false;this.edge=false;this.registeredObjects=[];this.attachEvents()},attachEvents:function(){var c=this.canvas.getElement(),b=this;c.oncontextmenu=a.lambda(false);a.addEvents(c,{mouseup:function(d,c){var e=a.event.get(d,c);b.handleEvent("MouseUp",d,c,b.makeEventObject(d,c),a.event.isRightClick(e))},mousedown:function(d,c){var e=a.event.get(d,c);b.handleEvent("MouseDown",d,c,b.makeEventObject(d,c),a.event.isRightClick(e))},mousemove:function(a,c){b.handleEvent("MouseMove",a,c,b.makeEventObject(a,c))},mouseover:function(a,c){b.handleEvent("MouseOver",a,c,b.makeEventObject(a,c))},mouseout:function(a,c){b.handleEvent("MouseOut",a,c,b.makeEventObject(a,c))},touchstart:function(a,c){b.handleEvent("TouchStart",a,c,b.makeEventObject(a,c))},touchmove:function(a,c){b.handleEvent("TouchMove",a,c,b.makeEventObject(a,c))},touchend:function(a,c){b.handleEvent("TouchEnd",a,c,b.makeEventObject(a,c))}});var d=function(d,c){var e=a.event.get(d,c),f=a.event.getWheel(e);b.handleEvent("MouseWheel",d,c,f)};if(!document.getBoxObjectFor&&window.mozInnerScreenX==null)a.addEvent(c,"mousewheel",d);else c.addEventListener("DOMMouseScroll",d,false)},register:function(a){this.registeredObjects.push(a)},handleEvent:function(){for(var c=Array.prototype.slice.call(arguments),d=c.shift(),a=0,b=this.registeredObjects,e=b.length;a<e;a++)b[a]["on"+d].apply(b[a],c)},makeEventObject:function(f,e){var b=this,c=this.viz.graph,d=this.viz.fx,h=d.nodeTypes,g=d.edgeTypes;return{pos:false,node:false,edge:false,contains:false,getNodeCalled:false,getEdgeCalled:false,getPos:function(){var c=b.viz.canvas,d=c.getSize(),g=c.getPos(),j=c.translateOffsetX,i=c.translateOffsetY,l=c.scaleOffsetX,k=c.scaleOffsetY,h=a.event.getPos(f,e);this.pos={x:(h.x-g.x-d.width/2-j)*1/l,y:(h.y-g.y-d.height/2-i)*1/k};return this.pos},getNode:function(){if(this.getNodeCalled)return this.node;this.getNodeCalled=true;for(var g in c.nodes){var a=c.nodes[g],e=a&&h[a.getData("type")],f=e&&e.contains&&e.contains.call(d,a,this.getPos());if(f){this.contains=f;return b.node=this.node=a}}return b.node=this.node=false},getEdge:function(){if(this.getEdgeCalled)return this.edge;this.getEdgeCalled=true;var h={};for(var k in c.edges){var i=c.edges[k];h[k]=true;for(var j in i){if(j in h)continue;var a=i[j],e=a&&g[a.getData("type")],f=e&&e.contains&&e.contains.call(d,a,this.getPos());if(f){this.contains=f;return b.edge=this.edge=a}}}return b.edge=this.edge=false},getContains:function(){if(this.getNodeCalled)return this.contains;this.getNode();return this.contains}}}}),j={initializeExtras:function(){var c=new v(this),b=this;a.each(["NodeStyles","Tips","Navigation","Events"],function(d){var a=new j.Classes[d](d,b);a.isEnabled()&&c.register(a);if(a.setAsProperty())b[d.toLowerCase()]=a})}};j.Classes={};j.Classes.Events=new b({Implements:[q,n],initializePost:function(){this.fx=this.viz.fx;this.ntypes=this.viz.fx.nodeTypes;this.etypes=this.viz.fx.edgeTypes;this.hovered=false;this.pressed=false;this.touched=false;this.touchMoved=false;this.moved=false},setAsProperty:a.lambda(true),onMouseUp:function(d,f,c,e){var b=a.event.get(d,f);if(!this.moved)if(e)this.config.onRightClick(this.pressed,c,b);else this.config.onClick(this.pressed,c,b);if(this.pressed){if(this.moved)this.config.onDragEnd(this.pressed,c,b);else this.config.onDragCancel(this.pressed,c,b);this.pressed=this.moved=false}},onMouseOut:function(e,d,g){var c=a.event.get(e,d),f;if(this.dom&&(f=this.isLabel(e,d,true))){this.config.onMouseLeave(this.viz.graph.getNode(f.id),g,c);this.hovered=false;return}var b=c.relatedTarget,h=this.canvas.getElement();while(b&&b.parentNode){if(h==b.parentNode)return;b=b.parentNode}if(this.hovered){this.config.onMouseLeave(this.hovered,g,c);this.hovered=false}},onMouseOver:function(b,d,f){var e=a.event.get(b,d),c;if(this.dom&&(c=this.isLabel(b,d,true))){this.hovered=this.viz.graph.getNode(c.id);this.config.onMouseEnter(this.hovered,f,e)}},onMouseMove:function(g,f,b){var i,d=a.event.get(g,f);if(this.pressed){this.moved=true;this.config.onDragMove(this.pressed,b,d);return}if(this.dom)this.config.onMouseMove(this.hovered,b,d);else{if(this.hovered){var c=this.hovered,e=c.nodeFrom?this.etypes[c.getData("type")]:this.ntypes[c.getData("type")],h=e&&e.contains&&e.contains.call(this.fx,c,b.getPos());if(h){this.config.onMouseMove(c,b,d);return}else{this.config.onMouseLeave(c,b,d);this.hovered=false}}if(this.hovered=b.getNode()||this.config.enableForEdges&&b.getEdge())this.config.onMouseEnter(this.hovered,b,d);else this.config.onMouseMove(false,b,d)}},onMouseWheel:function(c,b,d){this.config.onMouseWheel(d,a.event.get(c,b))},onMouseDown:function(c,e,b){var f=a.event.get(c,e),d;if(this.dom){if(d=this.isLabel(c,e))this.pressed=this.viz.graph.getNode(d.id)}else this.pressed=b.getNode()||this.config.enableForEdges&&b.getEdge();this.pressed&&this.config.onDragStart(this.pressed,b,f)},onTouchStart:function(c,e,b){var f=a.event.get(c,e),d;if(this.dom&&(d=this.isLabel(c,e)))this.touched=this.viz.graph.getNode(d.id);else this.touched=b.getNode()||this.config.enableForEdges&&b.getEdge();this.touched&&this.config.onTouchStart(this.touched,b,f)},onTouchMove:function(e,d,c){var b=a.event.get(e,d);if(this.touched){this.touchMoved=true;this.config.onTouchMove(this.touched,c,b)}},onTouchEnd:function(e,d,c){var b=a.event.get(e,d);if(this.touched){if(this.touchMoved)this.config.onTouchEnd(this.touched,c,b);else this.config.onTouchCancel(this.touched,c,b);this.touched=this.touchMoved=false}}});j.Classes.Tips=new b({Implements:[q,n],initializePost:function(){if(document.body){var b=a("_tooltip")||document.createElement("div");b.id="_tooltip";b.className="tip";a.extend(b.style,{position:"absolute",display:"none",zIndex:13000});document.body.appendChild(b);this.tip=b;this.node=false}},setAsProperty:a.lambda(true),onMouseOut:function(c,d){var f=a.event.get(c,d);if(this.dom&&this.isLabel(c,d,true)){this.hide(true);return}var b=c.relatedTarget,e=this.canvas.getElement();while(b&&b.parentNode){if(e==b.parentNode)return;b=b.parentNode}this.hide(false)},onMouseOver:function(c,b){var a;if(this.dom&&(a=this.isLabel(c,b,false))){this.node=this.viz.graph.getNode(a.id);this.config.onShow(this.tip,this.node,a)}},onMouseMove:function(d,c,e){this.dom&&this.isLabel(d,c)&&this.setTooltipPosition(a.event.getPos(d,c));if(!this.dom){var b=e.getNode();if(!b){this.hide(true);return}if(this.config.force||!this.node||this.node.id!=b.id){this.node=b;this.config.onShow(this.tip,b,e.getContains())}this.setTooltipPosition(a.event.getPos(d,c))}},setTooltipPosition:function(a){var d=this.tip,c=d.style,h=this.config;c.display="";var g={height:document.body.clientHeight,width:document.body.clientWidth},b={width:d.offsetWidth,height:d.offsetHeight},f=h.offsetX,e=h.offsetY;c.top=(a.y+e+b.height>g.height?a.y-b.height-e:a.y+e)+"px";c.left=(a.x+b.width+f>g.width?a.x-b.width-f:a.x+f)+"px"},hide:function(a){this.tip.style.display="none";a&&this.config.onHide()}});j.Classes.NodeStyles=new b({Implements:[q,n],initializePost:function(){this.fx=this.viz.fx;this.types=this.viz.fx.nodeTypes;this.nStyles=this.config;this.nodeStylesOnHover=this.nStyles.stylesHover;this.nodeStylesOnClick=this.nStyles.stylesClick;this.hoveredNode=false;this.fx.nodeFxAnimation=new r;this.down=false;this.move=false},onMouseOut:function(b,c){this.down=this.move=false;if(!this.hoveredNode)return;this.dom&&this.isLabel(b,c,true)&&this.toggleStylesOnHover(this.hoveredNode,false);var a=b.relatedTarget,d=this.canvas.getElement();while(a&&a.parentNode){if(d==a.parentNode)return;a=a.parentNode}this.toggleStylesOnHover(this.hoveredNode,false);this.hoveredNode=false},onMouseOver:function(d,c){var a;if(this.dom&&(a=this.isLabel(d,c,true))){var b=this.viz.graph.getNode(a.id);if(b.selected)return;this.hoveredNode=b;this.toggleStylesOnHover(this.hoveredNode,true)}},onMouseDown:function(b,e,c,d){if(d)return;var a;if(this.dom&&(a=this.isLabel(b,e)))this.down=this.viz.graph.getNode(a.id);else if(!this.dom)this.down=c.getNode();this.move=false},onMouseUp:function(d,c,a,b){if(b)return;if(!this.move)this.onClick(a.getNode());this.down=this.move=false},getRestoredStyles:function(d,c){var b={},e=this["nodeStylesOn"+c];for(var a in e)b[a]=d.styles["$"+a];return b},toggleStylesOnHover:function(a,b){this.nodeStylesOnHover&&this.toggleStylesOn("Hover",a,b)},toggleStylesOnClick:function(a,b){this.nodeStylesOnClick&&this.toggleStylesOn("Click",a,b)},toggleStylesOn:function(c,b,g){var d=this.viz,j=this.nStyles;if(g){var i=this;if(!b.styles)b.styles=a.merge(b.data,{});for(var e in this["nodeStylesOn"+c]){var f="$"+e;if(!(f in b.styles))b.styles[f]=b.getData(e)}d.fx.nodeFx(a.extend({elements:{id:b.id,properties:i["nodeStylesOn"+c]},transition:l.Quart.easeOut,duration:300,fps:40},this.config))}else{var h=this.getRestoredStyles(b,c);d.fx.nodeFx(a.extend({elements:{id:b.id,properties:h},transition:l.Quart.easeOut,duration:300,fps:40},this.config))}},onClick:function(a){if(!a)return;var b=this.nodeStylesOnClick;if(!b)return;if(a.selected){this.toggleStylesOnClick(a,false);delete a.selected}else{this.viz.graph.eachNode(function(a){if(a.selected){for(var c in b)a.setData(c,a.styles["$"+c],"end");delete a.selected}});this.toggleStylesOnClick(a,true);a.selected=true;delete a.hovered;this.hoveredNode=false}},onMouseMove:function(f,e,d){if(this.down)this.move=true;if(this.dom&&this.isLabel(f,e))return;var c=this.nodeStylesOnHover;if(!c)return;if(!this.dom){if(this.hoveredNode){var b=this.types[this.hoveredNode.getData("type")],g=b&&b.contains&&b.contains.call(this.fx,this.hoveredNode,d.getPos());if(g)return}var a=d.getNode();if(!this.hoveredNode&&!a)return;if(a.hovered)return;if(a&&!a.selected){this.fx.nodeFxAnimation.stopTimer();this.viz.graph.eachNode(function(a){if(a.hovered&&!a.selected){for(var b in c)a.setData(b,a.styles["$"+b],"end");delete a.hovered}});a.hovered=true;this.hoveredNode=a;this.toggleStylesOnHover(a,true)}else if(this.hoveredNode&&!this.hoveredNode.selected){this.fx.nodeFxAnimation.stopTimer();this.toggleStylesOnHover(this.hoveredNode,false);delete this.hoveredNode.hovered;this.hoveredNode=false}}}});j.Classes.Navigation=new b({Implements:[q,n],initializePost:function(){this.pos=false;this.pressed=false},onMouseWheel:function(f,e,d){if(!this.config.zooming)return;a.event.stop(a.event.get(f,e));var c=this.config.zooming/1e3,b=1+d*c;this.canvas.scale(b,b)},onMouseDown:function(d,c,b){if(!this.config.panning)return;if(this.config.panning=="avoid nodes"&&(this.dom?this.isLabel(d,c):b.getNode()))return;this.pressed=true;this.pos=b.getPos();var a=this.canvas,h=a.translateOffsetX,g=a.translateOffsetY,f=a.scaleOffsetX,e=a.scaleOffsetY;this.pos.x*=f;this.pos.x+=h;this.pos.y*=e;this.pos.y+=g},onMouseMove:function(i,h,d){if(!this.config.panning)return;if(!this.pressed)return;if(this.config.panning=="avoid nodes"&&(this.dom?this.isLabel(i,h):d.getNode()))return;var c=this.pos,a=d.getPos(),b=this.canvas,g=b.translateOffsetX,l=b.translateOffsetY,f=b.scaleOffsetX,e=b.scaleOffsetY;a.x*=f;a.y*=e;a.x+=g;a.y+=l;var k=a.x-c.x,j=a.y-c.y;this.pos=a;this.canvas.translate(k*1/f,j*1/e)},onMouseUp:function(){if(!this.config.panning)return;this.pressed=false}});var i;(function(){var d=typeof HTMLCanvasElement,e=d=="object"||d=="function";function c(f,d){var b=document.createElement(f);for(var c in d)if(typeof d[c]=="object")a.extend(b[c],d[c]);else b[c]=d[c];if(f=="canvas"&&!e&&G_vmlCanvasManager)b=G_vmlCanvasManager.initElement(document.body.appendChild(b));return b}$jit.Canvas=i=new b({canvases:[],pos:false,element:false,labelContainer:false,translateOffsetX:0,translateOffsetY:0,scaleOffsetX:1,scaleOffsetY:1,initialize:function(f,b){this.viz=f;this.opt=this.config=b;var d=a.type(b.injectInto)=="string"?b.injectInto:b.injectInto.id,m=b.type,o=d+"-label",j=a(d),l=b.width||j.offsetWidth,n=b.height||j.offsetHeight;this.id=d;var g={injectInto:d,width:l,height:n};this.element=c("div",{id:d+"-canvaswidget",style:{position:"relative",width:l+"px",height:n+"px"}});this.labelContainer=this.createLabelContainer(b.Label.type,o,g);this.canvases.push(new i.Base[m]({config:a.extend({idSuffix:"-canvas"},g),plot:function(){f.fx.plot()},resize:function(){f.refresh()}}));var h=b.background;if(h){var q=new i.Background[h.type](f,a.extend(h,g));this.canvases.push(new i.Base[m](q))}var e=this.canvases.length;while(e--){this.element.appendChild(this.canvases[e].canvas);e>0&&this.canvases[e].plot()}this.element.appendChild(this.labelContainer);j.appendChild(this.element);var k=null,p=this;a.addEvent(window,"scroll",function(){clearTimeout(k);k=setTimeout(function(){p.getPos(true)},500)})},getCtx:function(a){return this.canvases[a||0].getCtx()},getConfig:function(){return this.opt},getElement:function(){return this.element},getSize:function(a){return this.canvases[a||0].getSize()},resize:function(b,d){this.getPos(true);this.translateOffsetX=this.translateOffsetY=0;this.scaleOffsetX=this.scaleOffsetY=1;for(var a=0,e=this.canvases.length;a<e;a++)this.canvases[a].resize(b,d);var c=this.element.style;c.width=b+"px";c.height=d+"px";if(this.labelContainer)this.labelContainer.style.width=b+"px"},translate:function(c,b,e){this.translateOffsetX+=c*this.scaleOffsetX;this.translateOffsetY+=b*this.scaleOffsetY;for(var a=0,d=this.canvases.length;a<d;a++)this.canvases[a].translate(c,b,e)},scale:function(c,b){var e=this.scaleOffsetX*c,d=this.scaleOffsetY*b,g=this.translateOffsetX*(c-1)/e,f=this.translateOffsetY*(b-1)/d;this.scaleOffsetX=e;this.scaleOffsetY=d;for(var a=0,h=this.canvases.length;a<h;a++)this.canvases[a].scale(c,b,true);this.translate(g,f,false)},getPos:function(b){return b||!this.pos?(this.pos=a.getPos(this.getElement())):this.pos},clear:function(a){this.canvases[a||0].clear()},path:function(b,c){var a=this.canvases[0].getCtx();a.beginPath();c(a);a[b]();a.closePath()},createLabelContainer:function(f,h,d){var g="http://www.w3.org/2000/svg";if(f=="HTML"||f=="Native")return c("div",{id:h,style:{overflow:"visible",position:"absolute",top:0,left:0,width:d.width+"px",height:0}});else if(f=="SVG"){var b=document.createElementNS(g,"svg:svg");b.setAttribute("width",d.width);b.setAttribute("height",d.height);var e=b.style;e.position="absolute";e.left=e.top="0px";var a=document.createElementNS(g,"svg:g");a.setAttribute("width",d.width);a.setAttribute("height",d.height);a.setAttribute("x",0);a.setAttribute("y",0);a.setAttribute("id",h);b.appendChild(a);return b}}});i.Base={};i.Base["2D"]=new b({translateOffsetX:0,translateOffsetY:0,scaleOffsetX:1,scaleOffsetY:1,initialize:function(a){this.viz=a;this.opt=a.config;this.size=false;this.createCanvas();this.translateToCenter()},createCanvas:function(){var a=this.opt,b=a.width,d=a.height;this.canvas=c("canvas",{id:a.injectInto+a.idSuffix,width:b,height:d,style:{position:"absolute",top:0,left:0,width:b+"px",height:d+"px"}})},getCtx:function(){return!this.ctx?(this.ctx=this.canvas.getContext("2d")):this.ctx},getSize:function(){if(this.size)return this.size;var a=this.canvas;return this.size={width:a.width,height:a.height}},translateToCenter:function(a){var b=this.getSize(),d=a?b.width-a.width-this.translateOffsetX*2:b.width;height=a?b.height-a.height-this.translateOffsetY*2:b.height;var c=this.getCtx();a&&c.scale(1/this.scaleOffsetX,1/this.scaleOffsetY);c.translate(d/2,height/2)},resize:function(b,c){var f=this.getSize(),a=this.canvas,d=a.style;this.size=false;a.width=b;a.height=c;d.width=b+"px";d.height=c+"px";if(!e)this.translateToCenter(f);else this.translateToCenter();this.translateOffsetX=this.translateOffsetY=0;this.scaleOffsetX=this.scaleOffsetY=1;this.clear();this.viz.resize(b,c,this)},translate:function(b,a,c){var e=this.scaleOffsetX,d=this.scaleOffsetY;this.translateOffsetX+=b*e;this.translateOffsetY+=a*d;this.getCtx().translate(b,a);!c&&this.plot()},scale:function(b,a,c){this.scaleOffsetX*=b;this.scaleOffsetY*=a;this.getCtx().scale(b,a);!c&&this.plot()},clear:function(){var a=this.getSize(),d=this.translateOffsetX,e=this.translateOffsetY,c=this.scaleOffsetX,b=this.scaleOffsetY;this.getCtx().clearRect((-a.width/2-d)*1/c,(-a.height/2-e)*1/b,a.width*1/c,a.height*1/b)},plot:function(){this.clear();this.viz.plot(this)}});i.Background={};i.Background.Circles=new b({initialize:function(c,b){this.viz=c;this.config=a.merge({idSuffix:"-bkcanvas",levelDistance:100,numberOfCircles:6,CanvasStyles:{},offset:0},b)},resize:function(b,c,a){this.plot(a)},plot:function(f){var i=f.canvas,a=f.getCtx(),c=this.config,d=c.CanvasStyles;for(var e in d)a[e]=d[e];for(var g=c.numberOfCircles,h=c.levelDistance,b=1;b<=g;b++){a.beginPath();a.arc(0,0,h*b,0,2*Math.PI,false);a.stroke();a.closePath()}}})})();var h=function(b,a){this.theta=b||0;this.rho=a||0};$jit.Polar=h;h.prototype={getc:function(a){return this.toComplex(a)},getp:function(){return this},"set":function(a){a=a.getp();this.theta=a.theta;this.rho=a.rho},setc:function(a,b){this.rho=Math.sqrt(a*a+b*b);this.theta=Math.atan2(b,a);if(this.theta<0)this.theta+=Math.PI*2},setp:function(b,a){this.theta=b;this.rho=a},clone:function(){return new h(this.theta,this.rho)},toComplex:function(c){var a=Math.cos(this.theta)*this.rho,b=Math.sin(this.theta)*this.rho;return c?{x:a,y:b}:new f(a,b)},add:function(a){return new h(this.theta+a.theta,this.rho+a.rho)},scale:function(a){return new h(this.theta,this.rho*a)},equals:function(a){return this.theta==a.theta&&this.rho==a.rho},$add:function(a){this.theta=this.theta+a.theta;this.rho+=a.rho;return this},$madd:function(a){this.theta=(this.theta+a.theta)%(Math.PI*2);this.rho+=a.rho;return this},$scale:function(a){this.rho*=a;return this},isZero:function(){var b=1e-4,a=Math.abs;return a(this.theta)<b&&a(this.rho)<b},interpolate:function(g,e){var h=Math.PI,c=h*2,f=function(a){return a<0?a%c+c:a%c},b=this.theta,a=g.theta,d,i=Math.abs(b-a);if(i==h)if(b>a)d=f(a+(b-c-a)*e);else d=f(a-c+(b-a)*e);else if(i>=h)if(b>a)d=f(a+(b-c-a)*e);else d=f(a-c+(b-(a-c))*e);else d=f(a+(b-a)*e);var j=(this.rho-g.rho)*e+g.rho;return{theta:d,rho:j}}};var p=function(b,a){return new h(b,a)};h.KER=p(0,0);var f=function(a,b){this.x=a||0;this.y=b||0};$jit.Complex=f;f.prototype={getc:function(){return this},getp:function(a){return this.toPolar(a)},"set":function(a){a=a.getc(true);this.x=a.x;this.y=a.y},setc:function(a,b){this.x=a;this.y=b},setp:function(b,a){this.x=Math.cos(b)*a;this.y=Math.sin(b)*a},clone:function(){return new f(this.x,this.y)},toPolar:function(c){var b=this.norm(),a=Math.atan2(this.y,this.x);if(a<0)a+=Math.PI*2;return c?{theta:a,rho:b}:new h(a,b)},norm:function(){return Math.sqrt(this.squaredNorm())},squaredNorm:function(){return this.x*this.x+this.y*this.y},add:function(a){return new f(this.x+a.x,this.y+a.y)},prod:function(a){return new f(this.x*a.x-this.y*a.y,this.y*a.x+this.x*a.y)},conjugate:function(){return new f(this.x,-this.y)},scale:function(a){return new f(this.x*a,this.y*a)},equals:function(a){return this.x==a.x&&this.y==a.y},$add:function(a){this.x+=a.x;this.y+=a.y;return this},$prod:function(a){var b=this.x,c=this.y;this.x=b*a.x-c*a.y;this.y=c*a.x+b*a.y;return this},$conjugate:function(){this.y=-this.y;return this},$scale:function(a){this.x*=a;this.y*=a;return this},$div:function(a){var c=this.x,b=this.y,d=a.squaredNorm();this.x=c*a.x+b*a.y;this.y=b*a.x-c*a.y;return this.$scale(1/d)},isZero:function(){var b=1e-4,a=Math.abs;return a(this.x)<b&&a(this.y)<b}};var m=function(b,a){return new f(b,a)};f.KER=m(0,0);$jit.Graph=new b({initialize:function(i,h,g,e){var d={klass:f,Node:{}};this.Node=h;this.Edge=g;this.Label=e;this.opt=a.merge(d,i||{});this.nodes={};this.edges={};var c=this;this.nodeList={};for(var b in o)c.nodeList[b]=function(a){return function(){var b=Array.prototype.slice.call(arguments);c.eachNode(function(c){c[a].apply(c,b)})}}(b)},getNode:function(a){return this.hasNode(a)?this.nodes[a]:false},"get":function(a){return this.getNode(a)},getByName:function(b){for(var c in this.nodes){var a=this.nodes[c];if(a.name==b)return a}return false},getAdjacence:function(a,b){return a in this.edges?this.edges[a][b]:false},addNode:function(b){if(!this.nodes[b.id]){var d=this.edges[b.id]={};this.nodes[b.id]=new c.Node(a.extend({id:b.id,name:b.name,data:a.merge(b.data||{},{}),adjacencies:d},this.opt.Node),this.opt.klass,this.Node,this.Edge,this.Label)}return this.nodes[b.id]},addAdjacence:function(b,a,f){!this.hasNode(b.id)&&this.addNode(b);!this.hasNode(a.id)&&this.addNode(a);b=this.nodes[b.id];a=this.nodes[a.id];if(!b.adjacentTo(a)){var d=this.edges[b.id]=this.edges[b.id]||{},e=this.edges[a.id]=this.edges[a.id]||{};d[a.id]=e[b.id]=new c.Adjacence(b,a,f,this.Edge,this.Label);return d[a.id]}return this.edges[b.id][a.id]},removeNode:function(a){if(this.hasNode(a)){delete this.nodes[a];var c=this.edges[a];for(var b in c)delete this.edges[b][a];delete this.edges[a]}},removeAdjacence:function(b,a){delete this.edges[b][a];delete this.edges[a][b]},hasNode:function(a){return a in this.nodes},empty:function(){this.nodes={};this.edges={}}});var c=$jit.Graph,o;(function(){var b=function(d,e,b,g,f){var a;b=b||"current";d="$"+(d?d+"-":"");if(b=="current")a=this.data;else if(b=="start")a=this.startData;else if(b=="end")a=this.endData;var c=d+e;return g?a[c]:!this.Config.overridable?f[e]||0:c in a?a[c]:c in this.data?this.data[c]:f[e]||0},d=function(c,e,d,a){a=a||"current";c="$"+(c?c+"-":"");var b;if(a=="current")b=this.data;else if(a=="start")b=this.startData;else if(a=="end")b=this.endData;b[c+e]=d},c=function(b,d){b="$"+(b?b+"-":"");var c=this;a.each(d,function(d){var a=b+d;delete c.data[a];delete c.endData[a];delete c.startData[a]})};o={getData:function(c,d,a){return b.call(this,"",c,d,a,this.Config)},setData:function(b,a,c){d.call(this,"",b,a,c)},setDataset:function(c,d){c=a.splat(c);for(var e in d)for(var b=0,g=a.splat(d[e]),f=c.length;b<f;b++)this.setData(e,g[b],c[b])},removeData:function(){c.call(this,"",Array.prototype.slice.call(arguments))},getCanvasStyle:function(c,d,a){return b.call(this,"canvas",c,d,a,this.Config.CanvasStyles)},setCanvasStyle:function(b,a,c){d.call(this,"canvas",b,a,c)},setCanvasStyles:function(c,d){c=a.splat(c);for(var e in d)for(var b=0,g=a.splat(d[e]),f=c.length;b<f;b++)this.setCanvasStyle(e,g[b],c[b])},removeCanvasStyle:function(){c.call(this,"canvas",Array.prototype.slice.call(arguments))},getLabelData:function(c,d,a){return b.call(this,"label",c,d,a,this.Label)},setLabelData:function(b,a,c){d.call(this,"label",b,a,c)},setLabelDataset:function(c,d){c=a.splat(c);for(var e in d)for(var b=0,g=a.splat(d[e]),f=c.length;b<f;b++)this.setLabelData(e,g[b],c[b])},removeLabelData:function(){c.call(this,"label",Array.prototype.slice.call(arguments))}}})();c.Node=new b({initialize:function(g,b,f,e,d){var c={id:"",name:"",data:{},startData:{},endData:{},adjacencies:{},selected:false,drawn:false,exist:false,angleSpan:{begin:0,end:0},pos:new b,startPos:new b,endPos:new b};a.extend(this,a.extend(c,g));this.Config=this.Node=f;this.Edge=e;this.Label=d},adjacentTo:function(a){return a.id in this.adjacencies},getAdjacency:function(a){return this.adjacencies[a]},getPos:function(a){a=a||"current";return a=="current"?this.pos:a=="end"?this.endPos:a=="start"?this.startPos:void 0},setPos:function(c,a){a=a||"current";var b;if(a=="current")b=this.pos;else if(a=="end")b=this.endPos;else if(a=="start")b=this.startPos;b.set(c)}});c.Node.implement(o);c.Adjacence=new b({initialize:function(c,a,d,b,e){this.nodeFrom=c;this.nodeTo=a;this.data=d||{};this.startData={};this.endData={};this.Config=this.Edge=b;this.Label=e}});c.Adjacence.implement(o);c.Util={filter:function(b){if(!b||!(a.type(b)=="string"))return function(){return true};var c=b.split(" ");return function(b){for(var a=0;a<c.length;a++)if(b[c[a]])return false;return true}},getNode:function(a,b){return a.nodes[b]},eachNode:function(a,e,c){var d=this.filter(c);for(var b in a.nodes)d(a.nodes[b])&&e(a.nodes[b])},each:function(c,b,a){this.eachNode(c,b,a)},eachAdjacency:function(b,f,g){var d=b.adjacencies,e=this.filter(g);for(var c in d){var a=d[c];if(e(a)){if(a.nodeFrom!=b){var h=a.nodeFrom;a.nodeFrom=a.nodeTo;a.nodeTo=h}f(a,c)}}},computeLevels:function(e,h,a,d){a=a||0;var g=this.filter(d);this.eachNode(e,function(a){a._flag=false;a._depth=-1},d);var f=e.getNode(h);f._depth=a;var c=[f];while(c.length!=0){var b=c.pop();b._flag=true;this.eachAdjacency(b,function(e){var d=e.nodeTo;if(d._flag==false&&g(d)){if(d._depth<0)d._depth=b._depth+1+a;c.unshift(d)}},d)}},eachBFS:function(c,f,e,d){var g=this.filter(d);this.clean(c);var b=[c.getNode(f)];while(b.length!=0){var a=b.pop();a._flag=true;e(a,a._depth);this.eachAdjacency(a,function(c){var a=c.nodeTo;if(a._flag==false&&g(a)){a._flag=true;b.unshift(a)}},d)}},eachLevel:function(c,f,a,d,i){var b=c._depth,g=this.filter(i),e=this;a=a===false?Number.MAX_VALUE-b:a;(function h(b,f,c){var a=b._depth;a>=f&&a<=c&&g(b)&&d(b,a);a<c&&e.eachAdjacency(b,function(d){var b=d.nodeTo;b._depth>a&&h(b,f,c)})})(c,f+b,a+b)},eachSubgraph:function(b,c,a){this.eachLevel(b,0,false,c,a)},eachSubnode:function(b,c,a){this.eachLevel(b,1,1,c,a)},anySubnode:function(f,b,e){var c=false;b=b||a.lambda(true);var d=a.type(b)=="string"?function(a){return a[b]}:b;this.eachSubnode(f,function(a){if(d(a))c=true},e);return c},getSubnodes:function(e,b,g){var f=[],h=this;b=b||0;var d,c;if(a.type(b)=="array"){d=b[0];c=b[1]}else{d=b;c=Number.MAX_VALUE-e._depth}this.eachLevel(e,d,c,function(a){f.push(a)},g);return f},getParents:function(b){var a=[];this.eachAdjacency(b,function(d){var c=d.nodeTo;c._depth<b._depth&&a.push(c)});return a},isDescendantOf:function(e,c){if(e.id==c)return true;for(var d=this.getParents(e),a=false,b=0;!a&&b<d.length;b++)a=a||this.isDescendantOf(d[b],c);return a},clean:function(a){this.eachNode(a,function(a){a._flag=false})},getClosestNodeToOrigin:function(b,c,a){return this.getClosestNodeToPos(b,h.KER,c,a)},getClosestNodeToPos:function(g,a,c,e){var b=null;c=c||"current";a=a&&a.getc(true)||f.KER;var d=function(b,a){var d=b.x-a.x,c=b.y-a.y;return d*d+c*c};this.eachNode(g,function(e){b=b==null||d(e.getPos(c).getc(true),a)<d(b.getPos(c).getc(true),a)?e:b},e);return b}};a.each(["get","getNode","each","eachNode","computeLevels","eachBFS","clean","getClosestNodeToPos","getClosestNodeToOrigin"],function(a){c.prototype[a]=function(){return c.Util[a].apply(c.Util,[this].concat(Array.prototype.slice.call(arguments)))}});a.each(["eachAdjacency","eachLevel","eachSubgraph","eachSubnode","anySubnode","getSubnodes","getParents","isDescendantOf"],function(a){c.Node.prototype[a]=function(){return c.Util[a].apply(c.Util,[this].concat(Array.prototype.slice.call(arguments)))}});c.Op={options:{type:"nothing",duration:2e3,hideLabels:true,fps:30},initialize:function(a){this.viz=a},removeNode:function(h,i){var b=this.viz,e=a.merge(this.options,b.controller,i),c=a.splat(h),d,f,g;switch(e.type){case"nothing":for(d=0;d<c.length;d++)b.graph.removeNode(c[d]);break;case"replot":this.removeNode(c,{type:"nothing"});b.labels.clearLabels();b.refresh(true);break;case"fade:seq":case"fade":f=this;for(d=0;d<c.length;d++){g=b.graph.getNode(c[d]);g.setData("alpha",0,"end")}b.fx.animate(a.merge(e,{modes:["node-property:alpha"],onComplete:function(){f.removeNode(c,{type:"nothing"});b.labels.clearLabels();b.reposition();b.fx.animate(a.merge(e,{modes:["linear"]}))}}));break;case"fade:con":f=this;for(d=0;d<c.length;d++){g=b.graph.getNode(c[d]);g.setData("alpha",0,"end");g.ignore=true}b.reposition();b.fx.animate(a.merge(e,{modes:["node-property:alpha","linear"],onComplete:function(){f.removeNode(c,{type:"nothing"});e.onComplete&&e.onComplete()}}));break;case"iter":f=this;b.fx.sequence({condition:function(){return c.length!=0},step:function(){f.removeNode(c.shift(),{type:"nothing"});b.labels.clearLabels()},onComplete:function(){e.onComplete&&e.onComplete()},duration:Math.ceil(e.duration/c.length)});break;default:this.doError()}},removeEdge:function(h,i){var d=this.viz,e=a.merge(this.options,d.controller,i),c=a.type(h[0])=="string"?[h]:h,b,g,f;switch(e.type){case"nothing":for(b=0;b<c.length;b++)d.graph.removeAdjacence(c[b][0],c[b][1]);break;case"replot":this.removeEdge(c,{type:"nothing"});d.refresh(true);break;case"fade:seq":case"fade":g=this;for(b=0;b<c.length;b++){f=d.graph.getAdjacence(c[b][0],c[b][1]);f&&f.setData("alpha",0,"end")}d.fx.animate(a.merge(e,{modes:["edge-property:alpha"],onComplete:function(){g.removeEdge(c,{type:"nothing"});d.reposition();d.fx.animate(a.merge(e,{modes:["linear"]}))}}));break;case"fade:con":g=this;for(b=0;b<c.length;b++){f=d.graph.getAdjacence(c[b][0],c[b][1]);if(f){f.setData("alpha",0,"end");f.ignore=true}}d.reposition();d.fx.animate(a.merge(e,{modes:["edge-property:alpha","linear"],onComplete:function(){g.removeEdge(c,{type:"nothing"});e.onComplete&&e.onComplete()}}));break;case"iter":g=this;d.fx.sequence({condition:function(){return c.length!=0},step:function(){g.removeEdge(c.shift(),{type:"nothing"});d.labels.clearLabels()},onComplete:function(){e.onComplete()},duration:Math.ceil(e.duration/c.length)});break;default:this.doError()}},sum:function(e,g){var b=this.viz,c=a.merge(this.options,b.controller,g),i=b.root,d;b.root=g.id||b.root;switch(c.type){case"nothing":d=b.construct(e);d.eachNode(function(a){a.eachAdjacency(function(a){b.graph.addAdjacence(a.nodeFrom,a.nodeTo,a.data)})});break;case"replot":b.refresh(true);this.sum(e,{type:"nothing"});b.refresh(true);break;case"fade:seq":case"fade":case"fade:con":that=this;d=b.construct(e);var h=this.preprocessSum(d),f=!h?["node-property:alpha"]:["node-property:alpha","edge-property:alpha"];b.reposition();if(c.type!="fade:con")b.fx.animate(a.merge(c,{modes:["linear"],onComplete:function(){b.fx.animate(a.merge(c,{modes:f,onComplete:function(){c.onComplete()}}))}}));else{b.graph.eachNode(function(a){if(a.id!=i&&a.pos.isZero()){a.pos.set(a.endPos);a.startPos.set(a.endPos)}});b.fx.animate(a.merge(c,{modes:["linear"].concat(f)}))}break;default:this.doError()}},morph:function(f,k,c){c=c||{};var b=this.viz,g=a.merge(this.options,b.controller,k),l=b.root,d;b.root=k.id||b.root;switch(g.type){case"nothing":d=b.construct(f);d.eachNode(function(a){var e=b.graph.hasNode(a.id);a.eachAdjacency(function(a){var e=!!b.graph.getAdjacence(a.nodeFrom.id,a.nodeTo.id);b.graph.addAdjacence(a.nodeFrom,a.nodeTo,a.data);if(e){var d=b.graph.getAdjacence(a.nodeFrom.id,a.nodeTo.id);for(var c in a.data||{})d.data[c]=a.data[c]}});if(e){var d=b.graph.getNode(a.id);for(var c in a.data||{})d.data[c]=a.data[c]}});b.graph.eachNode(function(a){a.eachAdjacency(function(a){!d.getAdjacence(a.nodeFrom.id,a.nodeTo.id)&&b.graph.removeAdjacence(a.nodeFrom.id,a.nodeTo.id)});!d.hasNode(a.id)&&b.graph.removeNode(a.id)});break;case"replot":b.labels.clearLabels(true);this.morph(f,{type:"nothing"});b.refresh(true);b.refresh(true);break;case"fade:seq":case"fade":case"fade:con":that=this;d=b.construct(f);var i="node-property"in c&&a.map(a.splat(c["node-property"]),function(a){return"$"+a});b.graph.eachNode(function(b){var f=d.getNode(b.id);if(!f){b.setData("alpha",1);b.setData("alpha",1,"start");b.setData("alpha",0,"end");b.ignore=true}else{var e=f.data;for(var c in e)if(i&&a.indexOf(i,c)>-1)b.endData[c]=e[c];else b.data[c]=e[c]}});b.graph.eachNode(function(a){if(a.ignore)return;a.eachAdjacency(function(a){if(a.nodeFrom.ignore||a.nodeTo.ignore)return;var c=d.getNode(a.nodeFrom.id),e=d.getNode(a.nodeTo.id);if(!c.adjacentTo(e)){var a=b.graph.getAdjacence(c.id,e.id);j=true;a.setData("alpha",1);a.setData("alpha",1,"start");a.setData("alpha",0,"end")}})});var j=this.preprocessSum(d),e=!j?["node-property:alpha"]:["node-property:alpha","edge-property:alpha"];e[0]=e[0]+("node-property"in c?":"+a.splat(c["node-property"]).join(":"):"");e[1]=(e[1]||"edge-property:alpha")+("edge-property"in c?":"+a.splat(c["edge-property"]).join(":"):"");"label-property"in c&&e.push("label-property:"+a.splat(c["label-property"]).join(":"));if(b.reposition)b.reposition();else b.compute("end");b.graph.eachNode(function(a){if(a.id!=l&&a.pos.getp().equals(h.KER)){a.pos.set(a.endPos);a.startPos.set(a.endPos)}});b.fx.animate(a.merge(g,{modes:[c.position||"polar"].concat(e),onComplete:function(){b.graph.eachNode(function(a){a.ignore&&b.graph.removeNode(a.id)});b.graph.eachNode(function(a){a.eachAdjacency(function(a){a.ignore&&b.graph.removeAdjacence(a.nodeFrom.id,a.nodeTo.id)})});g.onComplete()}}))}},contract:function(d,c){var b=this.viz;if(d.collapsed||!d.anySubnode(a.lambda(true)))return;c=a.merge(this.options,b.config,c||{},{modes:["node-property:alpha:span","linear"]});d.collapsed=true;(function e(a){a.eachSubnode(function(a){a.ignore=true;a.setData("alpha",0,c.type=="animate"?"end":"current");e(a)})})(d);if(c.type=="animate"){b.compute("end");b.rotated&&b.rotate(b.rotated,"none",{property:"end"});(function e(a){a.eachSubnode(function(a){a.setPos(d.getPos("end"),"end");e(a)})})(d);b.fx.animate(c)}else c.type=="replot"&&b.refresh()},expand:function(d,c){if(!("collapsed"in d))return;var b=this.viz;c=a.merge(this.options,b.config,c||{},{modes:["node-property:alpha:span","linear"]});delete d.collapsed;(function e(a){a.eachSubnode(function(a){delete a.ignore;a.setData("alpha",1,c.type=="animate"?"end":"current");e(a)})})(d);if(c.type=="animate"){b.compute("end");b.rotated&&b.rotate(b.rotated,"none",{property:"end"});b.fx.animate(c)}else c.type=="replot"&&b.refresh()},preprocessSum:function(b){var a=this.viz;b.eachNode(function(c){if(!a.graph.hasNode(c.id)){a.graph.addNode(c);var b=a.graph.getNode(c.id);b.setData("alpha",0);b.setData("alpha",0,"start");b.setData("alpha",1,"end")}});var c=false;b.eachNode(function(b){b.eachAdjacency(function(b){var d=a.graph.getNode(b.nodeFrom.id),e=a.graph.getNode(b.nodeTo.id);if(!d.adjacentTo(e)){var b=a.graph.addAdjacence(d,e,b.data);if(d.startAlpha==d.endAlpha&&e.startAlpha==e.endAlpha){c=true;b.setData("alpha",0);b.setData("alpha",0,"start");b.setData("alpha",1,"end")}}})});return c}};var s={none:{render:a.empty,contains:a.lambda(false)},circle:{render:function(e,b,c,d){var a=d.getCtx();a.beginPath();a.arc(b.x,b.y,c,0,Math.PI*2,true);a.closePath();a[e]()},contains:function(b,a,c){var e=b.x-a.x,d=b.y-a.y,f=e*e+d*d;return f<=c*c}},ellipse:{render:function(j,g,c,b,k){var a=k.getCtx(),i=1,h=1,f=1,e=1,d=0;if(c>b){d=c/2;h=b/c;e=c/b}else{d=b/2;i=c/b;f=b/c}a.save();a.scale(i,h);a.beginPath();a.arc(g.x*f,g.y*e,d,0,Math.PI*2,true);a.closePath();a[j]();a.restore()},contains:function(j,h,c,b){var a=0,g=1,f=1,e=0,d=0,i=0;if(c>b){a=c/2;f=b/c}else{a=b/2;g=c/b}e=(j.x-h.x)*(1/g);d=(j.y-h.y)*(1/f);i=e*e+d*d;return i<=a*a}},square:{render:function(d,b,a,c){c.getCtx()[d+"Rect"](b.x-a,b.y-a,2*a,2*a)},contains:function(c,b,a){return Math.abs(b.x-c.x)<=a&&Math.abs(b.y-c.y)<=a}},rectangle:{render:function(e,a,c,b,d){d.getCtx()[e+"Rect"](a.x-c/2,a.y-b/2,c,b)},contains:function(b,a,d,c){return Math.abs(a.x-b.x)<=d/2&&Math.abs(a.y-b.y)<=c/2}},triangle:{render:function(h,c,b,j){var a=j.getCtx(),d=c.x,k=c.y-b,i=d-b,e=c.y+b,g=d+b,f=e;a.beginPath();a.moveTo(d,k);a.lineTo(i,e);a.lineTo(g,f);a.closePath();a[h]()},contains:function(c,b,a){return s.circle.contains(c,b,a)}},star:{render:function(e,d,b,f){var a=f.getCtx(),g=Math.PI/5;a.save();a.translate(d.x,d.y);a.beginPath();a.moveTo(b,0);for(var c=0;c<9;c++){a.rotate(g);if(c%2==0)a.lineTo(b/.525731*.200811,0);else a.lineTo(b,0)}a.closePath();a[e]();a.restore()},contains:function(c,b,a){return s.circle.contains(c,b,a)}}},u={line:{render:function(c,b,d){var a=d.getCtx();a.beginPath();a.moveTo(c.x,c.y);a.lineTo(b.x,b.y);a.stroke()},contains:function(a,b,c,e){var f=Math.min,d=Math.max,k=f(a.x,b.x),i=d(a.x,b.x),j=f(a.y,b.y),h=d(a.y,b.y);if(c.x>=k&&c.x<=i&&c.y>=j&&c.y<=h){if(Math.abs(b.x-a.x)<=e)return true;var g=(b.y-a.y)/(b.x-a.x)*(c.x-a.x)+a.y;return Math.abs(g-c.y)<=e}return false}},arrow:{render:function(d,a,m,k,j){var b=j.getCtx();if(k){var l=d;d=a;a=l}var c=new f(a.x-d.x,a.y-d.y);c.$scale(m/c.norm());var e=new f(a.x-c.x,a.y-c.y),g=new f(-c.y/2,c.x/2),i=e.add(g),h=e.$add(g.$scale(-1));b.beginPath();b.moveTo(d.x,d.y);b.lineTo(a.x,a.y);b.stroke();b.beginPath();b.moveTo(i.x,i.y);b.lineTo(h.x,h.y);b.lineTo(a.x,a.y);b.closePath();b.fill()},contains:function(b,a,d,c){return u.line.contains(b,a,d,c)}},hyperline:{render:function(d,e,c,j){var b=j.getCtx(),a=i(d,e);if(a.a>1e3||a.b>1e3||a.ratio<0){b.beginPath();b.moveTo(d.x*c,d.y*c);b.lineTo(e.x*c,e.y*c);b.stroke()}else{var g=Math.atan2(e.y-a.y,e.x-a.x),f=Math.atan2(d.y-a.y,d.x-a.x),h=h(g,f);b.beginPath();b.arc(a.x*c,a.y*c,a.ratio*c,g,f,h);b.stroke()}function i(b,a){var e=b.x*a.y-b.y*a.x,j=e,g=b.squaredNorm(),f=a.squaredNorm();if(e==0)return{x:0,y:0,ratio:-1};var d=(b.y*f-a.y*g+b.y-a.y)/e,c=(a.x*g-b.x*f+a.x-b.x)/j,m=-d/2,l=-c/2,i=(d*d+c*c)/4-1;if(i<0)return{x:0,y:0,ratio:-1};var h=Math.sqrt(i),k={x:m,y:l,ratio:h>1e3?-1:h,a:d,b:c};return k}function h(a,b){return a<b?a+Math.PI>b?false:true:b+Math.PI>a?true:false}},contains:a.lambda(false)}};c.Plot={initialize:function(a,b){this.viz=a;this.config=a.config;this.node=a.config.Node;this.edge=a.config.Edge;this.animation=new r;this.nodeTypes=new b.Plot.NodeTypes;this.edgeTypes=new b.Plot.EdgeTypes;this.labels=a.labels},nodeHelper:s,edgeHelper:u,Interpolator:{map:{border:"color",color:"color",width:"number",height:"number",dim:"number",alpha:"number",lineWidth:"number",angularWidth:"number",span:"number",valueArray:"array-number",dimArray:"array-number"},canvas:{globalAlpha:"number",fillStyle:"color",strokeStyle:"color",lineWidth:"number",shadowBlur:"number",shadowColor:"color",shadowOffsetX:"number",shadowOffsetY:"number",miterLimit:"number"},label:{size:"number",color:"color"},compute:function(a,c,b){return a+(c-a)*b},moebius:function(c,h,e,g){var a=g.scale(-e);if(a.norm()<1){var f=a.x,d=a.y,b=c.startPos.getc().moebiusTransformation(a);c.pos.setc(b.x,b.y);a.x=f;a.y=d}},linear:function(a,e,b){var d=a.startPos.getc(true),c=a.endPos.getc(true);a.pos.setc(this.compute(d.x,c.x,b),this.compute(d.y,c.y,b))},polar:function(a,f,d){var c=a.startPos.getp(true),e=a.endPos.getp(),b=e.interpolate(c,d);a.pos.setp(b.theta,b.rho)},number:function(b,a,e,c,d){var g=b[c](a,"start"),f=b[c](a,"end");b[d](a,this.compute(g,f,e))},color:function(g,f,e,h,j){var c=a.hexToRgb(g[h](f,"start")),d=a.hexToRgb(g[h](f,"end")),b=this.compute,i=a.rgbToHex([parseInt(b(c[0],d[0],e)),parseInt(b(c[1],d[1],e)),parseInt(b(c[2],d[2],e))]);g[j](f,i)},"array-number":function(f,e,j,h,m){for(var i=f[h](e,"start"),o=f[h](e,"end"),d=[],b=0,l=i.length;b<l;b++){var c=i[b],k=o[b];if(c.length){for(var a=0,n=c.length,g=[];a<n;a++)g.push(this.compute(c[a],k[a],j));d.push(g)}else d.push(this.compute(c,k,j))}f[m](e,d)},node:function(g,c,f,a,e,h){a=this[a];if(c)for(var i=c.length,d=0;d<i;d++){var b=c[d];this[a[b]](g,b,f,e,h)}else for(var b in a)this[a[b]](g,b,f,e,h)},edge:function(g,f,d,h,e,c){var a=g.adjacencies;for(var b in a)this.node(a[b],f,d,h,e,c)},"node-property":function(b,a,c){this.node(b,a,c,"map","getData","setData")},"edge-property":function(b,a,c){this.edge(b,a,c,"map","getData","setData")},"label-property":function(b,a,c){this.node(b,a,c,"label","getLabelData","setLabelData")},"node-style":function(b,a,c){this.node(b,a,c,"canvas","getCanvasStyle","setCanvasStyle")},"edge-style":function(b,a,c){this.edge(b,a,c,"canvas","getCanvasStyle","setCanvasStyle")}},sequence:function(b){var d=this;b=a.merge({condition:a.lambda(false),step:a.empty,onComplete:a.empty,duration:200},b||{});var c=setInterval(function(){if(b.condition())b.step();else{clearInterval(c);b.onComplete()}d.viz.refresh(true)},b.duration)},prepare:function(c){var h=this.viz.graph,d={"node-property":{getter:"getData",setter:"setData"},"edge-property":{getter:"getData",setter:"setData"},"node-style":{getter:"getCanvasStyle",setter:"setCanvasStyle"},"edge-style":{getter:"getCanvasStyle",setter:"setCanvasStyle"}},b={};if(a.type(c)=="array")for(var e=0,i=c.length;e<i;e++){var g=c[e].split(":");b[g.shift()]=g}else for(var f in c)if(f=="position")b[c.position]=[];else b[f]=a.splat(c[f]);h.eachNode(function(c){c.startPos.set(c.pos);a.each(["node-property","node-style"],function(e){if(e in b)for(var f=b[e],a=0,g=f.length;a<g;a++)c[d[e].setter](f[a],c[d[e].getter](f[a]),"start")});a.each(["edge-property","edge-style"],function(a){if(a in b){var e=b[a];c.eachAdjacency(function(c){for(var b=0,f=e.length;b<f;b++)c[d[a].setter](e[b],c[d[a].getter](e[b]),"start")})}})});return b},animate:function(b,i){b=a.merge(this.viz.config,b||{});var c=this,h=this.viz,f=h.graph,g=this.Interpolator,e=b.type==="nodefx"?this.nodeFxAnimation:this.animation,d=this.prepare(b.modes);b.hideLabels&&this.labels.hideLabels(true);e.setOptions(a.extend(b,{$animating:false,compute:function(a){f.eachNode(function(c){for(var b in d)g[b](c,d[b],a,i)});c.plot(b,this.$animating,a);this.$animating=true},complete:function(){b.hideLabels&&c.labels.hideLabels(false);c.plot(b);b.onComplete()}})).start()},nodeFx:function(b){var e=this.viz,f=e.graph,h=this.nodeFxAnimation,i=a.merge(this.viz.config,{elements:{id:false,properties:{}},reposition:false});b=a.merge(i,b||{},{onBeforeCompute:a.empty,onAfterCompute:a.empty});h.stopTimer();var c=b.elements.properties;if(!b.elements.id)f.eachNode(function(b){for(var a in c)b.setData(a,c[a],"end")});else{var j=a.splat(b.elements.id);a.each(j,function(d){var b=f.getNode(d);if(b)for(var a in c)b.setData(a,c[a],"end")})}var d=[];for(var k in c)d.push(k);var g=["node-property:"+d.join(":")];if(b.reposition){g.push("linear");e.compute("end")}this.animate(a.merge(b,{modes:g,type:"nodefx"}))},plot:function(a,b){var e=this.viz,f=e.graph,d=e.canvas,i=e.root,c=this,k=d.getCtx(),j=Math.min,a=a||this.viz.controller;a.clearCanvas&&d.clear();var g=f.getNode(i);if(!g)return;var h=!!g.visited;f.eachNode(function(e){var f=e.getData("alpha");e.eachAdjacency(function(f){var g=f.nodeTo;if(!!g.visited===h&&e.drawn&&g.drawn){!b&&a.onBeforePlotLine(f);c.plotLine(f,d,b);!b&&a.onAfterPlotLine(f)}});if(e.drawn){!b&&a.onBeforePlotNode(e);c.plotNode(e,d,b);!b&&a.onAfterPlotNode(e)}if(!c.labelsHidden&&a.withLabels)if(e.drawn&&f>=.95)c.labels.plotLabel(d,e,a);else c.labels.hideLabel(e,false);e.visited=!h})},plotTree:function(a,b,c){var e=this,f=this.viz,d=f.canvas,i=this.config,h=d.getCtx(),g=a.getData("alpha");a.eachSubnode(function(f){if(b.plotSubtree(a,f)&&f.exist&&f.drawn){var g=a.getAdjacency(f.id);!c&&b.onBeforePlotLine(g);e.plotLine(g,d,c);!c&&b.onAfterPlotLine(g);e.plotTree(f,b,c)}});if(a.drawn){!c&&b.onBeforePlotNode(a);this.plotNode(a,d,c);!c&&b.onAfterPlotNode(a);if(!b.hideLabels&&b.withLabels&&g>=.95)this.labels.plotLabel(d,a,b);else this.labels.hideLabel(a,false)}else this.labels.hideLabel(a,true)},plotNode:function(b,e,h){var c=b.getData("type"),g=this.node.CanvasStyles;if(c!="none"){var i=b.getData("lineWidth"),f=b.getData("color"),j=b.getData("alpha"),a=e.getCtx();a.save();a.lineWidth=i;a.fillStyle=a.strokeStyle=f;a.globalAlpha=j;for(var d in g)a[d]=b.getCanvasStyle(d);this.nodeTypes[c].render.call(this,b,e,h);a.restore()}},plotLine:function(a,e,h){var c=a.getData("type"),k=this.edge.CanvasStyles;if(c!="none"){var i=a.getData("lineWidth"),j=a.getData("color"),b=e.getCtx(),f=a.nodeFrom,g=a.nodeTo;b.save();b.lineWidth=i;b.fillStyle=b.strokeStyle=j;b.globalAlpha=Math.min(f.getData("alpha"),g.getData("alpha"),a.getData("alpha"));for(var d in k)b[d]=a.getCanvasStyle(d);this.edgeTypes[c].render.call(this,a,e,h);b.restore()}}};c.Plot3D=a.merge(c.Plot,{Interpolator:{linear:function(b,e,a){var d=b.startPos.getc(true),c=b.endPos.getc(true);b.pos.setc(this.compute(d.x,c.x,a),this.compute(d.y,c.y,a),this.compute(d.z,c.z,a))}},plotNode:function(a,b){if(a.getData("type")=="none")return;this.plotElement(a,b,{getAlpha:function(){return a.getData("alpha")}})},plotLine:function(a,b){if(a.getData("type")=="none")return;this.plotElement(a,b,{getAlpha:function(){return Math.min(a.nodeFrom.getData("alpha"),a.nodeTo.getData("alpha"),a.getData("alpha"))}})},plotElement:function(c,r,E){var b=r.getCtx(),s=new Matrix4,i=r.config.Scene.Lighting,C=r.canvases[0],e=C.program,B=C.camera;if(!c.geometry)c.geometry=new O3D[c.getData("type")];c.geometry.update(c);if(!c.webGLVertexBuffer){for(var k=[],m=[],l=[],f=0,A=c.geometry,w=0,n=A.vertices,x=A.faces,D=x.length;w<D;w++){var h=x[w],q=n[h.a],p=n[h.b],o=n[h.c],j=h.d?n[h.d]:false,d=h.normal;k.push(q.x,q.y,q.z);k.push(p.x,p.y,p.z);k.push(o.x,o.y,o.z);j&&k.push(j.x,j.y,j.z);l.push(d.x,d.y,d.z);l.push(d.x,d.y,d.z);l.push(d.x,d.y,d.z);j&&l.push(d.x,d.y,d.z);m.push(f,f+1,f+2);if(j){m.push(f,f+2,f+3);f+=4}else f+=3}c.webGLVertexBuffer=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,c.webGLVertexBuffer);b.bufferData(b.ARRAY_BUFFER,new Float32Array(k),b.STATIC_DRAW);c.webGLFaceBuffer=b.createBuffer();b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,c.webGLFaceBuffer);b.bufferData(b.ELEMENT_ARRAY_BUFFER,new Uint16Array(m),b.STATIC_DRAW);c.webGLFaceCount=m.length;c.webGLNormalBuffer=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,c.webGLNormalBuffer);b.bufferData(b.ARRAY_BUFFER,new Float32Array(l),b.STATIC_DRAW)}s.multiply(B.matrix,c.geometry.matrix);b.uniformMatrix4fv(e.viewMatrix,false,s.flatten());b.uniformMatrix4fv(e.projectionMatrix,false,B.projectionMatrix.flatten());var y=Matrix4.makeInvert(s);y.$transpose();b.uniformMatrix4fv(e.normalMatrix,false,y.flatten());var g=a.hexToRgb(c.getData("color"));g.push(E.getAlpha());b.uniform4f(e.color,g[0]/255,g[1]/255,g[2]/255,g[3]);b.uniform1i(e.enableLighting,i.enable);if(i.enable){if(i.ambient){var u=i.ambient;b.uniform3f(e.ambientColor,u[0],u[1],u[2])}if(i.directional){var z=i.directional,g=z.color,t=z.direction,v=(new Vector3(t.x,t.y,t.z)).normalize().$scale(-1);b.uniform3f(e.lightingDirection,v.x,v.y,v.z);b.uniform3f(e.directionalColor,g[0],g[1],g[2])}}b.bindBuffer(b.ARRAY_BUFFER,c.webGLVertexBuffer);b.vertexAttribPointer(e.position,3,b.FLOAT,false,0,0);b.bindBuffer(b.ARRAY_BUFFER,c.webGLNormalBuffer);b.vertexAttribPointer(e.normal,3,b.FLOAT,false,0,0);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,c.webGLFaceBuffer);b.drawElements(b.TRIANGLES,c.webGLFaceCount,b.UNSIGNED_SHORT,0)}});c.Label={};c.Label.Native=new b({initialize:function(a){this.viz=a},plotLabel:function(c,a,d){var b=c.getCtx(),e=a.pos.getc(true);b.font=a.getLabelData("style")+" "+a.getLabelData("size")+"px "+a.getLabelData("family");b.textAlign=a.getLabelData("textAlign");b.fillStyle=b.strokeStyle=a.getLabelData("color");b.textBaseline=a.getLabelData("textBaseline");this.renderLabel(c,a,d)},renderLabel:function(d,a){var c=d.getCtx(),b=a.pos.getc(true);c.fillText(a.name,b.x,b.y+a.getData("height")/2)},hideLabel:a.empty,hideLabels:a.empty});c.Label.DOM=new b({labelsHidden:false,labelContainer:false,labels:{},getLabelContainer:function(){return this.labelContainer?this.labelContainer:(this.labelContainer=document.getElementById(this.viz.config.labelContainer))},getLabel:function(a){return a in this.labels&&this.labels[a]!=null?this.labels[a]:(this.labels[a]=document.getElementById(a))},hideLabels:function(b){var a=this.getLabelContainer();if(b)a.style.display="none";else a.style.display="";this.labelsHidden=b},clearLabels:function(b){for(var a in this.labels)if(b||!this.viz.graph.hasNode(a)){this.disposeLabel(a);delete this.labels[a]}},disposeLabel:function(b){var a=this.getLabel(b);a&&a.parentNode&&a.parentNode.removeChild(a)},hideLabel:function(b,c){b=a.splat(b);var d=c?"":"none",f,e=this;a.each(b,function(b){var a=e.getLabel(b.id);if(a)a.style.display=d})},fitsInCanvas:function(a,c){var b=c.getSize();return a.x>=b.width||a.x<0||a.y>=b.height||a.y<0?false:true}});c.Label.HTML=new b({Implements:c.Label.DOM,plotLabel:function(f,b,d){var c=b.id,a=this.getLabel(c);if(!a&&!(a=document.getElementById(c))){a=document.createElement("div");var e=this.getLabelContainer();a.id=c;a.className="node";a.style.position="absolute";d.onCreateLabel(a,b);e.appendChild(a);this.labels[b.id]=a}this.placeLabel(a,b,d)}});c.Label.SVG=new b({Implements:c.Label.DOM,plotLabel:function(h,b,e){var c=b.id,a=this.getLabel(c);if(!a&&!(a=document.getElementById(c))){var d="http://www.w3.org/2000/svg";a=document.createElementNS(d,"svg:text");var f=document.createElementNS(d,"svg:tspan");a.appendChild(f);var g=this.getLabelContainer();a.setAttribute("id",c);a.setAttribute("class","node");g.appendChild(a);e.onCreateLabel(a,b);this.labels[b.id]=a}this.placeLabel(a,b,e)}});c.Geom=new b({initialize:function(a){this.viz=a;this.config=a.config;this.node=a.config.Node;this.edge=a.config.Edge},translate:function(c,b){b=a.splat(b);this.viz.graph.eachNode(function(d){a.each(b,function(a){d.getPos(a).$add(c)})})},setRightLevelToShow:function(c,f,e){var d=this.getRightLevelToShow(c,f),g=this.viz.labels,b=a.merge({execShow:true,execHide:true,onHide:a.empty,onShow:a.empty},e||{});c.eachLevel(0,this.config.levelsToShow,function(a){var e=a._depth-c._depth;if(e>d){b.onHide(a);if(b.execHide){a.drawn=false;a.exist=false;g.hideLabel(a,false)}}else{b.onShow(a);if(b.execShow)a.exist=true}});c.drawn=true},getRightLevelToShow:function(e,c){var b=this.config,a=b.levelsToShow,d=b.constrained;if(!d)return a;while(!this.treeFitsInCanvas(e,c,a)&&a>1)a--;return a}});var k={construct:function(d){var e=a.type(d)=="array",b=new c(this.graphOptions,this.config.Node,this.config.Edge,this.config.Label);if(!e)(function(d,b){d.addNode(b);if(b.children)for(var a=0,c=b.children;a<c.length;a++){d.addAdjacence(b,c[a]);arguments.callee(d,c[a])}})(b,d);else(function(g,b){for(var i=function(c){for(var a=0,d=b.length;a<d;a++)if(b[a].id==c)return b[a];var e={id:c,name:c};return g.addNode(e)},c=0,j=b.length;c<j;c++){g.addNode(b[c]);var e=b[c].adjacencies;if(e)for(var d=0,k=e.length;d<k;d++){var f=e[d],h={};if(typeof e[d]!="string"){h=a.merge(f.data,{});f=f.nodeTo}g.addAdjacence(b[c],i(f),h)}}})(b,d);return b},loadJSON:function(b,c){this.json=b;this.labels&&this.labels.clearLabels&&this.labels.clearLabels(true);this.graph=this.construct(b);if(a.type(b)!="array")this.root=b.id;else this.root=b[c?c:0].id},toJSON:function(a){a=a||"tree";if(a=="tree"){var b={},e=this.graph.getNode(this.root),b=function d(b){var a={};a.id=b.id;a.name=b.name;a.data=b.data;var c=[];b.eachSubnode(function(a){c.push(d(a))});a.children=c;return a}(e);return b}else{var b=[],c=!!this.graph.getNode(this.root).visited;this.graph.eachNode(function(d){var a={};a.id=d.id;a.name=d.name;a.data=d.data;var e=[];d.eachAdjacency(function(b){var d=b.nodeTo;if(!!d.visited===c){var a={};a.nodeTo=d.id;a.data=b.data;e.push(a)}});a.adjacencies=e;b.push(a);d.visited=!c});return b}}},g=$jit.Layouts={},t={label:null,compute:function(e,f,d){this.initializeLabel(d);var b=this.label,c=b.style;e.eachNode(function(d){var h=d.getData("autoWidth"),i=d.getData("autoHeight");if(h||i){delete d.data.$width;delete d.data.$height;delete d.data.$dim;var j=d.getData("width"),l=d.getData("height");c.width=h?"auto":j+"px";c.height=i?"auto":l+"px";b.innerHTML=d.name;var g=b.offsetWidth,e=b.offsetHeight,k=d.getData("type");if(a.indexOf(["circle","square","triangle","star"],k)===-1){d.setData("width",g);d.setData("height",e)}else{var f=g>e?g:e;d.setData("width",f);d.setData("height",f);d.setData("dim",f)}}})},initializeLabel:function(a){if(!this.label){this.label=document.createElement("div");document.body.appendChild(this.label)}this.setLabelStyles(a)},setLabelStyles:function(){a.extend(this.label.style,{visibility:"hidden",position:"absolute",width:"auto",height:"auto"});this.label.className="jit-autoadjust-label"}};g.Tree=function(){var f=Array.prototype.slice;function i(i,e,f,h,d){var c=e.Node,g=e.multitree;if(c.overridable){var b=-1,a=-1;i.eachNode(function(c){if(c._depth==f&&(!g||"$orn"in c.data&&c.data.$orn==h)){var e=c.getData("width",d),i=c.getData("height",d);b=b<e?e:b;a=a<i?i:a}});return{width:b<0?c.width:b,height:a<0?c.height:a}}else return c}function j(b,e,d,a){var c=a=="left"||a=="right"?"y":"x";b.getPos(e)[c]+=d}function d(d,c){var b=[];a.each(d,function(a){a=f.call(a);a[0]+=c;a[1]+=c;b.push(a)});return b}function c(b,a){if(b.length==0)return a;if(a.length==0)return b;var e=b.shift(),d=a.shift();return[[e[0],d[1]]].concat(c(b,a))}function g(b,a){a=a||[];if(b.length==0)return a;var d=b.pop();return g(b,c(d,a))}function e(c,b,f,d,a){if(c.length<=a||b.length<=a)return 0;var h=c[a][1],g=b[a][0];return Math.max(e(c,b,f,d,++a)+f,h-g+d)}function h(g,f,b){function a(j,h,g){if(h.length<=g)return[];var k=h[g],i=e(j,k,f,b,0);return[i].concat(a(c(j,d(k,i)),h,++g))}return a([],g,0)}function l(a,i,h){function b(j,f,a){if(f.length<=a)return[];var k=f[a],g=-e(k,j,i,h,0);return[g].concat(b(c(d(k,g),j),f,++a))}a=f.call(a);var g=b([],a.reverse(),0);return g.reverse()}function k(g,f,e,i){var b=h(g,f,e),c=l(g,f,e);if(i=="left")c=b;else if(i=="right")b=c;for(var a=0,d=[];a<b.length;a++)d[a]=(b[a]+c[a])/2;return d}function m(o,t,a,c,b){var p=c.multitree,l=["x","y"],f=["width","height"],e=+(b=="left"||b=="right"),s=l[e],n=l[1-e],w=c.Node,r=f[e],m=f[1-e],q=c.siblingOffset,v=c.subtreeOffset,u=c.align;function h(e,B,t){var y=e.getData(r,a),C=B||e.getData(m,a),x=[],w=[],l=false,E=C+c.levelDistance;e.eachSubnode(function(d){if(d.exist&&(!p||"$orn"in d.data&&d.data.$orn==b)){if(!l)l=i(o,c,d._depth,b,a);var e=h(d,l[m],t+E);x.push(e.tree);w.push(e.extent)}});for(var z=k(w,v,q,u),f=0,F=[],A=[];f<x.length;f++){j(x[f],a,z[f],b);A.push(d(w[f],z[f]))}var D=[[-y/2,y/2]].concat(g(A));e.getPos(a)[s]=0;if(b=="top"||b=="left")e.getPos(a)[n]=t;else e.getPos(a)[n]=-t;return{tree:e,extent:D}}h(t,false,0)}return new b({compute:function(e,d){var c=e||"start",b=this.graph.getNode(this.root);a.extend(b,{drawn:true,exist:true,selected:true});t.compute(this.graph,c,this.config);(!!d||!("_depth"in b))&&this.graph.computeLevels(this.root,0,"ignore");this.computePositions(b,c)},computePositions:function(f,b){var c=this.config,e=c.multitree,h=c.align,d=h!=="center"&&c.indent,j=c.orientation,i=e?["top","right","bottom","left"]:[j],g=this;a.each(i,function(a){m(g.graph,f,b,g.config,a,b);var c=(["x","y"])[+(a=="left"||a=="right")];(function i(f){f.eachSubnode(function(g){if(g.exist&&(!e||"$orn"in g.data&&g.data.$orn==a)){g.getPos(b)[c]+=f.getPos(b)[c];if(d)g.getPos(b)[c]+=h=="left"?d:-d;i(g)}})})(f)})}})}();$jit.ST=function(){var e=[];function l(a){a=a||this.clickedNode;if(!this.config.constrained)return[];var g=this.geom,i=this.graph,h=this.canvas,j=a._depth,b=[];i.eachNode(function(c){if(c.exist&&!c.selected)if(c.isDescendantOf(a.id))c._depth<=j&&b.push(c);else b.push(c)});var f=g.getRightLevelToShow(a,h);a.eachLevel(f,f,function(a){a.exist&&!a.selected&&b.push(a)});for(var c=0;c<e.length;c++){var d=this.graph.getNode(e[c]);!d.isDescendantOf(a.id)&&b.push(d)}return b}function h(b){var a=[],c=this.config;b=b||this.clickedNode;this.clickedNode.eachLevel(0,c.levelsToShow,function(b){if(c.multitree&&!("$orn"in b.data)&&b.anySubnode(function(a){return a.exist&&!a.drawn}))a.push(b);else b.drawn&&!b.anySubnode("drawn")&&a.push(b)});return a}return new b({Implements:[k,j,g.Tree],initialize:function(h){var e=$jit.ST,g={levelsToShow:2,levelDistance:30,constrained:true,Node:{type:"rectangle"},duration:700,offsetX:0,offsetY:0};this.controller=this.config=a.merge(d("Canvas","Fx","Tree","Node","Edge","Controller","Tips","NodeStyles","Events","Navigation","Label"),g,h);var b=this.config;if(b.useCanvas){this.canvas=b.useCanvas;this.config.labelContainer=this.canvas.id+"-label"}else{if(b.background)b.background=a.merge({type:"Circles"},b.background);this.canvas=new i(this,b);this.config.labelContainer=(typeof b.injectInto=="string"?b.injectInto:b.injectInto.id)+"-label"}this.graphOptions={klass:f};this.graph=new c(this.graphOptions,this.config.Node,this.config.Edge);this.labels=new e.Label[b.Label.type](this);this.fx=new e.Plot(this,e);this.op=new e.Op(this);this.group=new e.Group(this);this.geom=new e.Geom(this);this.clickedNode=null;this.initializeExtras()},plot:function(){this.fx.plot(this.controller)},switchPosition:function(e,d,c){var f=this.geom,b=this.fx,a=this;if(!b.busy){b.busy=true;this.contract({onComplete:function(){f.switchOrientation(e);a.compute("end",false);b.busy=false;if(d=="animate")a.onClick(a.clickedNode.id,c);else d=="replot"&&a.select(a.clickedNode.id,c)}},e)}},switchAlignment:function(c,a,b){this.config.align=c;if(a=="animate")this.select(this.clickedNode.id,b);else if(a=="replot")this.onClick(this.clickedNode.id,b)},addNodeInPath:function(a){e.push(a);this.select(this.clickedNode&&this.clickedNode.id||this.root)},clearNodesInPath:function(){e.length=0;this.select(this.clickedNode&&this.clickedNode.id||this.root)},refresh:function(){this.reposition();this.select(this.clickedNode&&this.clickedNode.id||this.root)},reposition:function(){this.graph.computeLevels(this.root,0,"ignore");this.geom.setRightLevelToShow(this.clickedNode,this.canvas);this.graph.eachNode(function(a){if(a.exist)a.drawn=true});this.compute("end")},requestNodes:function(c,f){var b=a.merge(this.controller,f),e=this.config.levelsToShow;if(b.request){var d=[],g=c._depth;c.eachLevel(0,e,function(a){if(a.drawn&&!a.anySubnode()){d.push(a);a._level=e-(a._depth-g)}});this.group.requestNodes(d,b)}else b.onComplete()},contract:function(g,b){var f=this.config.orientation,c=this.geom,e=this.group;b&&c.switchOrientation(b);var d=l.call(this);b&&c.switchOrientation(f);e.contract(d,a.merge(this.controller,g))},move:function(d,c){this.compute("end",false);var b=c.Move,e={x:b.offsetX,y:b.offsetY};b.enable&&this.geom.translate(d.endPos.add(e).$scale(-1),"end");this.fx.animate(a.merge(this.controller,{modes:["linear"]},c))},expand:function(b,c){var d=h.call(this,b);this.group.expand(d,a.merge(this.controller,c))},selectPath:function(g){var f=this;this.graph.eachNode(function(a){a.selected=false});function d(b){if(b==null||b.selected)return;b.selected=true;a.each(f.group.getSiblings([b])[b.id],function(a){a.exist=true;a.drawn=true});var c=b.getParents();c=c.length>0?c[0]:null;d(c)}for(var b=0,c=[g.id].concat(e);b<c.length;b++)d(this.graph.getNode(c[b]))},setRoot:function(b,g,f){if(this.busy)return;this.busy=true;var c=this,h=this.canvas,d=this.graph.getNode(this.root),a=this.graph.getNode(b);function e(){if(this.config.multitree&&a.data.$orn){var i=a.data.$orn,e=({left:"right",right:"left",top:"bottom",bottom:"top"})[i];d.data.$orn=e;(function g(a){a.eachSubnode(function(a){if(a.id!=b){a.data.$orn=e;g(a)}})})(d);delete a.data.$orn}this.root=b;this.clickedNode=a;this.graph.computeLevels(this.root,0,"ignore");this.geom.setRightLevelToShow(a,h,{execHide:false,onShow:function(b){if(!b.drawn){b.drawn=true;b.setData("alpha",1,"end");b.setData("alpha",0);b.pos.setc(a.pos.x,a.pos.y)}}});this.compute("end");this.busy=true;this.fx.animate({modes:["linear","node-property:alpha"],onComplete:function(){c.busy=false;c.onClick(b,{onComplete:function(){f&&f.onComplete()}})}})}delete d.data.$orns;if(g=="animate"){e.call(this);c.selectPath(a)}else if(g=="replot"){e.call(this);this.select(this.root)}},addSubtree:function(d,c,b){if(c=="replot")this.op.sum(d,a.extend({type:"replot"},b||{}));else c=="animate"&&this.op.sum(d,a.extend({type:"fade:seq"},b||{}))},removeSubtree:function(g,e,d,c){var f=this.graph.getNode(g),b=[];f.eachLevel(+!e,false,function(a){b.push(a.id)});if(d=="replot")this.op.removeNode(b,a.extend({type:"replot"},c||{}));else d=="animate"&&this.op.removeNode(b,a.extend({type:"fade:seq"},c||{}))},select:function(j,g){var e=this.group,i=this.geom,d=this.graph.getNode(j),f=this.canvas,k=this.graph.getNode(this.root),c=a.merge(this.controller,g),b=this;c.onBeforeCompute(d);this.selectPath(d);this.clickedNode=d;this.requestNodes(d,{onComplete:function(){e.hide(e.prepare(l.call(b)),c);i.setRightLevelToShow(d,f);b.compute("current");b.graph.eachNode(function(b){var a=b.pos.getc(true);b.startPos.setc(a.x,a.y);b.endPos.setc(a.x,a.y);b.visited=false});var a={x:c.offsetX,y:c.offsetY};b.geom.translate(d.endPos.add(a).$scale(-1),["start","current","end"]);e.show(h.call(b));b.plot();c.onAfterCompute(b.clickedNode);c.onComplete()}})},onClick:function(e,i){var g=this.canvas,d=this,j=this.geom,f=this.config,h={Move:{enable:true,offsetX:f.offsetX||0,offsetY:f.offsetY||0},setRightLevelToShowConfig:false,onBeforeRequest:a.empty,onBeforeContract:a.empty,onBeforeMove:a.empty,onBeforeExpand:a.empty},c=a.merge(this.controller,h,i);if(!this.busy){this.busy=true;var b=this.graph.getNode(e);this.selectPath(b,this.clickedNode);this.clickedNode=b;c.onBeforeCompute(b);c.onBeforeRequest(b);this.requestNodes(b,{onComplete:function(){c.onBeforeContract(b);d.contract({onComplete:function(){j.setRightLevelToShow(b,g,c.setRightLevelToShowConfig);c.onBeforeMove(b);d.move(b,{Move:c.Move,onComplete:function(){c.onBeforeExpand(b);d.expand(b,{onComplete:function(){d.busy=false;c.onAfterCompute(e);c.onComplete()}})}})}})}})}}})}();$jit.ST.$extend=true;$jit.ST.Op=new b({Implements:c.Op});$jit.ST.Group=new b({initialize:function(a){this.viz=a;this.canvas=a.canvas;this.config=a.config;this.animation=new r;this.nodes=null},requestNodes:function(b,e){var h=0,d=b.length,g={},f=function(){e.onComplete()},c=this.viz;d==0&&f();for(var a=0;a<d;a++){g[b[a].id]=b[a];e.request(b[a].id,b[a]._level,{onComplete:function(b,a){if(a&&a.children){a.id=b;c.op.sum(a,{type:"nothing"})}if(++h==d){c.graph.computeLevels(c.root,0);f()}}})}},contract:function(c,b){var e=this.viz,d=this;c=this.prepare(c);this.animation.setOptions(a.merge(b,{$animating:false,compute:function(a){if(a==1)a=.99;d.plotStep(1-a,b,this.$animating);this.$animating="contract"},complete:function(){d.hide(c,b)}})).start()},hide:function(d,c){for(var f=this.viz,b=0;b<d.length;b++)if(true||!c||!c.request)d[b].eachLevel(1,false,function(b){b.exist&&a.extend(b,{drawn:false,exist:false})});else{var e=[];d[b].eachLevel(1,false,function(a){e.push(a.id)});f.op.removeNode(e,{type:"nothing"});f.labels.clearLabels()}c.onComplete()},expand:function(d,b){var c=this;this.show(d);this.animation.setOptions(a.merge(b,{$animating:false,compute:function(a){c.plotStep(a,b,this.$animating);this.$animating="expand"},complete:function(){c.plotStep(undefined,b,false);b.onComplete()}})).start()},show:function(b){var c=this.config;this.prepare(b);a.each(b,function(a){if(c.multitree&&!("$orn"in a.data)){delete a.data.$orns;var b=" ";a.eachSubnode(function(a){if("$orn"in a.data&&b.indexOf(a.data.$orn)<0&&a.exist&&!a.drawn)b+=a.data.$orn+" "});a.data.$orns=b}a.eachLevel(0,c.levelsToShow,function(a){if(a.exist)a.drawn=true})})},prepare:function(a){this.nodes=this.getNodesWithChildren(a);return this.nodes},getNodesWithChildren:function(a){var e=[],f=this.config,g=this.viz.root;a.sort(function(b,a){return(b._depth<=a._depth)-(b._depth>=a._depth)});for(var b=0;b<a.length;b++)if(a[b].anySubnode("exist")){for(var d=b+1,c=false;!c&&d<a.length;d++)if(!f.multitree||"$orn"in a[d].data)c=c||a[b].isDescendantOf(a[d].id);!c&&e.push(a[b])}return e},plotStep:function(k,j,l){for(var h=this.viz,n=this.config,m=h.canvas,i=m.getCtx(),d=this.nodes,b,e={},c=0;c<d.length;c++){b=d[c];e[b.id]=[];var g=n.multitree&&!("$orn"in b.data),f=g&&b.data.$orns;b.eachSubgraph(function(a){if(g&&f&&f.indexOf(a.data.$orn)>0&&a.drawn){a.drawn=false;e[b.id].push(a)}else if((!g||!f)&&a.drawn){a.drawn=false;e[b.id].push(a)}});b.drawn=true}d.length>0&&h.fx.plot();for(c in e)a.each(e[c],function(a){a.drawn=true});for(c=0;c<d.length;c++){b=d[c];i.save();h.fx.plotSubtree(b,j,k,l);i.restore()}},getSiblings:function(c){var b={};a.each(c,function(a){var d=a.getParents();if(d.length==0)b[a.id]=[a];else{var c=[];d[0].eachSubnode(function(a){c.push(a)});b[a.id]=c}});return b}});$jit.ST.Geom=new b({Implements:c.Geom,switchOrientation:function(a){this.config.orientation=a},dispatch:function(){var a=Array.prototype.slice.call(arguments),c=a.shift(),d=a.length,b=function(a){return typeof a=="function"?a():a};if(d==2)return c=="top"||c=="bottom"?b(a[0]):b(a[1]);else if(d==4)switch(c){case"top":return b(a[0]);case"right":return b(a[1]);case"bottom":return b(a[2]);case"left":return b(a[3])}return undefined},getSize:function(a,h){var e=a.data,b=this.config,g=b.siblingOffset,d=b.multitree&&"$orn"in e&&e.$orn||b.orientation,f=a.getData("width")+g,c=a.getData("height")+g;return!h?this.dispatch(d,c,f):this.dispatch(d,f,c)},getTreeBaseSize:function(a,b,e){var d=this.getSize(a,true),c=0,f=this;if(e(b,a))return d;if(b===0)return 0;a.eachSubnode(function(a){c+=f.getTreeBaseSize(a,b-1,e)});return(d>c?d:c)+this.config.subtreeOffset},getEdge:function(g,h,d){var a=function(a,b){return function(){return g.pos.add(new f(a,b))}},e=this.node,b=g.getData("width"),c=g.getData("height");if(h=="begin")if(e.align=="center")return this.dispatch(d,a(0,c/2),a(-b/2,0),a(0,-c/2),a(b/2,0));else if(e.align=="left")return this.dispatch(d,a(0,c),a(0,0),a(0,0),a(b,0));else if(e.align=="right")return this.dispatch(d,a(0,0),a(-b,0),a(0,-c),a(0,0));else throw"align: not implemented";else if(h=="end")if(e.align=="center")return this.dispatch(d,a(0,-c/2),a(b/2,0),a(0,c/2),a(-b/2,0));else if(e.align=="left")return this.dispatch(d,a(0,0),a(b,0),a(0,c),a(0,0));else if(e.align=="right")return this.dispatch(d,a(0,-c),a(0,0),a(0,0),a(-b,0));else throw"align: not implemented";},getScaledTreePosition:function(b,h){var e=this.node,d=b.getData("width"),c=b.getData("height"),g=this.config.multitree&&"$orn"in b.data&&b.data.$orn||this.config.orientation,a=function(a,c){return function(){return b.pos.add(new f(a,c)).$scale(1-h)}};if(e.align=="left")return this.dispatch(g,a(0,c),a(0,0),a(0,0),a(d,0));else if(e.align=="center")return this.dispatch(g,a(0,c/2),a(-d/2,0),a(0,-c/2),a(d/2,0));else if(e.align=="right")return this.dispatch(g,a(0,0),a(-d,0),a(0,-c),a(0,0));else throw"align: not implemented";},treeFitsInCanvas:function(a,e,d){var b=e.getSize(),g=this.config.multitree&&"$orn"in a.data&&a.data.$orn||this.config.orientation,f=this.dispatch(g,b.width,b.height),c=this.getTreeBaseSize(a,d,function(b,a){return b===0||!a.anySubnode()});return c<f}});$jit.ST.Plot=new b({Implements:c.Plot,plotSubtree:function(c,h,b,g){var d=this.viz,i=d.canvas,j=d.config;b=Math.min(Math.max(.001,b),1);if(b>=0){c.drawn=false;var f=i.getCtx(),e=d.geom.getScaledTreePosition(c,b);f.translate(e.x,e.y);f.scale(b,b)}this.plotTree(c,a.merge(h,{withLabels:true,hideLabels:!!b,plotSubtree:function(){var a=j.multitree&&!("$orn"in c.data),b=a&&c.getData("orns");return!a||b.indexOf(c.getData("orn"))>-1}}),g);if(b>=0)c.drawn=true},getAlignedPos:function(a,e,d){var f=this.node,b,c;if(f.align=="center")b={x:a.x-e/2,y:a.y-d/2};else if(f.align=="left"){c=this.config.orientation;if(c=="bottom"||c=="top")b={x:a.x-e/2,y:a.y};else b={x:a.x,y:a.y-d/2}}else if(f.align=="right"){c=this.config.orientation;if(c=="bottom"||c=="top")b={x:a.x-e/2,y:a.y-d};else b={x:a.x-e,y:a.y-d/2}}else throw"align: not implemented";return b},getOrientation:function(b){var d=this.config,c=d.orientation;if(d.multitree){var e=b.nodeFrom,a=b.nodeTo;c="$orn"in e.data&&e.data.$orn||"$orn"in a.data&&a.data.$orn}return c}});$jit.ST.Label={};$jit.ST.Label.Native=new b({Implements:c.Label.Native,renderLabel:function(g,a){var f=g.getCtx(),e=a.pos.getc(true),b=a.getData("width"),d=a.getData("height"),c=this.viz.fx.getAlignedPos(e,b,d);f.fillText(a.name,c.x+b/2,c.y+d/2)}});$jit.ST.Label.DOM=new b({Implements:c.Label.DOM,placeLabel:function(n,h,r){var m=h.pos.getc(true),l=this.viz.config,j=l.Node,d=this.viz.canvas,g=h.getData("width"),i=h.getData("height"),a=d.getSize(),b,c,o=d.translateOffsetX,s=d.translateOffsetY,q=d.scaleOffsetX,p=d.scaleOffsetY,f=m.x*q+o,e=m.y*p+s;if(j.align=="center")b={x:Math.round(f-g/2+a.width/2),y:Math.round(e-i/2+a.height/2)};else if(j.align=="left"){c=l.orientation;if(c=="bottom"||c=="top")b={x:Math.round(f-g/2+a.width/2),y:Math.round(e+a.height/2)};else b={x:Math.round(f+a.width/2),y:Math.round(e-i/2+a.height/2)}}else if(j.align=="right"){c=l.orientation;if(c=="bottom"||c=="top")b={x:Math.round(f-g/2+a.width/2),y:Math.round(e-i+a.height/2)};else b={x:Math.round(f-g+a.width/2),y:Math.round(e-i/2+a.height/2)}}else throw"align: not implemented";var k=n.style;k.left=b.x+"px";k.top=b.y+"px";k.display=this.fitsInCanvas(b,d)?"":"none";r.onPlaceLabel(n,h)}});$jit.ST.Label.SVG=new b({Implements:[$jit.ST.Label.DOM,c.Label.SVG],initialize:function(a){this.viz=a}});$jit.ST.Label.HTML=new b({Implements:[$jit.ST.Label.DOM,c.Label.HTML],initialize:function(a){this.viz=a}});$jit.ST.Plot.NodeTypes=new b({none:{render:a.empty,contains:a.lambda(false)},circle:{render:function(d,e){var b=d.getData("dim"),c=this.getAlignedPos(d.pos.getc(true),b,b),a=b/2;this.nodeHelper.circle.render("fill",{x:c.x+a,y:c.y+a},a,e)},contains:function(c,e){var b=c.getData("dim"),d=this.getAlignedPos(c.pos.getc(true),b,b),a=b/2;this.nodeHelper.circle.contains({x:d.x+a,y:d.y+a},e,a)}},square:{render:function(d,e){var b=d.getData("dim"),a=b/2,c=this.getAlignedPos(d.pos.getc(true),b,b);this.nodeHelper.square.render("fill",{x:c.x+a,y:c.y+a},a,e)},contains:function(c,e){var b=c.getData("dim"),d=this.getAlignedPos(c.pos.getc(true),b,b),a=b/2;this.nodeHelper.square.contains({x:d.x+a,y:d.y+a},e,a)}},ellipse:{render:function(c,e){var b=c.getData("width"),a=c.getData("height"),d=this.getAlignedPos(c.pos.getc(true),b,a);this.nodeHelper.ellipse.render("fill",{x:d.x+b/2,y:d.y+a/2},b,a,e)},contains:function(c,e){var b=c.getData("width"),a=c.getData("height"),d=this.getAlignedPos(c.pos.getc(true),b,a);this.nodeHelper.ellipse.contains({x:d.x+b/2,y:d.y+a/2},e,b,a)}},rectangle:{render:function(c,e){var b=c.getData("width"),a=c.getData("height"),d=this.getAlignedPos(c.pos.getc(true),b,a);this.nodeHelper.rectangle.render("fill",{x:d.x+b/2,y:d.y+a/2},b,a,e)},contains:function(c,e){var b=c.getData("width"),a=c.getData("height"),d=this.getAlignedPos(c.pos.getc(true),b,a);this.nodeHelper.rectangle.contains({x:d.x+b/2,y:d.y+a/2},e,b,a)}}});$jit.ST.Plot.EdgeTypes=new b({none:a.empty,line:{render:function(c,h){var e=this.getOrientation(c),a=c.nodeFrom,b=c.nodeTo,d=a._depth<b._depth,g=this.viz.geom.getEdge(d?a:b,"begin",e),f=this.viz.geom.getEdge(d?b:a,"end",e);this.edgeHelper.line.render(g,f,h)},contains:function(b,h){var e=this.getOrientation(b),c=b.nodeFrom,a=b.nodeTo,d=c._depth<a._depth,g=this.viz.geom.getEdge(d?c:a,"begin",e),f=this.viz.geom.getEdge(d?a:c,"end",e);return this.edgeHelper.line.contains(g,f,h,this.edge.epsilon)}},arrow:{render:function(a,i){var c=this.getOrientation(a),d=a.nodeFrom,h=a.nodeTo,e=a.getData("dim"),f=this.viz.geom.getEdge(d,"begin",c),g=this.viz.geom.getEdge(h,"end",c),b=a.data.$direction,j=b&&b.length>1&&b[0]!=d.id;this.edgeHelper.arrow.render(f,g,e,j,i)},contains:function(b,h){var e=this.getOrientation(b),c=b.nodeFrom,a=b.nodeTo,d=c._depth<a._depth,g=this.viz.geom.getEdge(d?c:a,"begin",e),f=this.viz.geom.getEdge(d?a:c,"end",e);return this.edgeHelper.arrow.contains(g,f,h,this.edge.epsilon)}},"quadratic:begin":{render:function(d,j){var g=this.getOrientation(d),f=d.nodeFrom,h=d.nodeTo,i=f._depth<h._depth,a=this.viz.geom.getEdge(i?f:h,"begin",g),b=this.viz.geom.getEdge(i?h:f,"end",g),e=d.getData("dim"),c=j.getCtx();c.beginPath();c.moveTo(a.x,a.y);switch(g){case"left":c.quadraticCurveTo(a.x+e,a.y,b.x,b.y);break;case"right":c.quadraticCurveTo(a.x-e,a.y,b.x,b.y);break;case"top":c.quadraticCurveTo(a.x,a.y+e,b.x,b.y);break;case"bottom":c.quadraticCurveTo(a.x,a.y-e,b.x,b.y)}c.stroke()}},"quadratic:end":{render:function(c,j){var f=this.getOrientation(c),e=c.nodeFrom,g=c.nodeTo,h=e._depth<g._depth,i=this.viz.geom.getEdge(h?e:g,"begin",f),a=this.viz.geom.getEdge(h?g:e,"end",f),d=c.getData("dim"),b=j.getCtx();b.beginPath();b.moveTo(i.x,i.y);switch(f){case"left":b.quadraticCurveTo(a.x-d,a.y,a.x,a.y);break;case"right":b.quadraticCurveTo(a.x+d,a.y,a.x,a.y);break;case"top":b.quadraticCurveTo(a.x,a.y-d,a.x,a.y);break;case"bottom":b.quadraticCurveTo(a.x,a.y+d,a.x,a.y)}b.stroke()}},bezier:{render:function(e,j){var g=this.getOrientation(e),f=e.nodeFrom,h=e.nodeTo,i=f._depth<h._depth,b=this.viz.geom.getEdge(i?f:h,"begin",g),a=this.viz.geom.getEdge(i?h:f,"end",g),c=e.getData("dim"),d=j.getCtx();d.beginPath();d.moveTo(b.x,b.y);switch(g){case"left":d.bezierCurveTo(b.x+c,b.y,a.x-c,a.y,a.x,a.y);break;case"right":d.bezierCurveTo(b.x-c,b.y,a.x+c,a.y,a.x,a.y);break;case"top":d.bezierCurveTo(b.x,b.y+c,a.x,a.y-c,a.x,a.y);break;case"bottom":d.bezierCurveTo(b.x,b.y-c,a.x,a.y+c,a.x,a.y)}d.stroke()}}});$jit.ST.Plot.NodeTypes.implement({"areachart-stacked":{render:function(d,G){var K=d.pos.getc(true),h=d.getData("width"),F=d.getData("height"),y=this.getAlignedPos(K,h,F),f=y.x,e=y.y,z=d.getData("stringArray"),g=d.getData("dimArray"),o=d.getData("valueArray"),w=a.reduce(o,function(a,b){return a+b[0]},0),v=a.reduce(o,function(a,b){return a+b[1]},0),l=d.getData("colorArray"),n=l.length,m=d.getData("config"),H=d.getData("gradient"),E=m.showLabels,I=m.showAggregates,j=m.Label,J=d.getData("prev"),b=G.getCtx(),p=d.getData("border");if(l&&g&&z){for(var c=0,D=g.length,i=0,k=0,u=0;c<D;c++){b.fillStyle=b.strokeStyle=l[c%n];b.save();if(H&&(g[c][0]>0||g[c][1]>0)){var s=i+g[c][0],r=k+g[c][1],x=Math.atan((r-s)/h),C=55,t=b.createLinearGradient(f+h/2,e-(s+r)/2,f+h/2+C*Math.sin(x),e-(s+r)/2+C*Math.cos(x)),A=a.rgbToHex(a.map(a.hexToRgb(l[c%n].slice(1)),function(a){return a*.85>>0}));t.addColorStop(0,l[c%n]);t.addColorStop(1,A);b.fillStyle=t}b.beginPath();b.moveTo(f,e-i);b.lineTo(f+h,e-k);b.lineTo(f+h,e-k-g[c][1]);b.lineTo(f,e-i-g[c][0]);b.lineTo(f,e-i);b.fill();b.restore();if(p){var B=p.name==z[c],L=B?.7:.8,A=a.rgbToHex(a.map(a.hexToRgb(l[c%n].slice(1)),function(a){return a*L>>0}));b.strokeStyle=A;b.lineWidth=B?4:1;b.save();b.beginPath();if(p.index===0){b.moveTo(f,e-i);b.lineTo(f,e-i-g[c][0])}else{b.moveTo(f+h,e-k);b.lineTo(f+h,e-k-g[c][1])}b.stroke();b.restore()}i+=g[c][0]||0;k+=g[c][1]||0;if(g[c][0]>0)u+=o[c][0]||0}if(J&&j.type=="Native"){b.save();b.beginPath();b.fillStyle=b.strokeStyle=j.color;b.font=j.style+" "+j.size+"px "+j.family;b.textAlign="center";b.textBaseline="middle";var q=I(d.name,w,v,d,u);q!==false&&b.fillText(q!==true?q:u,f,e-i-m.labelOffset-j.size/2,h);E(d.name,w,v,d)&&b.fillText(d.name,f,e+j.size/2+m.labelOffset);b.restore()}}},contains:function(a,b){var q=a.pos.getc(true),e=a.getData("width"),l=a.getData("height"),k=this.getAlignedPos(q,e,l),g=k.x,d=k.y,m=a.getData("dimArray"),n=b.x-g;if(b.x<g||b.x>g+e||b.y>d||b.y<d-l)return false;for(var c=0,o=m.length,f=d,h=d;c<o;c++){var i=m[c];f-=i[0];h-=i[1];var p=f+(h-f)*n/e;if(b.y>=p){var j=+(n>e/2);return{name:a.getData("stringArray")[c],color:a.getData("colorArray")[c],value:a.getData("valueArray")[c][j],index:j}}}return false}}});$jit.AreaChart=new b({st:null,colors:["#416D9C","#70A35E","#EBB056","#C74243","#83548B","#909291","#557EAA"],selected:{},busy:false,initialize:function(g){this.controller=this.config=a.merge(d("Canvas","Margin","Label","AreaChart"),{Label:{type:"Native"}},g);var c=this.config.showLabels,f=a.type(c),b=this.config.showAggregates,e=a.type(b);this.config.showLabels=f=="function"?c:a.lambda(c);this.config.showAggregates=e=="function"?b:a.lambda(b);this.initializeViz()},initializeViz:function(){var b=this.config,c=this,g=b.type.split(":")[0],f={},d=new $jit.ST({injectInto:b.injectInto,width:b.width,height:b.height,orientation:"bottom",levelDistance:0,siblingOffset:0,subtreeOffset:0,withLabels:b.Label.type!="Native",useCanvas:b.useCanvas,Label:{type:b.Label.type},Node:{overridable:true,type:"areachart-"+g,align:"left",width:1,height:1},Edge:{type:"none"},Tips:{enable:b.Tips.enable,type:"Native",force:true,onShow:function(e,d,a){var c=a;b.Tips.onShow(e,c,d)}},Events:{enable:true,type:"Native",onClick:function(f,d,e){if(!b.filterOnClick&&!b.Events.enable)return;var a=d.getContains();if(a)b.filterOnClick&&c.filter(a.name);b.Events.enable&&b.Events.onClick(a,d,e)},onRightClick:function(){if(!b.restoreOnRightClick)return;c.restore()},onMouseMove:function(d,e){if(!b.selectOnHover)return;if(d){var a=e.getContains();c.select(d.id,a.name,a.index)}else c.select(false,false,false)}},onCreateLabel:function(j,c){var k=b.Label,n=c.getData("valueArray"),l=a.reduce(n,function(a,b){return a+b[0]},0),m=a.reduce(n,function(a,b){return a+b[1]},0);if(c.getData("prev")){var g={wrapper:document.createElement("div"),aggregate:document.createElement("div"),label:document.createElement("div")},e=g.wrapper,h=g.label,i=g.aggregate,d=e.style,p=h.style,o=i.style;f[c.id]=g;e.appendChild(h);e.appendChild(i);if(!b.showLabels(c.name,l,m,c))h.style.display="none";if(!b.showAggregates(c.name,l,m,c))i.style.display="none";d.position="relative";d.overflow="visible";d.fontSize=k.size+"px";d.fontFamily=k.family;d.color=k.color;d.textAlign="center";o.position=p.position="absolute";j.style.width=c.getData("width")+"px";j.style.height=c.getData("height")+"px";h.innerHTML=c.name;j.appendChild(e)}},onPlaceLabel:function(i,c){if(!c.getData("prev"))return;var j=f[c.id],l=j.wrapper.style,d=j.label.style,g=j.aggregate.style,q=c.getData("width"),u=c.getData("height"),n=c.getData("dimArray"),e=c.getData("valueArray"),p=a.reduce(e,function(a,b){return a+b[0]},0),o=a.reduce(e,function(a,b){return a+b[1]},0),s=parseInt(l.fontSize,10),v=i.style;if(n&&e){if(b.showLabels(c.name,p,o,c))d.display="";else d.display="none";var m=b.showAggregates(c.name,p,o,c);if(m!==false)g.display="";else g.display="none";l.width=g.width=d.width=i.style.width=q+"px";g.left=d.left=-q/2+"px";for(var h=0,t=e.length,r=0,k=0;h<t;h++)if(n[h][0]>0){r+=e[h][0];k+=n[h][0]}g.top=-s-b.labelOffset+"px";d.top=b.labelOffset+k+"px";i.style.top=parseInt(i.style.top,10)-k+"px";i.style.height=l.height=k+"px";j.aggregate.innerHTML=m!==true?m:r}}}),h=d.canvas.getSize(),e=b.Margin;d.config.offsetY=-h.height/2+e.bottom+(b.showLabels&&b.labelOffset+b.Label.size);d.config.offsetX=(e.right-e.left)/2;this.delegate=d;this.canvas=this.delegate.canvas},loadJSON:function(e){for(var j=a.time(),h=[],d=this.delegate,q=a.splat(e.label),o=a.splat(e.color||this.colors),f=this.config,s=!!f.type.split(":")[1],t=f.animate,b=0,c=e.values,n=c.length;b<n-1;b++){var k=c[b],i=c[b-1],l=c[b+1],p=a.splat(c[b].values),r=a.splat(c[b+1].values),g=a.zip(p,r),v=0,u=0;h.push({id:j+k.label,name:k.label,data:{value:g,$valueArray:g,$colorArray:o,$stringArray:q,$next:l.label,$prev:i?i.label:false,$config:f,$gradient:s},children:[]})}var m={id:j+"$root",name:"",data:{$type:"none",$width:1,$height:1},children:h};d.loadJSON(m);this.normalizeDims();d.compute();d.select(d.root);t&&d.fx.animate({modes:["node-property:height:dimArray"],duration:1500})},updateJSON:function(f,h){if(this.busy)return;this.busy=true;for(var b=this.delegate,j=b.graph,g=f.label&&a.splat(f.label),e=f.values,k=this.config.animate,i=this,d={},c=0,l=e.length;c<l;c++)d[e[c].label]=e[c];j.eachNode(function(c){var b=d[c.name],h=c.getData("stringArray"),e=c.getData("valueArray"),f=c.getData("next");if(b){b.values=a.splat(b.values);a.each(e,function(c,a){c[0]=b.values[a];if(g)h[a]=g[a]});c.setData("valueArray",e)}if(f){b=d[f];b&&a.each(e,function(a,c){a[1]=b.values[c]})}});this.normalizeDims();b.compute();b.select(b.root);k&&b.fx.animate({modes:["node-property:height:dimArray"],duration:1500,onComplete:function(){i.busy=false;h&&h.onComplete()}})},filter:function(f,b){if(this.busy)return;this.busy=true;this.config.Tips.enable&&this.delegate.tips.hide();this.select(false,false,false);var d=a.splat(f),c=this.delegate.graph.getNode(this.delegate.root),e=this;this.normalizeDims();c.eachAdjacency(function(c){var b=c.nodeTo,f=b.getData("dimArray","end"),e=b.getData("stringArray");b.setData("dimArray",a.map(f,function(c,b){return a.indexOf(d,e[b])>-1?c:[0,0]}),"end")});this.delegate.fx.animate({modes:["node-property:dimArray"],duration:1500,onComplete:function(){e.busy=false;b&&b.onComplete()}})},restore:function(a){if(this.busy)return;this.busy=true;this.config.Tips.enable&&this.delegate.tips.hide();this.select(false,false,false);this.normalizeDims();var b=this;this.delegate.fx.animate({modes:["node-property:height:dimArray"],duration:1500,onComplete:function(){b.busy=false;a&&a.onComplete()}})},select:function(c,f,d){if(!this.config.selectOnHover)return;var a=this.selected;if(a.id!=c||a.name!=f||a.index!=d){a.id=c;a.name=f;a.index=d;this.delegate.graph.eachNode(function(a){a.setData("border",false)});if(c){var b=this.delegate.graph.getNode(c);b.setData("border",a);var e=d===0?"prev":"next";e=b.getData(e);if(e){b=this.delegate.graph.getByName(e);b&&b.setData("border",{name:f,index:1-d})}}this.delegate.plot()}},getLegend:function(){var d={},b;this.delegate.graph.getNode(this.delegate.root).eachAdjacency(function(a){b=a.nodeTo});var c=b.getData("colorArray"),e=c.length;a.each(b.getData("stringArray"),function(b,a){d[b]=c[a%e]});return d},getMaxValue:function(){var b=0;this.delegate.graph.eachNode(function(f){var g=f.getData("valueArray"),d=0,c=0;a.each(g,function(a){d+=+a[0];c+=+a[1]});var e=c>d?c:d;b=b>e?b:e});return b},normalizeDims:function(){var i=this.delegate.graph.getNode(this.delegate.root),h=0;i.eachAdjacency(function(){h++});var b=this.getMaxValue()||1,g=this.delegate.canvas.getSize(),d=this.config,e=d.Margin,f=d.labelOffset+d.Label.size,j=(g.width-(e.left+e.right))/h,k=d.animate,c=g.height-(e.top+e.bottom)-(d.showAggregates&&f)-(d.showLabels&&f);this.delegate.graph.eachNode(function(d){var e=0,f=0,g=[];a.each(d.getData("valueArray"),function(a){e+=+a[0];f+=+a[1];g.push([0,0])});var h=f>e?f:e;d.setData("width",j);if(k){d.setData("height",h*c/b,"end");d.setData("dimArray",a.map(d.getData("valueArray"),function(a){return[a[0]*c/b,a[1]*c/b]}),"end");var i=d.getData("dimArray");!i&&d.setData("dimArray",g)}else{d.setData("height",h*c/b);d.setData("dimArray",a.map(d.getData("valueArray"),function(a){return[a[0]*c/b,a[1]*c/b]}))}})}});d.BarChart={$extend:true,animate:true,type:"stacked",labelOffset:3,barsOffset:0,hoveredColor:"#9fd4ff",orientation:"horizontal",showAggregates:true,showLabels:true,Tips:{enable:false,onShow:a.empty,onHide:a.empty},Events:{enable:false,onClick:a.empty}};$jit.ST.Plot.NodeTypes.implement({"barchart-stacked":{render:function(c,x){var A=c.pos.getc(true),n=c.getData("width"),k=c.getData("height"),u=this.getAlignedPos(A,n,k),f=u.x,e=u.y,g=c.getData("dimArray"),z=c.getData("valueArray"),q=c.getData("colorArray"),t=q.length,w=c.getData("stringArray"),b=x.getCtx(),l={},s=c.getData("border"),D=c.getData("gradient"),i=c.getData("config"),p=i.orientation=="horizontal",y=i.showAggregates,B=i.showLabels,j=i.Label;if(q&&g&&w){for(var d=0,C=g.length,h=0,r=0;d<C;d++){b.fillStyle=b.strokeStyle=q[d%t];if(D){var o;if(p)o=b.createLinearGradient(f+h+g[d]/2,e,f+h+g[d]/2,e+k);else o=b.createLinearGradient(f,e-h-g[d]/2,f+n,e-h-g[d]/2);var v=a.rgbToHex(a.map(a.hexToRgb(q[d%t].slice(1)),function(a){return a*.5>>0}));o.addColorStop(0,v);o.addColorStop(.5,q[d%t]);o.addColorStop(1,v);b.fillStyle=o}if(p)b.fillRect(f+h,e,g[d],k);else b.fillRect(f,e-h-g[d],n,g[d]);if(s&&s.name==w[d]){l.acum=h;l.dimValue=g[d]}h+=g[d]||0;r+=z[d]||0}if(s){b.save();b.lineWidth=2;b.strokeStyle=s.color;if(p)b.strokeRect(f+l.acum+1,e+1,l.dimValue-2,k-2);else b.strokeRect(f+1,e-l.acum-l.dimValue+1,n-2,l.dimValue-2);b.restore()}if(j.type=="Native"){b.save();b.fillStyle=b.strokeStyle=j.color;b.font=j.style+" "+j.size+"px "+j.family;b.textBaseline="middle";var m=y(c.name,r,c);if(m!==false){m=m!==true?m:r;if(p){b.textAlign="right";b.fillText(m,f+h-i.labelOffset,e+k/2)}else{b.textAlign="center";b.fillText(m,f+n/2,e-k-j.size/2-i.labelOffset)}}if(B(c.name,r,c))if(p){b.textAlign="center";b.translate(f-i.labelOffset-j.size/2,e+k/2);b.rotate(Math.PI/2);b.fillText(c.name,0,0)}else{b.textAlign="center";b.fillText(c.name,f+n/2,e+j.size/2+i.labelOffset)}b.restore()}}},contains:function(a,b){var p=a.pos.getc(true),g=a.getData("width"),h=a.getData("height"),l=this.getAlignedPos(p,g,h),d=l.x,e=l.y,m=a.getData("dimArray"),n=a.getData("config"),q=b.x-d,i=n.orientation=="horizontal";if(i){if(b.x<d||b.x>d+g||b.y>e+h||b.y<e)return false}else if(b.x<d||b.x>d+g||b.y>e||b.y<e-h)return false;for(var c=0,o=m.length,f=i?d:e;c<o;c++){var j=m[c];if(i){f+=j;var k=f;if(b.x<=k)return{name:a.getData("stringArray")[c],color:a.getData("colorArray")[c],value:a.getData("valueArray")[c],label:a.name}}else{f-=j;var k=f;if(b.y>=k)return{name:a.getData("stringArray")[c],color:a.getData("colorArray")[c],value:a.getData("valueArray")[c],label:a.name}}}return false}},"barchart-grouped":{render:function(d,z){var B=d.pos.getc(true),r=d.getData("width"),q=d.getData("height"),w=this.getAlignedPos(B,r,q),f=w.x,e=w.y,g=d.getData("dimArray"),v=d.getData("valueArray"),y=v.length,o=d.getData("colorArray"),t=o.length,u=d.getData("stringArray"),b=z.getCtx(),k={},s=d.getData("border"),F=d.getData("gradient"),i=d.getData("config"),m=i.orientation=="horizontal",A=i.showAggregates,C=i.showLabels,j=i.Label,h=(m?q:r)/y;if(o&&g&&u){for(var c=0,D=y,E=0,p=0;c<D;c++){b.fillStyle=b.strokeStyle=o[c%t];if(F){var l;if(m)l=b.createLinearGradient(f+g[c]/2,e+h*c,f+g[c]/2,e+h*(c+1));else l=b.createLinearGradient(f+h*c,e-g[c]/2,f+h*(c+1),e-g[c]/2);var x=a.rgbToHex(a.map(a.hexToRgb(o[c%t].slice(1)),function(a){return a*.5>>0}));l.addColorStop(0,x);l.addColorStop(.5,o[c%t]);l.addColorStop(1,x);b.fillStyle=l}if(m)b.fillRect(f,e+h*c,g[c],h);else b.fillRect(f+h*c,e-g[c],h,g[c]);if(s&&s.name==u[c]){k.acum=h*c;k.dimValue=g[c]}E+=g[c]||0;p+=v[c]||0}if(s){b.save();b.lineWidth=2;b.strokeStyle=s.color;if(m)b.strokeRect(f+1,e+k.acum+1,k.dimValue-2,h-2);else b.strokeRect(f+k.acum+1,e-k.dimValue+1,h-2,k.dimValue-2);b.restore()}if(j.type=="Native"){b.save();b.fillStyle=b.strokeStyle=j.color;b.font=j.style+" "+j.size+"px "+j.family;b.textBaseline="middle";var n=A(d.name,p,d);if(n!==false){n=n!==true?n:p;if(m){b.textAlign="right";b.fillText(n,f+Math.max.apply(null,g)-i.labelOffset,e+q/2)}else{b.textAlign="center";b.fillText(n,f+r/2,e-Math.max.apply(null,g)-j.size/2-i.labelOffset)}}if(C(d.name,p,d))if(m){b.textAlign="center";b.translate(f-i.labelOffset-j.size/2,e+q/2);b.rotate(Math.PI/2);b.fillText(d.name,0,0)}else{b.textAlign="center";b.fillText(d.name,f+r/2,e+j.size/2+i.labelOffset)}b.restore()}}},contains:function(b,a){var n=b.pos.getc(true),g=b.getData("width"),f=b.getData("height"),l=this.getAlignedPos(n,g,f),d=l.x,e=l.y,j=b.getData("dimArray"),p=j.length,q=b.getData("config"),r=a.x-d,k=q.orientation=="horizontal",i=(k?f:g)/p;if(k){if(a.x<d||a.x>d+g||a.y>e+f||a.y<e)return false}else if(a.x<d||a.x>d+g||a.y>e||a.y<e-f)return false;for(var c=0,o=j.length;c<o;c++){var m=j[c];if(k){var h=e+i*c;if(a.x<=d+m&&a.y>=h&&a.y<=h+i)return{name:b.getData("stringArray")[c],color:b.getData("colorArray")[c],value:b.getData("valueArray")[c],label:b.name}}else{var h=d+i*c;if(a.x>=h&&a.x<=h+i&&a.y>=e-m)return{name:b.getData("stringArray")[c],color:b.getData("colorArray")[c],value:b.getData("valueArray")[c],label:b.name}}}return false}}});$jit.BarChart=new b({st:null,colors:["#416D9C","#70A35E","#EBB056","#C74243","#83548B","#909291","#557EAA"],selected:{},busy:false,initialize:function(g){this.controller=this.config=a.merge(d("Canvas","Margin","Label","BarChart"),{Label:{type:"Native"}},g);var c=this.config.showLabels,f=a.type(c),b=this.config.showAggregates,e=a.type(b);this.config.showLabels=f=="function"?c:a.lambda(c);this.config.showAggregates=e=="function"?b:a.lambda(b);this.initializeViz()},initializeViz:function(){var b=this.config,f=this,i=b.type.split(":")[0],g=b.orientation=="horizontal",e={},d=new $jit.ST({injectInto:b.injectInto,width:b.width,height:b.height,orientation:g?"left":"bottom",levelDistance:0,siblingOffset:b.barsOffset,subtreeOffset:0,withLabels:b.Label.type!="Native",useCanvas:b.useCanvas,Label:{type:b.Label.type},Node:{overridable:true,type:"barchart-"+i,align:"left",width:1,height:1},Edge:{type:"none"},Tips:{enable:b.Tips.enable,type:"Native",force:true,onShow:function(e,d,a){var c=a;b.Tips.onShow(e,c,d)}},Events:{enable:true,type:"Native",onClick:function(e,a,c){if(!b.Events.enable)return;var d=a.getContains();b.Events.onClick(d,a,c)},onMouseMove:function(c,d){if(!b.hoveredColor)return;if(c){var a=d.getContains();f.select(c.id,a.name,a.index)}else f.select(false,false,false)}},onCreateLabel:function(i,c){var l=b.Label,o=c.getData("valueArray"),n=a.reduce(o,function(a,b){return a+b},0),g={wrapper:document.createElement("div"),aggregate:document.createElement("div"),label:document.createElement("div")},f=g.wrapper,k=g.label,m=g.aggregate,d=f.style,j=k.style,h=m.style;e[c.id]=g;f.appendChild(k);f.appendChild(m);if(!b.showLabels(c.name,n,c))j.display="none";if(!b.showAggregates(c.name,n,c))h.display="none";d.position="relative";d.overflow="visible";d.fontSize=l.size+"px";d.fontFamily=l.family;d.color=l.color;d.textAlign="center";h.position=j.position="absolute";i.style.width=c.getData("width")+"px";i.style.height=c.getData("height")+"px";h.left=j.left="0px";k.innerHTML=c.name;i.appendChild(f)},onPlaceLabel:function(f,a){if(!e[a.id])return;var l=e[a.id],h=l.wrapper.style,c=l.label.style,d=l.aggregate.style,q=b.type.split(":")[0]=="grouped",o=b.orientation=="horizontal",i=a.getData("dimArray"),n=a.getData("valueArray"),r=q&&o?Math.max.apply(null,i):a.getData("width"),g=q&&!o?Math.max.apply(null,i):a.getData("height"),p=parseInt(h.fontSize,10),t=f.style;if(i&&n){h.width=d.width=c.width=f.style.width=r+"px";for(var k=0,s=n.length,j=0;k<s;k++)if(i[k]>0)j+=n[k];if(b.showLabels(a.name,j,a))c.display="";else c.display="none";var m=b.showAggregates(a.name,j,a);if(m!==false)d.display="";else d.display="none";if(b.orientation=="horizontal"){d.textAlign="right";c.textAlign="left";c.textIndex=d.textIndent=b.labelOffset+"px";d.top=c.top=(g-p)/2+"px";f.style.height=h.height=g+"px"}else{d.top=-p-b.labelOffset+"px";c.top=b.labelOffset+g+"px";f.style.top=parseInt(f.style.top,10)-g+"px";f.style.height=h.height=g+"px"}l.aggregate.innerHTML=m!==true?m:j}}}),h=d.canvas.getSize(),c=b.Margin;if(g){d.config.offsetX=h.width/2-c.left-(b.showLabels&&b.labelOffset+b.Label.size);d.config.offsetY=(c.bottom-c.top)/2}else{d.config.offsetY=-h.height/2+c.bottom+(b.showLabels&&b.labelOffset+b.Label.size);d.config.offsetX=(c.right-c.left)/2}this.delegate=d;this.canvas=this.delegate.canvas},loadJSON:function(e){if(this.busy)return;this.busy=true;for(var j=a.time(),i=[],b=this.delegate,o=a.splat(e.label),n=a.splat(e.color||this.colors),d=this.config,p=!!d.type.split(":")[1],r=d.animate,q=d.orientation=="horizontal",g=this,c=0,f=e.values,m=f.length;c<m;c++){var k=f[c],h=a.splat(f[c].values),s=0;i.push({id:j+k.label,name:k.label,data:{value:h,$valueArray:h,$colorArray:n,$stringArray:o,$gradient:p,$config:d},children:[]})}var l={id:j+"$root",name:"",data:{$type:"none",$width:1,$height:1},children:i};b.loadJSON(l);this.normalizeDims();b.compute();b.select(b.root);if(r)if(q)b.fx.animate({modes:["node-property:width:dimArray"],duration:1500,onComplete:function(){g.busy=false}});else b.fx.animate({modes:["node-property:height:dimArray"],duration:1500,onComplete:function(){g.busy=false}});else this.busy=false},updateJSON:function(d,c){if(this.busy)return;this.busy=true;this.select(false,false,false);var b=this.delegate,f=b.graph,i=d.values,h=this.config.animate,e=this,g=this.config.orientation=="horizontal";a.each(i,function(c){var b=f.getByName(c.label);if(b){b.setData("valueArray",a.splat(c.values));d.label&&b.setData("stringArray",a.splat(d.label))}});this.normalizeDims();b.compute();b.select(b.root);if(h)if(g)b.fx.animate({modes:["node-property:width:dimArray"],duration:1500,onComplete:function(){e.busy=false;c&&c.onComplete()}});else b.fx.animate({modes:["node-property:height:dimArray"],duration:1500,onComplete:function(){e.busy=false;c&&c.onComplete()}})},select:function(b,c){if(!this.config.hoveredColor)return;var a=this.selected;if(a.id!=b||a.name!=c){a.id=b;a.name=c;a.color=this.config.hoveredColor;this.delegate.graph.eachNode(function(c){if(b==c.id)c.setData("border",a);else c.setData("border",false)});this.delegate.plot()}},getLegend:function(){var d={},b;this.delegate.graph.getNode(this.delegate.root).eachAdjacency(function(a){b=a.nodeTo});var c=b.getData("colorArray"),e=c.length;a.each(b.getData("stringArray"),function(b,a){d[b]=c[a%e]});return d},getMaxValue:function(){var b=0,c=this.config.type.split(":")[0]=="stacked";this.delegate.graph.eachNode(function(f){var e=f.getData("valueArray"),d=0;if(!e)return;if(c)a.each(e,function(a){d+=+a});else d=Math.max.apply(null,e);b=b>d?b:d});return b},setBarType:function(a){this.config.type=a;this.delegate.config.Node.type="barchart-"+a.split(":")[0]},normalizeDims:function(){var m=this.delegate.graph.getNode(this.delegate.root),g=0;m.eachAdjacency(function(){g++});var e=this.getMaxValue()||1,k=this.delegate.canvas.getSize(),b=this.config,d=b.Margin,j=d.left+d.right,h=d.top+d.bottom,c=b.orientation=="horizontal",n=(k[c?"height":"width"]-(c?h:j)-(g-1)*b.barsOffset)/g,o=b.animate,f=k[c?"width":"height"]-(c?j:h)-(!c&&b.showAggregates&&b.Label.size+b.labelOffset)-(b.showLabels&&b.Label.size+b.labelOffset),l=c?"height":"width",i=c?"width":"height";this.delegate.graph.eachNode(function(b){var c=0,d=[];a.each(b.getData("valueArray"),function(a){c+=+a;d.push(0)});b.setData(l,n);if(o){b.setData(i,c*f/e,"end");b.setData("dimArray",a.map(b.getData("valueArray"),function(a){return a*f/e}),"end");var g=b.getData("dimArray");!g&&b.setData("dimArray",d)}else{b.setData(i,c*f/e);b.setData("dimArray",a.map(b.getData("valueArray"),function(a){return a*f/e}))}})}});d.PieChart={$extend:true,animate:true,offset:25,sliceOffset:0,labelOffset:3,type:"stacked",hoveredColor:"#9fd4ff",Events:{enable:false,onClick:a.empty},Tips:{enable:false,onShow:a.empty,onHide:a.empty},showLabels:true,resizeLabels:false,updateHeights:false};g.Radial=new b({compute:function(d){var b=a.splat(d||["current","start","end"]);t.compute(this.graph,b,this.config);this.graph.computeLevels(this.root,0,"ignore");var c=this.createLevelDistanceFunc();this.computeAngularWidths(b);this.computePositions(b,c)},computePositions:function(h,g){for(var a=h,e=this.graph,b=e.getNode(this.root),d=this.parent,j=this.config,c=0,i=a.length;c<i;c++){var f=a[c];b.setPos(p(0,0),f);b.setData("span",Math.PI*2,f)}b.angleSpan={begin:0,end:2*Math.PI};e.eachBFS(this.root,function(e){var r=e.angleSpan.end-e.angleSpan.begin,i=e.angleSpan.begin,s=g(e),m=0,c=[],f={};e.eachSubnode(function(d){m+=d._treeAngularWidth;for(var e=0,h=a.length;e<h;e++){var b=a[e],g=d.getData("dim",b);f[b]=b in f?g>f[b]?g:f[b]:g}c.push(d)},"ignore");d&&d.id==e.id&&c.length>0&&c[0].dist&&c.sort(function(b,a){return(b.dist>=a.dist)-(b.dist<=a.dist)});for(var k=0,q=c.length;k<q;k++){var b=c[k];if(!b._flag){for(var j=b._treeAngularWidth/m*r,n=i+j/2,l=0,o=a.length;l<o;l++){var h=a[l];b.setPos(p(n,s),h);b.setData("span",j,h);b.setData("dim-quotient",b.getData("dim",h)/f[h],h)}b.angleSpan={begin:i,end:i+j};i+=j}}},"ignore")},setAngularWidthForNodes:function(a){this.graph.eachBFS(this.root,function(b,c){var d=b.getData("angularWidth",a[0])||5;b._angularWidth=d/c},"ignore")},setSubtreesAngularWidth:function(){var a=this;this.graph.eachNode(function(b){a.setSubtreeAngularWidth(b)},"ignore")},setSubtreeAngularWidth:function(a){var d=this,c=a._angularWidth,b=0;a.eachSubnode(function(a){d.setSubtreeAngularWidth(a);b+=a._treeAngularWidth},"ignore");a._treeAngularWidth=Math.max(c,b)},computeAngularWidths:function(a){this.setAngularWidthForNodes(a);this.setSubtreesAngularWidth()}});$jit.Sunburst=new b({Implements:[k,j,g.Radial],initialize:function(f){var e=$jit.Sunburst,g={interpolation:"linear",levelDistance:100,Node:{type:"multipie",height:0},Edge:{type:"none"},Label:{textAlign:"start",textBaseline:"middle"}};this.controller=this.config=a.merge(d("Canvas","Node","Edge","Fx","Tips","NodeStyles","Events","Navigation","Controller","Label"),g,f);var b=this.config;if(b.useCanvas){this.canvas=b.useCanvas;this.config.labelContainer=this.canvas.id+"-label"}else{if(b.background)b.background=a.merge({type:"Circles"},b.background);this.canvas=new i(this,b);this.config.labelContainer=(typeof b.injectInto=="string"?b.injectInto:b.injectInto.id)+"-label"}this.graphOptions={klass:h,Node:{selected:false,exist:true,drawn:true}};this.graph=new c(this.graphOptions,this.config.Node,this.config.Edge);this.labels=new e.Label[b.Label.type](this);this.fx=new e.Plot(this,e);this.op=new e.Op(this);this.json=null;this.root=null;this.rotated=null;this.busy=false;this.initializeExtras()},createLevelDistanceFunc:function(){var a=this.config.levelDistance;return function(b){return(b._depth+1)*a}},refresh:function(){this.compute();this.plot()},reposition:function(){this.compute("end")},rotate:function(b,d,a){var c=b.getPos(a.property||"current").getp(true).theta;this.rotated=b;this.rotateAngle(-c,d,a)},rotateAngle:function(f,b,c){var g=this,e=a.merge(this.config,c||{},{modes:["polar"]}),d=c.property||(b==="animate"?"end":"current");b==="animate"&&this.fx.animation.pause();this.graph.eachNode(function(b){var a=b.getPos(d);a.theta+=f;if(a.theta<0)a.theta+=Math.PI*2});if(b=="animate")this.fx.animate(e);else if(b=="replot"){this.fx.plot();this.busy=false}},plot:function(){this.fx.plot()}});$jit.Sunburst.$extend=true;(function(d){d.Op=new b({Implements:c.Op});d.Plot=new b({Implements:c.Plot});d.Label={};d.Label.Native=new b({Implements:c.Label.Native,initialize:function(a){this.viz=a;this.label=a.config.Label;this.config=a.config},renderLabel:function(m,a,n){var l=a.getData("span");if(l<Math.PI/2&&Math.tan(l)*this.config.levelDistance*a._depth<10)return;var c=m.getCtx(),d=c.measureText(a.name);if(a.id==this.viz.root)var g=-d.width/2,k=0,o=0,p=0;else{var h=5,p=n.levelDistance-h,f=a.pos.clone();f.rho+=h;var b=f.getp(true),i=f.getc(true),g=i.x,k=i.y,e=Math.PI,j=b.theta>e/2&&b.theta<3*e/2,o=j?b.theta+e:b.theta;if(j){g-=Math.abs(Math.cos(b.theta)*d.width);k+=Math.sin(b.theta)*d.width}else if(a.id==this.viz.root)g-=d.width/2}c.save();c.translate(g,k);c.rotate(o);c.fillText(a.name,0,0);c.restore()}});d.Label.SVG=new b({Implements:c.Label.SVG,initialize:function(a){this.viz=a},placeLabel:function(a,b,m){var k=b.pos.getc(true),o=this.viz,l=this.viz.canvas,h=l.getSize(),g={x:Math.round(k.x+h.width/2),y:Math.round(k.y+h.height/2)};a.setAttribute("x",g.x);a.setAttribute("y",g.y);var d=a.getBBox();if(d){var f=a.getAttribute("x"),j=a.getAttribute("y"),e=b.pos.getp(true),c=Math.PI,i=e.theta>c/2&&e.theta<3*c/2;if(i){a.setAttribute("x",f-d.width);a.setAttribute("y",j-d.height)}else b.id==o.root&&a.setAttribute("x",f-d.width/2);var n=i?e.theta+c:e.theta;b._depth&&a.setAttribute("transform","rotate("+n*360/(2*c)+" "+f+" "+j+")")}m.onPlaceLabel(a,b)}});d.Label.HTML=new b({Implements:c.Label.HTML,initialize:function(a){this.viz=a},placeLabel:function(g,b,j){var a=b.pos.clone(),h=this.viz.canvas,f=b.getData("height"),i=(f||b._depth==0?f:this.viz.config.levelDistance)/2,e=h.getSize();a.rho+=i;a=a.getc(true);var d={x:Math.round(a.x+e.width/2),y:Math.round(a.y+e.height/2)},c=g.style;c.left=d.x+"px";c.top=d.y+"px";c.display=this.fitsInCanvas(d,h)?"":"none";j.onPlaceLabel(g,b)}});d.Plot.NodeTypes=new b({none:{render:a.empty,contains:a.lambda(false),anglecontains:function(e,f){var d=e.getData("span")/2,g=e.pos.theta,b=g-d,c=g+d;if(b<0)b+=Math.PI*2;var a=Math.atan2(f.y,f.x);if(a<0)a+=Math.PI*2;return b>c?a>b&&a<=Math.PI*2||a<c:a>b&&a<c}},pie:{render:function(b,l){var i=b.getData("span")/2,k=b.pos.theta,d=k-i,e=k+i,g=b.pos.getp(true),c=new h(g.rho,d),j=c.getc(true);c.theta=e;var f=c.getc(true),a=l.getCtx();a.beginPath();a.moveTo(0,0);a.lineTo(j.x,j.y);a.moveTo(0,0);a.lineTo(f.x,f.y);a.moveTo(0,0);a.arc(0,0,g.rho*b.getData("dim-quotient"),d,e,false);a.fill()},contains:function(b,a){if(this.nodeTypes.none.anglecontains.call(this,b,a)){var d=Math.sqrt(a.x*a.x+a.y*a.y),e=this.config.levelDistance,c=b._depth;return d<=e*c}return false}},multipie:{render:function(d,p){var m=d.getData("height"),g=m?m:this.config.levelDistance,l=d.getData("span")/2,i=d.pos.theta,c=i-l,e=i+l,f=d.pos.getp(true),b=new h(f.rho,c),o=b.getc(true);b.theta=e;var k=b.getc(true);b.rho+=g;var n=b.getc(true);b.theta=c;var j=b.getc(true),a=p.getCtx();a.moveTo(0,0);a.beginPath();a.arc(0,0,f.rho,c,e,false);a.arc(0,0,f.rho+g,e,c,true);a.moveTo(o.x,o.y);a.lineTo(j.x,j.y);a.moveTo(k.x,k.y);a.lineTo(n.x,n.y);a.fill();if(d.collapsed){a.save();a.lineWidth=2;a.moveTo(0,0);a.beginPath();a.arc(0,0,f.rho+g+5,e-.01,c+.01,true);a.stroke();a.restore()}},contains:function(b,a){if(this.nodeTypes.none.anglecontains.call(this,b,a)){var e=Math.sqrt(a.x*a.x+a.y*a.y),d=b.getData("height"),g=d?d:this.config.levelDistance,f=this.config.levelDistance,c=b._depth;return e>=f*c&&e<=f*c+g}return false}},"gradient-multipie":{render:function(b,g){var f=g.getCtx(),e=b.getData("height"),h=e?e:this.config.levelDistance,c=f.createRadialGradient(0,0,b.getPos().rho,0,0,b.getPos().rho+h),i=a.hexToRgb(b.getData("color")),d=[];a.each(i,function(a){d.push(parseInt(a*.5,10))});var j=a.rgbToHex(d);c.addColorStop(0,j);c.addColorStop(1,b.getData("color"));f.fillStyle=c;this.nodeTypes.multipie.render.call(this,b,g)},contains:function(a,b){return this.nodeTypes.multipie.contains.call(this,a,b)}},"gradient-pie":{render:function(b,f){var d=f.getCtx(),c=d.createRadialGradient(0,0,0,0,0,b.getPos().rho),h=a.hexToRgb(b.getData("color")),e=[];a.each(h,function(a){e.push(parseInt(a*.5,10))});var g=a.rgbToHex(e);c.addColorStop(1,g);c.addColorStop(0,b.getData("color"));d.fillStyle=c;this.nodeTypes.pie.render.call(this,b,f)},contains:function(a,b){return this.nodeTypes.pie.contains.call(this,a,b)}}});d.Plot.EdgeTypes=new b({none:a.empty,line:{render:function(a,c){var b=a.nodeFrom.pos.getc(true),d=a.nodeTo.pos.getc(true);this.edgeHelper.line.render(b,d,c)},contains:function(a,b){var d=a.nodeFrom.pos.getc(true),c=a.nodeTo.pos.getc(true);return this.edgeHelper.line.contains(d,c,b,this.edge.epsilon)}},arrow:{render:function(a,g){var e=a.nodeFrom.pos.getc(true),d=a.nodeTo.pos.getc(true),c=a.getData("dim"),b=a.data.$direction,f=b&&b.length>1&&b[0]!=a.nodeFrom.id;this.edgeHelper.arrow.render(e,d,c,f,g)},contains:function(a,b){var d=a.nodeFrom.pos.getc(true),c=a.nodeTo.pos.getc(true);return this.edgeHelper.arrow.contains(d,c,b,this.edge.epsilon)}},hyperline:{render:function(d,e){var c=d.nodeFrom.pos.getc(),b=d.nodeTo.pos.getc(),a=Math.max(c.norm(),b.norm());this.edgeHelper.hyperline.render(c.$scale(1/a),b.$scale(1/a),a,e)},contains:a.lambda(false)}})})($jit.Sunburst);$jit.Sunburst.Plot.NodeTypes.implement({"piechart-stacked":{render:function(c,C){var Q=c.pos.getp(true),r=c.getData("dimArray"),E=c.getData("valueArray"),u=c.getData("colorArray"),K=u.length,y=c.getData("stringArray"),z=c.getData("span")/2,x=c.pos.theta,g=x-z,k=x+z,d=new h,b=C.getCtx(),e={},D=c.getData("gradient"),s=c.getData("border"),f=c.getData("config"),B=f.showLabels,v=f.resizeLabels,o=f.Label,l=f.sliceOffset*Math.cos((g+k)/2),n=f.sliceOffset*Math.sin((g+k)/2);if(u&&r&&y){for(var j=0,A=r.length,i=0,H=0;j<A;j++){var m=r[j],q=u[j%K];if(m<=0)continue;b.fillStyle=b.strokeStyle=q;if(D&&m){var p=b.createRadialGradient(l,n,i+f.sliceOffset,l,n,i+m+f.sliceOffset),I=a.hexToRgb(q),G=a.map(I,function(a){return a*.8>>0}),J=a.rgbToHex(G);p.addColorStop(0,q);p.addColorStop(.5,q);p.addColorStop(1,J);b.fillStyle=p}d.rho=i+f.sliceOffset;d.theta=g;var M=d.getc(true);d.theta=k;var O=d.getc(true);d.rho+=m;var N=d.getc(true);d.theta=g;var P=d.getc(true);b.beginPath();b.arc(l,n,i+.01,g,k,false);b.arc(l,n,i+m+.01,k,g,true);b.fill();if(s&&s.name==y[j]){e.acum=i;e.dimValue=r[j];e.begin=g;e.end=k}i+=m||0;H+=E[j]||0}if(s){b.save();b.globalCompositeOperation="source-over";b.lineWidth=2;b.strokeStyle=s.color;var L=g<k?1:-1;b.beginPath();b.arc(l,n,e.acum+.01+1,e.begin,e.end,false);b.arc(l,n,e.acum+e.dimValue+.01-1,e.end,e.begin,true);b.closePath();b.stroke();b.restore()}if(B&&o.type=="Native"){b.save();b.fillStyle=b.strokeStyle=o.color;var F=v?c.getData("normalizedDim"):1,t=o.size*F>>0;t=t<+v?+v:t;b.font=o.style+" "+t+"px "+o.family;b.textBaseline="middle";b.textAlign="center";d.rho=i+f.labelOffset+f.sliceOffset;d.theta=c.pos.theta;var w=d.getc(true);b.fillText(c.name,w.x,w.y);b.restore()}}},contains:function(a,c){if(this.nodeTypes.none.anglecontains.call(this,a,c)){var e=Math.sqrt(c.x*c.x+c.y*c.y),k=this.config.levelDistance,j=a._depth,g=a.getData("config");if(e<=k*j+g.sliceOffset)for(var f=a.getData("dimArray"),b=0,i=f.length,d=g.sliceOffset;b<i;b++){var h=f[b];if(e>=d&&e<=d+h)return{name:a.getData("stringArray")[b],color:a.getData("colorArray")[b],value:a.getData("valueArray")[b],label:a.name};d+=h}return false}return false}}});$jit.PieChart=new b({sb:null,colors:["#416D9C","#70A35E","#EBB056","#C74243","#83548B","#909291","#557EAA"],selected:{},busy:false,initialize:function(b){this.controller=this.config=a.merge(d("Canvas","PieChart","Label"),{Label:{type:"Native"}},b);this.initializeViz()},initializeViz:function(){var a=this.config,c=this,e=a.type.split(":")[0],b=new $jit.Sunburst({injectInto:a.injectInto,width:a.width,height:a.height,useCanvas:a.useCanvas,withLabels:a.Label.type!="Native",Label:{type:a.Label.type},Node:{overridable:true,type:"piechart-"+e,width:1,height:1},Edge:{type:"none"},Tips:{enable:a.Tips.enable,type:"Native",force:true,onShow:function(e,d,b){var c=b;a.Tips.onShow(e,c,d)}},Events:{enable:true,type:"Native",onClick:function(e,b,c){if(!a.Events.enable)return;var d=b.getContains();a.Events.onClick(d,b,c)},onMouseMove:function(d,e){if(!a.hoveredColor)return;if(d){var b=e.getContains();c.select(d.id,b.name,b.index)}else c.select(false,false,false)}},onCreateLabel:function(d,e){var c=a.Label;if(a.showLabels){var b=d.style;b.fontSize=c.size+"px";b.fontFamily=c.family;b.color=c.color;b.textAlign="center";d.innerHTML=e.name}},onPlaceLabel:function(i,b){if(!a.showLabels)return;var l=b.pos.getp(true),f=b.getData("dimArray"),p=b.getData("span")/2,m=b.pos.theta,t=m-p,q=m+p,j=new h,v=a.showLabels,e=a.resizeLabels,r=a.Label;if(f){for(var g=0,s=f.length,o=0;g<s;g++)o+=f[g];var u=e?b.getData("normalizedDim"):1,d=r.size*u>>0;d=d<+e?+e:d;i.style.fontSize=d+"px";j.rho=o+a.labelOffset+a.sliceOffset;j.theta=(t+q)/2;var l=j.getc(true),k=c.canvas.getSize(),n={x:Math.round(l.x+k.width/2),y:Math.round(l.y+k.height/2)};i.style.left=n.x+"px";i.style.top=n.y+"px"}}}),d=b.canvas.getSize(),f=Math.min;b.config.levelDistance=f(d.width,d.height)/2-a.offset-a.sliceOffset;this.delegate=b;this.canvas=this.delegate.canvas;this.canvas.getCtx().globalCompositeOperation="lighter"},loadJSON:function(f){for(var j=a.time(),i=[],e=this.delegate,k=a.splat(f.label),n=k.length,d=a.splat(f.color||this.colors),r=d.length,g=this.config,q=!!g.type.split(":")[1],s=g.animate,p=n==1,b=0,l=f.values,o=l.length;b<o;b++){var h=l[b],c=a.splat(h.values);i.push({id:j+h.label,name:h.label,data:{value:c,$valueArray:c,$colorArray:p?a.splat(d[b%r]):d,$stringArray:k,$gradient:q,$config:g,$angularWidth:a.reduce(c,function(a,b){return a+b})},children:[]})}var m={id:j+"$root",name:"",data:{$type:"none",$width:1,$height:1},children:i};e.loadJSON(m);this.normalizeDims();e.refresh();s&&e.fx.animate({modes:["node-property:dimArray"],duration:1500})},updateJSON:function(c,d){if(this.busy)return;this.busy=true;var b=this.delegate,f=b.graph,h=c.values,g=this.config.animate,e=this;a.each(h,function(d){var b=f.getByName(d.label),e=a.splat(d.values);if(b){b.setData("valueArray",e);b.setData("angularWidth",a.reduce(e,function(a,b){return a+b}));c.label&&b.setData("stringArray",a.splat(c.label))}});this.normalizeDims();if(g){b.compute("end");b.fx.animate({modes:["node-property:dimArray:span","linear"],duration:1500,onComplete:function(){e.busy=false;d&&d.onComplete()}})}else b.refresh()},select:function(b,c){if(!this.config.hoveredColor)return;var a=this.selected;if(a.id!=b||a.name!=c){a.id=b;a.name=c;a.color=this.config.hoveredColor;this.delegate.graph.eachNode(function(c){if(b==c.id)c.setData("border",a);else c.setData("border",false)});this.delegate.plot()}},getLegend:function(){var d={},b;this.delegate.graph.getNode(this.delegate.root).eachAdjacency(function(a){b=a.nodeTo});var c=b.getData("colorArray"),e=c.length;a.each(b.getData("stringArray"),function(b,a){d[b]=c[a%e]});return d},getMaxValue:function(){var b=0;this.delegate.graph.eachNode(function(e){var d=e.getData("valueArray"),c=0;a.each(d,function(a){c+=+a});b=b>c?b:c});return b},normalizeDims:function(){var f=this.delegate.graph.getNode(this.delegate.root),e=0;f.eachAdjacency(function(){e++});var c=this.getMaxValue()||1,d=this.config,g=d.animate,b=this.delegate.config.levelDistance;this.delegate.graph.eachNode(function(e){var i=0,f=[];a.each(e.getData("valueArray"),function(a){i+=+a;f.push(1)});var h=f.length==1&&!d.updateHeights;if(g){e.setData("dimArray",a.map(e.getData("valueArray"),function(a){return h?b:a*b/c}),"end");var j=e.getData("dimArray");!j&&e.setData("dimArray",f)}else e.setData("dimArray",a.map(e.getData("valueArray"),function(a){return h?b:a*b/c}));e.setData("normalizedDim",i/c)})}});g.TM={};g.TM.SliceAndDice=new b({compute:function(b){var a=this.graph.getNode(this.clickedNode&&this.clickedNode.id||this.root);this.controller.onBeforeCompute(a);var e=this.canvas.getSize(),f=this.config,c=e.width,d=e.height;this.graph.computeLevels(this.root,0,"ignore");a.getPos(b).setc(-c/2,-d/2);a.setData("width",c,b);a.setData("height",d+f.titleHeight,b);this.computePositions(a,a,this.layout.orientation,b);this.controller.onAfterCompute(a)},computePositions:function(e,b,f,a){var p=0;e.eachSubnode(function(b){p+=b.getData("area",a)});var g=this.config,u=g.offset,n=e.getData("width",a),m=Math.max(e.getData("height",a)-g.titleHeight,0),r=e==b?1:b.getData("area",a)/p,k,j,l,d,c,i,h,s=f=="h";if(s){f="v";k=m;j=n*r;l="height";d="y";c="x";i=g.titleHeight;h=0}else{f="h";k=m*r;j=n;l="width";d="x";c="y";i=0;h=g.titleHeight}var q=b.getPos(a);b.setData("width",j,a);b.setData("height",k,a);var o=0,t=this;b.eachSubnode(function(e){var g=e.getPos(a);g[d]=o+q[d]+i;g[c]=q[c]+h;t.computePositions(b,e,f,a);o+=e.getData(l,a)})}});g.TM.Area={compute:function(b){b=b||"current";var a=this.graph.getNode(this.clickedNode&&this.clickedNode.id||this.root);this.controller.onBeforeCompute(a);var e=this.config,g=this.canvas.getSize(),d=g.width,c=g.height,f=e.offset,j=d-f,i=c-f;this.graph.computeLevels(this.root,0,"ignore");a.getPos(b).setc(-d/2,-c/2);a.setData("width",d,b);a.setData("height",c,b);var h={top:-c/2+e.titleHeight,left:-d/2,width:j,height:i-e.titleHeight};this.computePositions(a,h,b);this.controller.onAfterCompute(a)},computeDim:function(b,a,c,e,f,d){if(b.length+a.length==1){var i=b.length==1?b:a;this.layoutLast(i,c,e,d);return}if(b.length>=2&&a.length==0)a=[b.shift()];if(b.length==0){a.length>0&&this.layoutRow(a,c,e,d);return}var g=b[0];if(f(a,c)>=f([g].concat(a),c))this.computeDim(b.slice(1),a.concat([g]),c,e,f,d);else{var h=this.layoutRow(a,c,e,d);this.computeDim(b,[],h.dim,h,f,d)}},worstAspectRatio:function(d,i){if(!d||d.length==0)return Number.MAX_VALUE;for(var f=0,c=0,b=Number.MAX_VALUE,e=0,j=d.length;e<j;e++){var a=d[e]._area;f+=a;b=b<a?b:a;c=c>a?c:a}var h=i*i,g=f*f;return Math.max(h*c/g,g/(h*b))},avgAspectRatio:function(a,b){if(!a||a.length==0)return Number.MAX_VALUE;for(var e=0,d=0,f=a.length;d<f;d++){var g=a[d]._area,c=g/b;e+=b>c?b/c:c/b}return e/f},layoutLast:function(d,e,a,b){var c=d[0];c.getPos(b).setc(a.left,a.top);c.setData("width",a.width,b);c.setData("height",a.height,b)}};g.TM.Squarified=new b({Implements:g.TM.Area,computePositions:function(g,a,b){var f=this.config,i=Math.max;if(a.width>=a.height)this.layout.orientation="h";else this.layout.orientation="v";var d=g.getSubnodes([1,1],"ignore");if(d.length>0){this.processChildrenLayout(g,d,a,b);for(var e=0,k=d.length;e<k;e++){var c=d[e],j=f.offset,l=i(c.getData("height",b)-j-f.titleHeight,0),m=i(c.getData("width",b)-j,0),h=c.getPos(b);a={width:m,height:l,top:h.y+f.titleHeight,left:h.x};this.computePositions(c,a,b)}}},processChildrenLayout:function(l,b,c,f){for(var h=c.width*c.height,g=b.length,e=0,d=[],a=0;a<g;a++){d[a]=parseFloat(b[a].getData("area",f));e+=d[a]}for(a=0;a<g;a++)b[a]._area=h*d[a]/e;var k=this.layout.horizontal()?c.height:c.width;b.sort(function(b,a){var c=a._area-b._area;return c?c:a.id==b.id?0:a.id<b.id?1:-1});var j=[b[0]],i=b.slice(1);this.squarify(i,j,k,c,f)},squarify:function(d,b,c,a,e){this.computeDim(d,b,c,a,this.worstAspectRatio,e)},layoutRow:function(c,b,a,d){return this.layout.horizontal()?this.layoutV(c,b,a,d):this.layoutH(c,b,a,d)},layoutV:function(e,n,b,h){var l=0,i=function(a){return a};a.each(e,function(a){l+=a._area});for(var f=i(l/n),k=0,d=0,m=e.length;d<m;d++){var j=i(e[d]._area/f),g=e[d];g.getPos(h).setc(b.left,b.top+k);g.setData("width",f,h);g.setData("height",j,h);k+=j}var c={height:b.height,width:b.width-f,top:b.top,left:b.left+f};c.dim=Math.min(c.width,c.height);c.dim!=c.height&&this.layout.change();return c},layoutH:function(h,g,b,i){var j=0;a.each(h,function(a){j+=a._area});for(var e=j/g,m=b.top,k=0,f=0,l=h.length;f<l;f++){var d=h[f],g=d._area/e;d.getPos(i).setc(b.left+k,m);d.setData("width",g,i);d.setData("height",e,i);k+=g}var c={height:b.height-e,width:b.width,top:b.top+e,left:b.left};c.dim=Math.min(c.width,c.height);c.dim!=c.width&&this.layout.change();return c}});g.TM.Strip=new b({Implements:g.TM.Area,computePositions:function(g,e,a){var c=g.getSubnodes([1,1],"ignore"),f=this.config,i=Math.max;if(c.length>0){this.processChildrenLayout(g,c,e,a);for(var d=0,k=c.length;d<k;d++){var b=c[d],j=f.offset,l=i(b.getData("height",a)-j-f.titleHeight,0),m=i(b.getData("width",a)-j,0),h=b.getPos(a);e={width:m,height:l,top:h.y+f.titleHeight,left:h.x};this.computePositions(b,e,a)}}},processChildrenLayout:function(l,c,b,f){for(var k=b.width*b.height,g=c.length,e=0,d=[],a=0;a<g;a++){d[a]=+c[a].getData("area",f);e+=d[a]}for(a=0;a<g;a++)c[a]._area=k*d[a]/e;var j=this.layout.horizontal()?b.width:b.height,i=[c[0]],h=c.slice(1);this.stripify(h,i,j,b,f)},stripify:function(d,b,c,a,e){this.computeDim(d,b,c,a,this.avgAspectRatio,e)},layoutRow:function(c,b,a,d){return this.layout.horizontal()?this.layoutH(c,b,a,d):this.layoutV(c,b,a,d)},layoutV:function(h,g,b,i){var k=0;a.each(h,function(a){k+=a._area});for(var d=k/g,j=0,e=0,l=h.length;e<l;e++){var c=h[e],f=c._area/d;c.getPos(i).setc(b.left,b.top+(g-f-j));c.setData("width",d,i);c.setData("height",f,i);j+=f}return{height:b.height,width:b.width-d,top:b.top,left:b.left+d,dim:g}},layoutH:function(f,h,b,g){var i=0;a.each(f,function(a){i+=a._area});for(var d=i/h,m=b.height-d,k=0,e=0,l=f.length;e<l;e++){var c=f[e],j=c._area/d;c.getPos(g).setc(b.left+k,b.top+m);c.setData("width",j,g);c.setData("height",d,g);k+=j}return{height:b.height-d,width:b.width,top:b.top,left:b.left,dim:h}}});g.Icicle=new b({compute:function(b){b=b||"current";var a=this.graph.getNode(this.root),i=this.config,k=this.canvas.getSize(),e=k.width,d=k.height,m=i.offset,l=i.constrained?i.levelsToShow:Number.MAX_VALUE;this.controller.onBeforeCompute(a);c.Util.computeLevels(this.graph,a.id,0,"ignore");var g=0;c.Util.eachLevel(a,0,false,function(b,a){if(a>g)g=a});var h=this.graph.getNode(this.clickedNode&&this.clickedNode.id||a.id),f=Math.min(g,l-1),j=h._depth;if(this.layout.horizontal())this.computeSubtree(h,-e/2,-d/2,e/(f+1),d,j,f,b);else this.computeSubtree(h,-e/2,-d/2,e,d/(f+1),j,f,b)},computeSubtree:function(h,i,g,k,j,n,m,f){h.getPos(f).setc(i,g);h.setData("width",k,f);h.setData("height",j,f);var d,p=0,l=0,b=c.Util.getSubnodes(h,[1,1],"ignore");if(!b.length)return;a.each(b,function(a){l+=a.getData("dim")});for(var e=0,o=b.length;e<o;e++)if(this.layout.horizontal()){d=j*b[e].getData("dim")/l;this.computeSubtree(b[e],i+k,g,k,d,n,m,f);g+=d}else{d=k*b[e].getData("dim")/l;this.computeSubtree(b[e],i,g+j,d,j,n,m,f);i+=d}}});$jit.Icicle=new b({Implements:[k,j,g.Icicle],layout:{orientation:"h",vertical:function(){return this.orientation=="v"},horizontal:function(){return this.orientation=="h"},change:function(){this.orientation=this.vertical()?"h":"v"}},initialize:function(e){var g={animate:false,orientation:"h",offset:2,levelsToShow:Number.MAX_VALUE,constrained:false,Node:{type:"rectangle",overridable:true},Edge:{type:"none"},Label:{type:"Native"},duration:700,fps:45},h=d("Canvas","Node","Edge","Fx","Tips","NodeStyles","Events","Navigation","Controller","Label");this.controller=this.config=a.merge(h,g,e);this.layout.orientation=this.config.orientation;var b=this.config;if(b.useCanvas){this.canvas=b.useCanvas;this.config.labelContainer=this.canvas.id+"-label"}else{this.canvas=new i(this,b);this.config.labelContainer=(typeof b.injectInto=="string"?b.injectInto:b.injectInto.id)+"-label"}this.graphOptions={klass:f,Node:{selected:false,exist:true,drawn:true}};this.graph=new c(this.graphOptions,this.config.Node,this.config.Edge,this.config.Label);this.labels=new $jit.Icicle.Label[this.config.Label.type](this);this.fx=new $jit.Icicle.Plot(this,$jit.Icicle);this.op=new $jit.Icicle.Op(this);this.group=new $jit.Icicle.Group(this);this.clickedNode=null;this.initializeExtras()},refresh:function(){var a=this.config.Label.type;if(a!="Native"){var b=this;this.graph.eachNode(function(a){b.labels.hideLabel(a,false)})}this.compute();this.plot()},plot:function(){this.fx.plot(this.config)},enter:function(b){if(this.busy)return;this.busy=true;var a=this,d=this.config,e={onComplete:function(){d.request&&a.compute();if(d.animate){a.graph.nodeList.setDataset(["current","end"],{alpha:[1,0]});c.Util.eachSubgraph(b,function(a){a.setData("alpha",1,"end")},"ignore");a.fx.animate({duration:500,modes:["node-property:alpha"],onComplete:function(){a.clickedNode=b;a.compute("end");a.fx.animate({modes:["linear","node-property:width:height"],duration:1e3,onComplete:function(){a.busy=false;a.clickedNode=b}})}})}else{a.clickedNode=b;a.busy=false;a.refresh()}}};if(d.request)this.requestNodes(clickedNode,e);else e.onComplete()},out:function(){if(this.busy)return;var a=this,d=c.Util,h=this.config,f=this.graph,i=d.getParents(f.getNode(this.clickedNode&&this.clickedNode.id||this.root)),b=i[0],g=b,e=this.clickedNode;this.busy=true;this.events.hoveredNode=false;if(!b){this.busy=false;return}callback={onComplete:function(){a.clickedNode=b;if(h.request)a.requestNodes(b,{onComplete:function(){a.compute();a.plot();a.busy=false}});else{a.compute();a.plot();a.busy=false}}};if(h.animate){this.clickedNode=g;this.compute("end");this.clickedNode=e;this.fx.animate({modes:["linear","node-property:width:height"],duration:1e3,onComplete:function(){a.clickedNode=g;f.nodeList.setDataset(["current","end"],{alpha:[0,1]});d.eachSubgraph(e,function(a){a.setData("alpha",1)},"ignore");a.fx.animate({duration:500,modes:["node-property:alpha"],onComplete:function(){callback.onComplete()}})}})}else callback.onComplete()},requestNodes:function(f,h){var b=a.merge(this.controller,h),e=this.config.constrained?this.config.levelsToShow:Number.MAX_VALUE;if(b.request){var d=[],g=f._depth;c.Util.eachLevel(f,0,e,function(a){if(a.drawn&&!c.Util.anySubnode(a)){d.push(a);a._level=a._depth-g;if(this.config.constrained)a._level=e-a._level}});this.group.requestNodes(d,b)}else b.onComplete()}});$jit.Icicle.Op=new b({Implements:c.Op});$jit.Icicle.Group=new b({initialize:function(a){this.viz=a;this.canvas=a.canvas;this.config=a.config},requestNodes:function(b,f){var i=0,e=b.length,h={},g=function(){f.onComplete()},d=this.viz;e==0&&g();for(var a=0;a<e;a++){h[b[a].id]=b[a];f.request(b[a].id,b[a]._level,{onComplete:function(b,a){if(a&&a.children){a.id=b;d.op.sum(a,{type:"nothing"})}if(++i==e){c.Util.computeLevels(d.graph,d.root,0);g()}}})}}});$jit.Icicle.Plot=new b({Implements:c.Plot,plot:function(c,f){c=c||this.viz.controller;var b=this.viz,e=b.graph,d=e.getNode(b.clickedNode&&b.clickedNode.id||b.root),g=d._depth;b.canvas.clear();this.plotTree(d,a.merge(c,{withLabels:true,hideLabels:false,plotSubtree:function(c,a){return!b.config.constrained||a._depth-g<b.config.levelsToShow}}),f)}});$jit.Icicle.Label={};$jit.Icicle.Label.Native=new b({Implements:c.Label.Native,renderLabel:function(g,a){var d=g.getCtx(),e=a.getData("width"),c=a.getData("height"),f=a.getLabelData("size"),h=d.measureText(a.name);if(c<f*1.5||e<h.width)return;var b=a.pos.getc(true);d.fillText(a.name,b.x+e/2,b.y+c/2)}});$jit.Icicle.Label.SVG=new b({Implements:c.Label.SVG,initialize:function(a){this.viz=a},placeLabel:function(a,b,f){var d=b.pos.getc(true),g=this.viz.canvas,e=g.getSize(),c={x:Math.round(d.x+e.width/2),y:Math.round(d.y+e.height/2)};a.setAttribute("x",c.x);a.setAttribute("y",c.y);f.onPlaceLabel(a,b)}});$jit.Icicle.Label.HTML=new b({Implements:c.Label.HTML,initialize:function(a){this.viz=a},placeLabel:function(f,b,g){var d=b.pos.getc(true),h=this.viz.canvas,e=h.getSize(),c={x:Math.round(d.x+e.width/2),y:Math.round(d.y+e.height/2)},a=f.style;a.left=c.x+"px";a.top=c.y+"px";a.display="";g.onPlaceLabel(f,b)}});$jit.Icicle.Plot.NodeTypes=new b({none:{render:a.empty},rectangle:{render:function(f,o){var m=this.viz.config,b=m.offset,d=f.getData("width"),c=f.getData("height"),h=f.getData("border"),g=f.pos.getc(true),j=g.x+b/2,i=g.y+b/2,e=o.getCtx();if(d-b<2||c-b<2)return;if(m.cushion){var l=f.getData("color"),k=e.createRadialGradient(j+(d-b)/2,i+(c-b)/2,1,j+(d-b)/2,i+(c-b)/2,d<c?c:d),n=a.rgbToHex(a.map(a.hexToRgb(l),function(a){return a*.3>>0}));k.addColorStop(0,l);k.addColorStop(1,n);e.fillStyle=k}if(h){e.strokeStyle=h;e.lineWidth=3}e.fillRect(j,i,Math.max(0,d-b),Math.max(0,c-b));h&&e.strokeRect(g.x,g.y,d,c)},contains:function(a,e){if(this.viz.clickedNode&&!$jit.Graph.Util.isDescendantOf(a,this.viz.clickedNode.id))return false;var d=a.pos.getc(true),c=a.getData("width"),b=a.getData("height");return this.nodeHelper.rectangle.contains({x:d.x+c/2,y:d.y+b/2},e,c,b)}}});$jit.Icicle.Plot.EdgeTypes=new b({none:a.empty});g.ForceDirected=new b({getOptions:function(){var c=this.canvas.getSize(),a=c.width,b=c.height,d=0;this.graph.eachNode(function(){d++});var e=a*b/d,g=Math.sqrt(e),f=this.config.levelDistance;return{width:a,height:b,tstart:a*.1,nodef:function(a){return e/(a||1)},edgef:function(a){return g*(a-f)}}},compute:function(d,e){var b=a.splat(d||["current","start","end"]),c=this.getOptions();t.compute(this.graph,b,this.config);this.graph.computeLevels(this.root,0,"ignore");this.graph.eachNode(function(d){a.each(b,function(g){var e=d.getPos(g);if(e.equals(f.KER)){e.x=c.width/5*(Math.random()-.5);e.y=c.height/5*(Math.random()-.5)}d.disp={};a.each(b,function(a){d.disp[a]=m(0,0)})})});this.computePositions(b,c,e)},computePositions:function(e,b,d){var a=this.config.iterations,c=0,g=this;if(d)(function f(){for(var i=d.iter,h=0;h<i;h++){b.t=b.tstart;if(a)b.t*=1-c++/(a-1);g.computePositionStep(e,b);if(a&&c>=a){d.onComplete();return}}d.onStep(Math.round(c/(a-1)*100));setTimeout(f,1)})();else for(;c<a;c++){b.t=b.tstart*(1-c/(a-1));this.computePositionStep(e,b)}},computePositionStep:function(e,d){var c=this.graph,f=Math.min,h=Math.max,b=m(0,0);c.eachNode(function(f){a.each(e,function(a){f.disp[a].x=0;f.disp[a].y=0});c.eachNode(function(c){c.id!=f.id&&a.each(e,function(a){var g=f.getPos(a),e=c.getPos(a);b.x=g.x-e.x;b.y=g.y-e.y;var h=b.norm()||1;f.disp[a].$add(b.$scale(d.nodef(h)/h))})})});var j=!!c.getNode(this.root).visited;c.eachNode(function(c){c.eachAdjacency(function(g){var f=g.nodeTo;!!f.visited===j&&a.each(e,function(a){var g=c.getPos(a),e=f.getPos(a);b.x=g.x-e.x;b.y=g.y-e.y;var h=b.norm()||1;c.disp[a].$add(b.$scale(-d.edgef(h)/h));f.disp[a].$add(b.$scale(-1))})});c.visited=!j});var i=d.t,k=d.width/2,g=d.height/2;c.eachNode(function(b){a.each(e,function(a){var c=b.disp[a],d=c.norm()||1,a=b.getPos(a);a.$add(m(c.x*f(Math.abs(c.x),i)/d,c.y*f(Math.abs(c.y),i)/d));a.x=f(k,h(-k,a.x));a.y=f(g,h(-g,a.y))})})}});$jit.ForceDirected=new b({Implements:[k,j,g.ForceDirected],initialize:function(g){var e=$jit.ForceDirected,h={iterations:50,levelDistance:50};this.controller=this.config=a.merge(d("Canvas","Node","Edge","Fx","Tips","NodeStyles","Events","Navigation","Controller","Label"),h,g);var b=this.config;if(b.useCanvas){this.canvas=b.useCanvas;this.config.labelContainer=this.canvas.id+"-label"}else{if(b.background)b.background=a.merge({type:"Circles"},b.background);this.canvas=new i(this,b);this.config.labelContainer=(typeof b.injectInto=="string"?b.injectInto:b.injectInto.id)+"-label"}this.graphOptions={klass:f,Node:{selected:false,exist:true,drawn:true}};this.graph=new c(this.graphOptions,this.config.Node,this.config.Edge);this.labels=new e.Label[b.Label.type](this);this.fx=new e.Plot(this,e);this.op=new e.Op(this);this.json=null;this.busy=false;this.initializeExtras()},refresh:function(){this.compute();this.plot()},reposition:function(){this.compute("end")},computeIncremental:function(b){b=a.merge({iter:20,property:"end",onStep:a.empty,onComplete:a.empty},b||{});this.config.onBeforeCompute(this.graph.getNode(this.root));this.compute(b.property,b)},plot:function(){this.fx.plot()},animate:function(b){this.fx.animate(a.merge({modes:["linear"]},b||{}))}});$jit.ForceDirected.$extend=true;(function(d){d.Op=new b({Implements:c.Op});d.Plot=new b({Implements:c.Plot});d.Label={};d.Label.Native=new b({Implements:c.Label.Native});d.Label.SVG=new b({Implements:c.Label.SVG,initialize:function(a){this.viz=a},placeLabel:function(b,d,g){var f=d.pos.getc(true),a=this.viz.canvas,k=a.translateOffsetX,j=a.translateOffsetY,i=a.scaleOffsetX,h=a.scaleOffsetY,e=a.getSize(),c={x:Math.round(f.x*i+k+e.width/2),y:Math.round(f.y*h+j+e.height/2)};b.setAttribute("x",c.x);b.setAttribute("y",c.y);g.onPlaceLabel(b,d)}});d.Label.HTML=new b({Implements:c.Label.HTML,initialize:function(a){this.viz=a},placeLabel:function(g,d,i){var f=d.pos.getc(true),a=this.viz.canvas,h=a.translateOffsetX,l=a.translateOffsetY,k=a.scaleOffsetX,j=a.scaleOffsetY,e=a.getSize(),b={x:Math.round(f.x*k+h+e.width/2),y:Math.round(f.y*j+l+e.height/2)},c=g.style;c.left=b.x+"px";c.top=b.y+"px";c.display=this.fitsInCanvas(b,a)?"":"none";i.onPlaceLabel(g,d)}});d.Plot.NodeTypes=new b({none:{render:a.empty,contains:a.lambda(false)},circle:{render:function(a,c){var b=a.pos.getc(true),d=a.getData("dim");this.nodeHelper.circle.render("fill",b,d,c)},contains:function(a,b){var d=a.pos.getc(true),c=a.getData("dim");return this.nodeHelper.circle.contains(d,b,c)}},ellipse:{render:function(a,d){var b=a.pos.getc(true),e=a.getData("width"),c=a.getData("height");this.nodeHelper.ellipse.render("fill",b,e,c,d)},contains:function(a,c){var b=a.pos.getc(true),e=a.getData("width"),d=a.getData("height");return this.nodeHelper.ellipse.contains(b,c,e,d)}},square:{render:function(a,c){var b=a.pos.getc(true),d=a.getData("dim");this.nodeHelper.square.render("fill",b,d,c)},contains:function(a,b){var d=a.pos.getc(true),c=a.getData("dim");return this.nodeHelper.square.contains(d,b,c)}},rectangle:{render:function(a,d){var b=a.pos.getc(true),e=a.getData("width"),c=a.getData("height");this.nodeHelper.rectangle.render("fill",b,e,c,d)},contains:function(a,c){var b=a.pos.getc(true),e=a.getData("width"),d=a.getData("height");return this.nodeHelper.rectangle.contains(b,c,e,d)}},triangle:{render:function(a,c){var b=a.pos.getc(true),d=a.getData("dim");this.nodeHelper.triangle.render("fill",b,d,c)},contains:function(a,b){var d=a.pos.getc(true),c=a.getData("dim");return this.nodeHelper.triangle.contains(d,b,c)}},star:{render:function(a,c){var b=a.pos.getc(true),d=a.getData("dim");this.nodeHelper.star.render("fill",b,d,c)},contains:function(a,b){var d=a.pos.getc(true),c=a.getData("dim");return this.nodeHelper.star.contains(d,b,c)}}});d.Plot.EdgeTypes=new b({none:a.empty,line:{render:function(a,c){var b=a.nodeFrom.pos.getc(true),d=a.nodeTo.pos.getc(true);this.edgeHelper.line.render(b,d,c)},contains:function(a,b){var d=a.nodeFrom.pos.getc(true),c=a.nodeTo.pos.getc(true);return this.edgeHelper.line.contains(d,c,b,this.edge.epsilon)}},arrow:{render:function(a,g){var e=a.nodeFrom.pos.getc(true),d=a.nodeTo.pos.getc(true),c=a.getData("dim"),b=a.data.$direction,f=b&&b.length>1&&b[0]!=a.nodeFrom.id;this.edgeHelper.arrow.render(e,d,c,f,g)},contains:function(a,b){var d=a.nodeFrom.pos.getc(true),c=a.nodeTo.pos.getc(true);return this.edgeHelper.arrow.contains(d,c,b,this.edge.epsilon)}}})})($jit.ForceDirected);$jit.TM={};var e=$jit.TM;$jit.TM.$extend=true;e.Base={layout:{orientation:"h",vertical:function(){return this.orientation=="v"},horizontal:function(){return this.orientation=="h"},change:function(){this.orientation=this.vertical()?"h":"v"}},initialize:function(g){var h={orientation:"h",titleHeight:13,offset:2,levelsToShow:0,constrained:false,animate:false,Node:{type:"rectangle",overridable:true,width:3,height:3,color:"#444"},Label:{textAlign:"center",textBaseline:"top"},Edge:{type:"none"},duration:700,fps:45};this.controller=this.config=a.merge(d("Canvas","Node","Edge","Fx","Controller","Tips","NodeStyles","Events","Navigation","Label"),h,g);this.layout.orientation=this.config.orientation;var b=this.config;if(b.useCanvas){this.canvas=b.useCanvas;this.config.labelContainer=this.canvas.id+"-label"}else{if(b.background)b.background=a.merge({type:"Circles"},b.background);this.canvas=new i(this,b);this.config.labelContainer=(typeof b.injectInto=="string"?b.injectInto:b.injectInto.id)+"-label"}this.graphOptions={klass:f,Node:{selected:false,exist:true,drawn:true}};this.graph=new c(this.graphOptions,this.config.Node,this.config.Edge);this.labels=new e.Label[b.Label.type](this);this.fx=new e.Plot(this);this.op=new e.Op(this);this.group=new e.Group(this);this.geom=new e.Geom(this);this.clickedNode=null;this.busy=false;this.initializeExtras()},refresh:function(){if(this.busy)return;this.busy=true;var b=this;if(this.config.animate){this.compute("end");this.config.levelsToShow>0&&this.geom.setRightLevelToShow(this.graph.getNode(this.clickedNode&&this.clickedNode.id||this.root));this.fx.animate(a.merge(this.config,{modes:["linear","node-property:width:height"],onComplete:function(){b.busy=false}}))}else{var c=this.config.Label.type;if(c!="Native"){var b=this;this.graph.eachNode(function(a){b.labels.hideLabel(a,false)})}this.busy=false;this.compute();this.config.levelsToShow>0&&this.geom.setRightLevelToShow(this.graph.getNode(this.clickedNode&&this.clickedNode.id||this.root));this.plot()}},plot:function(){this.fx.plot()},leaf:function(a){return a.getSubnodes([1,1],"ignore").length==0},enter:function(c){if(this.busy)return;this.busy=true;var a=this,b=this.config,f=this.graph,d=c,g=this.clickedNode,e={onComplete:function(){b.levelsToShow>0&&a.geom.setRightLevelToShow(c);(b.levelsToShow>0||b.request)&&a.compute();if(b.animate){f.nodeList.setData("alpha",0,"end");c.eachSubgraph(function(a){a.setData("alpha",1,"end")},"ignore");a.fx.animate({duration:500,modes:["node-property:alpha"],onComplete:function(){a.clickedNode=d;a.compute("end");a.clickedNode=g;a.fx.animate({modes:["linear","node-property:width:height"],duration:1e3,onComplete:function(){a.busy=false;a.clickedNode=d}})}})}else{a.busy=false;a.clickedNode=c;a.refresh()}}};if(b.request)this.requestNodes(d,e);else e.onComplete()},out:function(){if(this.busy)return;this.busy=true;this.events.hoveredNode=false;var a=this,c=this.config,e=this.graph,g=e.getNode(this.clickedNode&&this.clickedNode.id||this.root).getParents(),b=g[0],f=b,d=this.clickedNode;if(!b){this.busy=false;return}callback={onComplete:function(){a.clickedNode=b;if(c.request)a.requestNodes(b,{onComplete:function(){a.compute();a.plot();a.busy=false}});else{a.compute();a.plot();a.busy=false}}};c.levelsToShow>0&&this.geom.setRightLevelToShow(b);if(c.animate){this.clickedNode=f;this.compute("end");this.clickedNode=d;this.fx.animate({modes:["linear","node-property:width:height"],duration:1e3,onComplete:function(){a.clickedNode=f;e.eachNode(function(a){a.setDataset(["current","end"],{alpha:[0,1]})},"ignore");d.eachSubgraph(function(a){a.setData("alpha",1)},"ignore");a.fx.animate({duration:500,modes:["node-property:alpha"],onComplete:function(){callback.onComplete()}})}})}else callback.onComplete()},requestNodes:function(e,g){var b=a.merge(this.controller,g),d=this.config.levelsToShow;if(b.request){var c=[],f=e._depth;e.eachLevel(0,d,function(a){var b=d-(a._depth-f);if(a.drawn&&!a.anySubnode()&&b>0){c.push(a);a._level=b}});this.group.requestNodes(c,b)}else b.onComplete()},reposition:function(){this.compute("end")}};e.Op=new b({Implements:c.Op,initialize:function(a){this.viz=a}});e.Geom=new b({Implements:c.Geom,getRightLevelToShow:function(){return this.viz.config.levelsToShow},setRightLevelToShow:function(a){var b=this.getRightLevelToShow(),c=this.viz.labels;a.eachLevel(0,b+1,function(d){var e=d._depth-a._depth;if(e>b){d.drawn=false;d.exist=false;d.ignore=true;c.hideLabel(d,false)}else{d.drawn=true;d.exist=true;delete d.ignore}});a.drawn=true;delete a.ignore}});e.Group=new b({initialize:function(a){this.viz=a;this.canvas=a.canvas;this.config=a.config},requestNodes:function(b,e){var h=0,d=b.length,g={},f=function(){e.onComplete()},c=this.viz;d==0&&f();for(var a=0;a<d;a++){g[b[a].id]=b[a];e.request(b[a].id,b[a]._level,{onComplete:function(b,a){if(a&&a.children){a.id=b;c.op.sum(a,{type:"nothing"})}if(++h==d){c.graph.computeLevels(c.root,0);f()}}})}}});e.Plot=new b({Implements:c.Plot,initialize:function(a){this.viz=a;this.config=a.config;this.node=this.config.Node;this.edge=this.config.Edge;this.animation=new r;this.nodeTypes=new e.Plot.NodeTypes;this.edgeTypes=new e.Plot.EdgeTypes;this.labels=a.labels},plot:function(d,c){var b=this.viz,e=b.graph;b.canvas.clear();this.plotTree(e.getNode(b.clickedNode&&b.clickedNode.id||b.root),a.merge(b.config,d||{},{withLabels:true,hideLabels:false,plotSubtree:function(a){return a.anySubnode("exist")}}),c)}});e.Label={};e.Label.Native=new b({Implements:c.Label.Native,initialize:function(a){this.config=a.config;this.leaf=a.leaf},renderLabel:function(g,a){if(!this.leaf(a)&&!this.config.titleHeight)return;var b=a.pos.getc(true),f=g.getCtx(),c=a.getData("width"),i=a.getData("height"),e=b.x+c/2,d=b.y;f.fillText(a.name,e,d,c)}});e.Label.SVG=new b({Implements:c.Label.SVG,initialize:function(a){this.viz=a;this.leaf=a.leaf;this.config=a.config},placeLabel:function(b,c,g){var e=c.pos.getc(true),a=this.viz.canvas,k=a.translateOffsetX,j=a.translateOffsetY,i=a.scaleOffsetX,h=a.scaleOffsetY,d=a.getSize(),f={x:Math.round(e.x*i+k+d.width/2),y:Math.round(e.y*h+j+d.height/2)};b.setAttribute("x",f.x);b.setAttribute("y",f.y);if(!this.leaf(c)&&!this.config.titleHeight)b.style.display="none";g.onPlaceLabel(b,c)}});e.Label.HTML=new b({Implements:c.Label.HTML,initialize:function(a){this.viz=a;this.leaf=a.leaf;this.config=a.config},placeLabel:function(d,a,j){var h=a.pos.getc(true),c=this.viz.canvas,l=c.translateOffsetX,k=c.translateOffsetY,i=c.scaleOffsetX,g=c.scaleOffsetY,f=c.getSize(),e={x:Math.round(h.x*i+l+f.width/2),y:Math.round(h.y*g+k+f.height/2)},b=d.style;b.left=e.x+"px";b.top=e.y+"px";b.width=a.getData("width")*i+"px";b.height=a.getData("height")*g+"px";b.zIndex=a._depth*100;b.display="";if(!this.leaf(a)&&!this.config.titleHeight)d.style.display="none";j.onPlaceLabel(d,a)}});e.Plot.NodeTypes=new b({none:{render:a.empty},rectangle:{render:function(g,q){var o=this.viz.leaf(g),l=this.config,b=l.offset,n=l.titleHeight,f=g.pos.getc(true),d=g.getData("width"),e=g.getData("height"),h=g.getData("border"),c=q.getCtx(),j=f.x+b/2,i=f.y+b/2;if(d<=b||e<=b)return;if(o){if(l.cushion){var k=c.createRadialGradient(j+(d-b)/2,i+(e-b)/2,1,j+(d-b)/2,i+(e-b)/2,d<e?e:d),m=g.getData("color"),p=a.rgbToHex(a.map(a.hexToRgb(m),function(a){return a*.2>>0}));k.addColorStop(0,m);k.addColorStop(1,p);c.fillStyle=k}c.fillRect(j,i,d-b,e-b);if(h){c.save();c.strokeStyle=h;c.strokeRect(j,i,d-b,e-b);c.restore()}}else if(n>0){c.fillRect(f.x+b/2,f.y+b/2,d-b,n-b);if(h){c.save();c.strokeStyle=h;c.strokeRect(f.x+b/2,f.y+b/2,d-b,e-b);c.restore()}}},contains:function(a,e){if(this.viz.clickedNode&&!a.isDescendantOf(this.viz.clickedNode.id)||a.ignore)return false;var b=a.pos.getc(true),d=a.getData("width"),f=this.viz.leaf(a),c=f?a.getData("height"):this.config.titleHeight;return this.nodeHelper.rectangle.contains({x:b.x+d/2,y:b.y+c/2},e,d,c)}}});e.Plot.EdgeTypes=new b({none:a.empty});e.SliceAndDice=new b({Implements:[k,j,e.Base,g.TM.SliceAndDice]});e.Squarified=new b({Implements:[k,j,e.Base,g.TM.Squarified]});e.Strip=new b({Implements:[k,j,e.Base,g.TM.Strip]});$jit.RGraph=new b({Implements:[k,j,g.Radial],initialize:function(f){var e=$jit.RGraph,g={interpolation:"linear",levelDistance:100};this.controller=this.config=a.merge(d("Canvas","Node","Edge","Fx","Controller","Tips","NodeStyles","Events","Navigation","Label"),g,f);var b=this.config;if(b.useCanvas){this.canvas=b.useCanvas;this.config.labelContainer=this.canvas.id+"-label"}else{if(b.background)b.background=a.merge({type:"Circles"},b.background);this.canvas=new i(this,b);this.config.labelContainer=(typeof b.injectInto=="string"?b.injectInto:b.injectInto.id)+"-label"}this.graphOptions={klass:h,Node:{selected:false,exist:true,drawn:true}};this.graph=new c(this.graphOptions,this.config.Node,this.config.Edge);this.labels=new e.Label[b.Label.type](this);this.fx=new e.Plot(this,e);this.op=new e.Op(this);this.json=null;this.root=null;this.busy=false;this.parent=false;this.initializeExtras()},createLevelDistanceFunc:function(){var a=this.config.levelDistance;return function(b){return(b._depth+1)*a}},refresh:function(){this.compute();this.plot()},reposition:function(){this.compute("end")},plot:function(){this.fx.plot()},getNodeAndParentAngle:function(g){var a=false,d=this.graph.getNode(g),c=d.getParents(),b=c.length>0?c[0]:false;if(b){var h=b.pos.getc(),f=d.pos.getc(),e=h.add(f.scale(-1));a=Math.atan2(e.y,e.x);if(a<0)a+=2*Math.PI}return{parent:b,theta:a}},tagChildren:function(e,f){if(e.angleSpan){var a=[];e.eachAdjacency(function(b){a.push(b.nodeTo)},"ignore");for(var d=a.length,c=0;c<d&&f!=a[c].id;c++);for(var b=(c+1)%d,g=0;f!=a[b].id;b=(b+1)%d)a[b].dist=g++}},onClick:function(b,c){if(this.root!=b&&!this.busy){this.busy=true;this.root=b;var g=this;this.controller.onBeforeCompute(this.graph.getNode(b));var d=this.getNodeAndParentAngle(b);this.tagChildren(d.parent,b);this.parent=d.parent;this.compute("end");var f=d.theta-d.parent.endPos.theta;this.graph.eachNode(function(a){a.endPos.set(a.endPos.getp().add(p(f,0)))});var e=this.config.interpolation;c=a.merge({onComplete:a.empty},c||{});this.fx.animate(a.merge({hideLabels:true,modes:[e]},c,{onComplete:function(){g.busy=false;c.onComplete()}}))}}});$jit.RGraph.$extend=true;(function(d){d.Op=new b({Implements:c.Op});d.Plot=new b({Implements:c.Plot});d.Label={};d.Label.Native=new b({Implements:c.Label.Native});d.Label.SVG=new b({Implements:c.Label.SVG,initialize:function(a){this.viz=a},placeLabel:function(b,d,g){var f=d.pos.getc(true),a=this.viz.canvas,k=a.translateOffsetX,j=a.translateOffsetY,i=a.scaleOffsetX,h=a.scaleOffsetY,e=a.getSize(),c={x:Math.round(f.x*i+k+e.width/2),y:Math.round(f.y*h+j+e.height/2)};b.setAttribute("x",c.x);b.setAttribute("y",c.y);g.onPlaceLabel(b,d)}});d.Label.HTML=new b({Implements:c.Label.HTML,initialize:function(a){this.viz=a},placeLabel:function(g,d,i){var f=d.pos.getc(true),a=this.viz.canvas,h=a.translateOffsetX,l=a.translateOffsetY,k=a.scaleOffsetX,j=a.scaleOffsetY,e=a.getSize(),b={x:Math.round(f.x*k+h+e.width/2),y:Math.round(f.y*j+l+e.height/2)},c=g.style;c.left=b.x+"px";c.top=b.y+"px";c.display=this.fitsInCanvas(b,a)?"":"none";i.onPlaceLabel(g,d)}});d.Plot.NodeTypes=new b({none:{render:a.empty,contains:a.lambda(false)},circle:{render:function(a,c){var b=a.pos.getc(true),d=a.getData("dim");this.nodeHelper.circle.render("fill",b,d,c)},contains:function(a,b){var d=a.pos.getc(true),c=a.getData("dim");return this.nodeHelper.circle.contains(d,b,c)}},ellipse:{render:function(a,d){var b=a.pos.getc(true),e=a.getData("width"),c=a.getData("height");this.nodeHelper.ellipse.render("fill",b,e,c,d)},contains:function(a,c){var b=a.pos.getc(true),e=a.getData("width"),d=a.getData("height");return this.nodeHelper.ellipse.contains(b,c,e,d)}},square:{render:function(a,c){var b=a.pos.getc(true),d=a.getData("dim");this.nodeHelper.square.render("fill",b,d,c)},contains:function(a,b){var d=a.pos.getc(true),c=a.getData("dim");return this.nodeHelper.square.contains(d,b,c)}},rectangle:{render:function(a,d){var b=a.pos.getc(true),e=a.getData("width"),c=a.getData("height");this.nodeHelper.rectangle.render("fill",b,e,c,d)},contains:function(a,c){var b=a.pos.getc(true),e=a.getData("width"),d=a.getData("height");return this.nodeHelper.rectangle.contains(b,c,e,d)}},triangle:{render:function(a,c){var b=a.pos.getc(true),d=a.getData("dim");this.nodeHelper.triangle.render("fill",b,d,c)},contains:function(a,b){var d=a.pos.getc(true),c=a.getData("dim");return this.nodeHelper.triangle.contains(d,b,c)}},star:{render:function(a,c){var b=a.pos.getc(true),d=a.getData("dim");this.nodeHelper.star.render("fill",b,d,c)},contains:function(a,b){var d=a.pos.getc(true),c=a.getData("dim");return this.nodeHelper.star.contains(d,b,c)}}});d.Plot.EdgeTypes=new b({none:a.empty,line:{render:function(a,c){var b=a.nodeFrom.pos.getc(true),d=a.nodeTo.pos.getc(true);this.edgeHelper.line.render(b,d,c)},contains:function(a,b){var d=a.nodeFrom.pos.getc(true),c=a.nodeTo.pos.getc(true);return this.edgeHelper.line.contains(d,c,b,this.edge.epsilon)}},arrow:{render:function(a,g){var e=a.nodeFrom.pos.getc(true),d=a.nodeTo.pos.getc(true),c=a.getData("dim"),b=a.data.$direction,f=b&&b.length>1&&b[0]!=a.nodeFrom.id;this.edgeHelper.arrow.render(e,d,c,f,g)},contains:function(a,b){var d=a.nodeFrom.pos.getc(true),c=a.nodeTo.pos.getc(true);return this.edgeHelper.arrow.contains(d,c,b,this.edge.epsilon)}}})})($jit.RGraph);f.prototype.moebiusTransformation=function(b){var c=this.add(b),a=b.$conjugate().$prod(this);a.x++;return c.$div(a)};c.Util.moebiusTransformation=function(e,c,a,b,d){this.eachNode(e,function(e){for(var d=0;d<a.length;d++){var g=c[d].scale(-1),f=b?b:a[d];e.getPos(a[d]).set(e.getPos(f).getc().moebiusTransformation(g))}},d)};$jit.Hypertree=new b({Implements:[k,j,g.Radial],initialize:function(f){var e=$jit.Hypertree,g={radius:"auto",offset:0,Edge:{type:"hyperline"},duration:1500,fps:35};this.controller=this.config=a.merge(d("Canvas","Node","Edge","Fx","Tips","NodeStyles","Events","Navigation","Controller","Label"),g,f);var b=this.config;if(b.useCanvas){this.canvas=b.useCanvas;this.config.labelContainer=this.canvas.id+"-label"}else{if(b.background)b.background=a.merge({type:"Circles"},b.background);this.canvas=new i(this,b);this.config.labelContainer=(typeof b.injectInto=="string"?b.injectInto:b.injectInto.id)+"-label"}this.graphOptions={klass:h,Node:{selected:false,exist:true,drawn:true}};this.graph=new c(this.graphOptions,this.config.Node,this.config.Edge);this.labels=new e.Label[b.Label.type](this);this.fx=new e.Plot(this,e);this.op=new e.Op(this);this.json=null;this.root=null;this.busy=false;this.initializeExtras()},createLevelDistanceFunc:function(){var d=this.getRadius(),b=0,e=Math.max,f=this.config;this.graph.eachNode(function(a){b=e(a._depth,b)},"ignore");b++;for(var c=function(a){return function(b){b.scale=d;var e=b._depth+1,c=0,g=Math.pow;while(e)c+=g(a,e--);return c-f.offset}},a=.51;a<=1;a+=.01){var g=(1-Math.pow(a,b))/(1-a);if(g>=2)return c(a-.01)}return c(.75)},getRadius:function(){var a=this.config.radius;if(a!=="auto")return a;var b=this.canvas.getSize();return Math.min(b.width,b.height)/2},refresh:function(a){if(a){this.reposition();this.graph.eachNode(function(a){a.startPos.rho=a.pos.rho=a.endPos.rho;a.startPos.theta=a.pos.theta=a.endPos.theta})}else this.compute();this.plot()},reposition:function(){this.compute("end");var a=this.graph.getNode(this.root).pos.getc().scale(-1);c.Util.moebiusTransformation(this.graph,[a],["end"],"end","ignore");this.graph.eachNode(function(a){if(a.ignore){a.endPos.rho=a.pos.rho;a.endPos.theta=a.pos.theta}})},plot:function(){this.fx.plot()},onClick:function(c,a){var b=this.graph.getNode(c).pos.getc(true);this.move(b,a)},move:function(d,b){var c=m(d.x,d.y);if(this.busy===false&&c.norm()<1){this.busy=true;var e=this.graph.getClosestNodeToPos(c),f=this;this.graph.computeLevels(e.id,0);this.controller.onBeforeCompute(e);b=a.merge({onComplete:a.empty},b||{});this.fx.animate(a.merge({modes:["moebius"],hideLabels:true},b,{onComplete:function(){f.busy=false;b.onComplete()}}),c)}}});$jit.Hypertree.$extend=true;(function(d){d.Op=new b({Implements:c.Op});d.Plot=new b({Implements:c.Plot});d.Label={};d.Label.Native=new b({Implements:c.Label.Native,initialize:function(a){this.viz=a},renderLabel:function(e,b){var d=e.getCtx(),c=b.pos.getc(true),a=this.viz.getRadius();d.fillText(b.name,c.x*a,c.y*a)}});d.Label.SVG=new b({Implements:c.Label.SVG,initialize:function(a){this.viz=a},placeLabel:function(b,d,i){var f=d.pos.getc(true),a=this.viz.canvas,h=a.translateOffsetX,l=a.translateOffsetY,k=a.scaleOffsetX,j=a.scaleOffsetY,e=a.getSize(),g=this.viz.getRadius(),c={x:Math.round(f.x*k*g+h+e.width/2),y:Math.round(f.y*j*g+l+e.height/2)};b.setAttribute("x",c.x);b.setAttribute("y",c.y);i.onPlaceLabel(b,d)}});d.Label.HTML=new b({Implements:c.Label.HTML,initialize:function(a){this.viz=a},placeLabel:function(g,d,j){var f=d.pos.getc(true),a=this.viz.canvas,i=a.translateOffsetX,m=a.translateOffsetY,l=a.scaleOffsetX,k=a.scaleOffsetY,e=a.getSize(),h=this.viz.getRadius(),b={x:Math.round(f.x*l*h+i+e.width/2),y:Math.round(f.y*k*h+m+e.height/2)},c=g.style;c.left=b.x+"px";c.top=b.y+"px";c.display=this.fitsInCanvas(b,a)?"":"none";j.onPlaceLabel(g,d)}});d.Plot.NodeTypes=new b({none:{render:a.empty,contains:a.lambda(false)},circle:{render:function(c,d){var e=this.node,a=c.getData("dim"),b=c.pos.getc();a=e.transform?a*(1-b.squaredNorm()):a;b.$scale(c.scale);a>.2&&this.nodeHelper.circle.render("fill",b,a,d)},contains:function(a,b){var c=a.getData("dim"),d=a.pos.getc().$scale(a.scale);return this.nodeHelper.circle.contains(d,b,c)}},ellipse:{render:function(a,d){var b=a.pos.getc().$scale(a.scale),e=a.getData("width"),c=a.getData("height");this.nodeHelper.ellipse.render("fill",b,e,c,d)},contains:function(a,c){var e=a.getData("width"),d=a.getData("height"),b=a.pos.getc().$scale(a.scale);return this.nodeHelper.circle.contains(b,c,e,d)}},square:{render:function(c,d){var e=this.node,a=c.getData("dim"),b=c.pos.getc();a=e.transform?a*(1-b.squaredNorm()):a;b.$scale(c.scale);a>.2&&this.nodeHelper.square.render("fill",b,a,d)},contains:function(a,b){var c=a.getData("dim"),d=a.pos.getc().$scale(a.scale);return this.nodeHelper.square.contains(d,b,c)}},rectangle:{render:function(c,f){var e=this.node,b=c.getData("width"),a=c.getData("height"),d=c.pos.getc();b=e.transform?b*(1-d.squaredNorm()):b;a=e.transform?a*(1-d.squaredNorm()):a;d.$scale(c.scale);b>.2&&a>.2&&this.nodeHelper.rectangle.render("fill",d,b,a,f)},contains:function(a,c){var e=a.getData("width"),d=a.getData("height"),b=a.pos.getc().$scale(a.scale);return this.nodeHelper.rectangle.contains(b,c,e,d)}},triangle:{render:function(c,d){var e=this.node,a=c.getData("dim"),b=c.pos.getc();a=e.transform?a*(1-b.squaredNorm()):a;b.$scale(c.scale);a>.2&&this.nodeHelper.triangle.render("fill",b,a,d)},contains:function(a,b){var c=a.getData("dim"),d=a.pos.getc().$scale(a.scale);return this.nodeHelper.triangle.contains(d,b,c)}},star:{render:function(c,d){var e=this.node,a=c.getData("dim"),b=c.pos.getc();a=e.transform?a*(1-b.squaredNorm()):a;b.$scale(c.scale);a>.2&&this.nodeHelper.star.render("fill",b,a,d)},contains:function(a,b){var c=a.getData("dim"),d=a.pos.getc().$scale(a.scale);return this.nodeHelper.star.contains(d,b,c)}}});d.Plot.EdgeTypes=new b({none:a.empty,line:{render:function(b,e){var d=b.nodeFrom.pos.getc(true),c=b.nodeTo.pos.getc(true),a=b.nodeFrom.scale;this.edgeHelper.line.render({x:d.x*a,y:d.y*a},{x:c.x*a,y:c.y*a},e)},contains:function(b,e){var c=b.nodeFrom.pos.getc(true),d=b.nodeTo.pos.getc(true),a=b.nodeFrom.scale;this.edgeHelper.line.contains({x:c.x*a,y:c.y*a},{x:d.x*a,y:d.y*a},e,this.edge.epsilon)}},arrow:{render:function(a,h){var e=a.nodeFrom.pos.getc(true),d=a.nodeTo.pos.getc(true),b=a.nodeFrom.scale,f=a.getData("dim"),c=a.data.$direction,g=c&&c.length>1&&c[0]!=a.nodeFrom.id;this.edgeHelper.arrow.render({x:e.x*b,y:e.y*b},{x:d.x*b,y:d.y*b},f,g,h)},contains:function(b,e){var c=b.nodeFrom.pos.getc(true),d=b.nodeTo.pos.getc(true),a=b.nodeFrom.scale;this.edgeHelper.arrow.contains({x:c.x*a,y:c.y*a},{x:d.x*a,y:d.y*a},e,this.edge.epsilon)}},hyperline:{render:function(a,d){var c=a.nodeFrom.pos.getc(),b=a.nodeTo.pos.getc(),e=this.viz.getRadius();this.edgeHelper.hyperline.render(c,b,e,d)},contains:a.lambda(false)}})})($jit.Hypertree)})();!document.createElement("canvas").getContext&&(function(){var d=Math,b=d.round,n=d.sin,m=d.cos,C=d.abs,B=d.sqrt,c=10,e=c/2;function y(){return this.context_||(this.context_=new k(this))}var u=Array.prototype.slice;function A(c,a){var b=u.call(arguments,2);return function(){return c.apply(a,b.concat(u.call(arguments)))}}var o={init:function(b){if(/MSIE/.test(navigator.userAgent)&&!window.opera){var a=b||document;a.createElement("canvas");a.attachEvent("onreadystatechange",A(this.init_,this,a))}},init_:function(a){!a.namespaces.g_vml_&&a.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml","#default#VML");!a.namespaces.g_o_&&a.namespaces.add("g_o_","urn:schemas-microsoft-com:office:office","#default#VML");if(!a.styleSheets.ex_canvas_){var d=a.createStyleSheet();d.owningElement.id="ex_canvas_";d.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}g_vml_\\:*{behavior:url(#default#VML)}g_o_\\:*{behavior:url(#default#VML)}"}for(var c=a.getElementsByTagName("canvas"),b=0;b<c.length;b++)this.initElement(c[b])},initElement:function(a){if(!a.getContext){a.getContext=y;a.innerHTML="";a.attachEvent("onpropertychange",v);a.attachEvent("onresize",z);var b=a.attributes;if(b.width&&b.width.specified)a.style.width=b.width.nodeValue+"px";else a.width=a.clientWidth;if(b.height&&b.height.specified)a.style.height=b.height.nodeValue+"px";else a.height=a.clientHeight}return a}};function v(b){var a=b.srcElement;switch(b.propertyName){case"width":a.style.width=a.attributes.width.nodeValue+"px";a.getContext().clearRect();break;case"height":a.style.height=a.attributes.height.nodeValue+"px";a.getContext().clearRect()}}function z(b){var a=b.srcElement;if(a.firstChild){a.firstChild.style.width=a.clientWidth+"px";a.firstChild.style.height=a.clientHeight+"px"}}o.init();for(var t=[],i=0;i<16;i++)for(var j=0;j<16;j++)t[i*16+j]=i.toString(16)+j.toString(16);function l(){return[[1,0,0],[0,1,0],[0,0,1]]}function f(f,g){for(var d=l(),a=0;a<3;a++)for(var b=0;b<3;b++){for(var e=0,c=0;c<3;c++)e+=f[a][c]*g[c][b];d[a][b]=e}return d}function s(a,b){b.fillStyle=a.fillStyle;b.lineCap=a.lineCap;b.lineJoin=a.lineJoin;b.lineWidth=a.lineWidth;b.miterLimit=a.miterLimit;b.shadowBlur=a.shadowBlur;b.shadowColor=a.shadowColor;b.shadowOffsetX=a.shadowOffsetX;b.shadowOffsetY=a.shadowOffsetY;b.strokeStyle=a.strokeStyle;b.globalAlpha=a.globalAlpha;b.arcScaleX_=a.arcScaleX_;b.arcScaleY_=a.arcScaleY_;b.lineScale_=a.lineScale_}function r(a){var b,e=1;a=String(a);if(a.substring(0,3)=="rgb"){var f=a.indexOf("(",3),g=a.indexOf(")",f+1),c=a.substring(f+1,g).split(",");b="#";for(var d=0;d<3;d++)b+=t[Number(c[d])];if(c.length==4&&a.substr(3,1)=="a")e=c[3]}else b=a;return{color:b,alpha:e}}function x(a){switch(a){case"butt":return"flat";case"round":return"round";case"square":default:return"square"}}function k(b){this.m_=l();this.mStack_=[];this.aStack_=[];this.currentPath_=[];this.strokeStyle="#000";this.fillStyle="#000";this.lineWidth=1;this.lineJoin="miter";this.lineCap="butt";this.miterLimit=c*1;this.globalAlpha=1;this.canvas=b;var a=b.ownerDocument.createElement("div");a.style.width=b.clientWidth+"px";a.style.height=b.clientHeight+"px";a.style.overflow="hidden";a.style.position="absolute";b.appendChild(a);this.element_=a;this.arcScaleX_=1;this.arcScaleY_=1;this.lineScale_=1}var a=k.prototype;a.clearRect=function(){this.element_.innerHTML=""};a.beginPath=function(){this.currentPath_=[]};a.moveTo=function(b,c){var a=this.getCoords_(b,c);this.currentPath_.push({type:"moveTo",x:a.x,y:a.y});this.currentX_=a.x;this.currentY_=a.y};a.lineTo=function(b,c){var a=this.getCoords_(b,c);this.currentPath_.push({type:"lineTo",x:a.x,y:a.y});this.currentX_=a.x;this.currentY_=a.y};a.bezierCurveTo=function(a,b,c,d,g,h){var i=this.getCoords_(g,h),e=this.getCoords_(a,b),f=this.getCoords_(c,d);q(this,e,f,i)};function q(b,c,d,a){b.currentPath_.push({type:"bezierCurveTo",cp1x:c.x,cp1y:c.y,cp2x:d.x,cp2y:d.y,x:a.x,y:a.y});b.currentX_=a.x;b.currentY_=a.y}a.quadraticCurveTo=function(d,e,g,h){var c=this.getCoords_(d,e),b=this.getCoords_(g,h),a={x:this.currentX_+2/3*(c.x-this.currentX_),y:this.currentY_+2/3*(c.y-this.currentY_)},f={x:a.x+(b.x-this.currentX_)/3,y:a.y+(b.y-this.currentY_)/3};q(this,a,f,b)};a.arc=function(d,f,a,g,i,h){a*=c;var p=h?"at":"wa",b=d+m(g)*a-e,q=f+n(g)*a-e,l=d+m(i)*a-e,r=f+n(i)*a-e;if(b==l&&!h)b+=.125;var o=this.getCoords_(d,f),j=this.getCoords_(b,q),k=this.getCoords_(l,r);this.currentPath_.push({type:p,x:o.x,y:o.y,radius:a,xStart:j.x,yStart:j.y,xEnd:k.x,yEnd:k.y})};a.rect=function(a,b,d,c){this.moveTo(a,b);this.lineTo(a+d,b);this.lineTo(a+d,b+c);this.lineTo(a,b+c);this.closePath()};a.strokeRect=function(a,b,d,c){var e=this.currentPath_;this.beginPath();this.moveTo(a,b);this.lineTo(a+d,b);this.lineTo(a+d,b+c);this.lineTo(a,b+c);this.closePath();this.stroke();this.currentPath_=e};a.fillRect=function(a,b,d,c){var e=this.currentPath_;this.beginPath();this.moveTo(a,b);this.lineTo(a+d,b);this.lineTo(a+d,b+c);this.lineTo(a,b+c);this.closePath();this.fill();this.currentPath_=e};a.createLinearGradient=function(b,d,c,e){var a=new h("gradient");a.x0_=b;a.y0_=d;a.x1_=c;a.y1_=e;return a};a.createRadialGradient=function(d,f,b,e,g,c){var a=new h("gradientradial");a.x0_=d;a.y0_=f;a.r0_=b;a.x1_=e;a.y1_=g;a.r1_=c;return a};a.drawImage=function(a){var e,f,i,h,m,n,l,k,y=a.runtimeStyle.width,x=a.runtimeStyle.height;a.runtimeStyle.width="auto";a.runtimeStyle.height="auto";var q=a.width,p=a.height;a.runtimeStyle.width=y;a.runtimeStyle.height=x;if(arguments.length==3){e=arguments[1];f=arguments[2];m=n=0;l=i=q;k=h=p}else if(arguments.length==5){e=arguments[1];f=arguments[2];i=arguments[3];h=arguments[4];m=n=0;l=q;k=p}else if(arguments.length==9){m=arguments[1];n=arguments[2];l=arguments[3];k=arguments[4];e=arguments[5];f=arguments[6];i=arguments[7];h=arguments[8]}else throw Error("Invalid number of arguments");var o=this.getCoords_(e,f),B=l/2,A=k/2,j=[],w=10,v=10;j.push(" <g_vml_:group",' coordsize="',c*w,",",c*v,'"',' coordorigin="0,0"',' style="width:',w,"px;height:",v,"px;position:absolute;");if(this.m_[0][0]!=1||this.m_[0][1]){var r=[];r.push("M11=",this.m_[0][0],",","M12=",this.m_[1][0],",","M21=",this.m_[0][1],",","M22=",this.m_[1][1],",","Dx=",b(o.x/c),",","Dy=",b(o.y/c),"");var g=o,s=this.getCoords_(e+i,f),t=this.getCoords_(e,f+h),u=this.getCoords_(e+i,f+h);g.x=d.max(g.x,s.x,t.x,u.x);g.y=d.max(g.y,s.y,t.y,u.y);j.push("padding:0 ",b(g.x/c),"px ",b(g.y/c),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",r.join(""),", sizingmethod='clip');")}else j.push("top:",b(o.y/c),"px;left:",b(o.x/c),"px;");j.push(' ">','<g_vml_:image src="',a.src,'"',' style="width:',c*i,"px;"," height:",c*h,'px;"',' cropleft="',m/q,'"',' croptop="',n/p,'"',' cropright="',(q-m-l)/q,'"',' cropbottom="',(p-n-k)/p,'"'," />","</g_vml_:group>");this.element_.insertAdjacentHTML("BeforeEnd",j.join(""))};a.stroke=function(l){var e=[],Q=false,C=r(l?this.fillStyle:this.strokeStyle),z=C.color,o=C.alpha*this.globalAlpha,E=10,D=10;e.push("<g_vml_:shape",' filled="',!!l,'"',' style="position:absolute;width:',E,"px;height:",D,'px;"',' coordorigin="0 0" coordsize="',c*E," ",c*D,'"',' stroked="',!l,'"',' path="');for(var R=false,g={x:null,y:null},h={x:null,y:null},k=0;k<this.currentPath_.length;k++){var a=this.currentPath_[k],P;switch(a.type){case"moveTo":P=a;e.push(" m ",b(a.x),",",b(a.y));break;case"lineTo":e.push(" l ",b(a.x),",",b(a.y));break;case"close":e.push(" x ");a=null;break;case"bezierCurveTo":e.push(" c ",b(a.cp1x),",",b(a.cp1y),",",b(a.cp2x),",",b(a.cp2y),",",b(a.x),",",b(a.y));break;case"at":case"wa":e.push(" ",a.type," ",b(a.x-this.arcScaleX_*a.radius),",",b(a.y-this.arcScaleY_*a.radius)," ",b(a.x+this.arcScaleX_*a.radius),",",b(a.y+this.arcScaleY_*a.radius)," ",b(a.xStart),",",b(a.yStart)," ",b(a.xEnd),",",b(a.yEnd))}if(a){if(g.x==null||a.x<g.x)g.x=a.x;if(h.x==null||a.x>h.x)h.x=a.x;if(g.y==null||a.y<g.y)g.y=a.y;if(h.y==null||a.y>h.y)h.y=a.y}}e.push(' ">');if(!l){var n=this.lineScale_*this.lineWidth;if(n<1)o*=n;e.push("<g_vml_:stroke",' opacity="',o,'"',' joinstyle="',this.lineJoin,'"',' miterlimit="',this.miterLimit,'"',' endcap="',x(this.lineCap),'"',' weight="',n,'px"',' color="',z,'" />')}else if(typeof this.fillStyle=="object"){var f=this.fillStyle,j=0,s={x:0,y:0},t=0,w=1;if(f.type_=="gradient"){var L=f.x0_/this.arcScaleX_,N=f.y0_/this.arcScaleY_,M=f.x1_/this.arcScaleX_,O=f.y1_/this.arcScaleY_,m=this.getCoords_(L,N),B=this.getCoords_(M,O),J=B.x-m.x,K=B.y-m.y;j=Math.atan2(J,K)*180/Math.PI;if(j<0)j+=360;if(j<1e-6)j=0}else{var m=this.getCoords_(f.x0_,f.y0_),u=h.x-g.x,p=h.y-g.y;s={x:(m.x-g.x)/u,y:(m.y-g.y)/p};u/=this.arcScaleX_*c;p/=this.arcScaleY_*c;var v=d.max(u,p);t=2*f.r0_/v;w=2*f.r1_/v-t}var i=f.colors_;i.sort(function(a,b){return a.offset-b.offset});for(var q=i.length,H=i[0].color,I=i[q-1].color,F=i[0].alpha*this.globalAlpha,G=i[q-1].alpha*this.globalAlpha,y=[],k=0;k<q;k++){var A=i[k];y.push(A.offset*w+t+" "+A.color)}e.push('<g_vml_:fill type="',f.type_,'"',' method="none" focus="100%"',' color="',H,'"',' color2="',I,'"',' colors="',y.join(","),'"',' opacity="',G,'"',' g_o_:opacity2="',F,'"',' angle="',j,'"',' focusposition="',s.x,",",s.y,'" />')}else e.push('<g_vml_:fill color="',z,'" opacity="',o,'" />');e.push("</g_vml_:shape>");this.element_.insertAdjacentHTML("beforeEnd",e.join(""))};a.fill=function(){this.stroke(true)};a.closePath=function(){this.currentPath_.push({type:"close"})};a.getCoords_=function(b,d){var a=this.m_;return{x:c*(b*a[0][0]+d*a[1][0]+a[2][0])-e,y:c*(b*a[0][1]+d*a[1][1]+a[2][1])-e}};a.save=function(){var a={};s(this,a);this.aStack_.push(a);this.mStack_.push(this.m_);this.m_=f(l(),this.m_)};a.restore=function(){s(this.aStack_.pop(),this);this.m_=this.mStack_.pop()};function w(c){for(var a=0;a<3;a++)for(var b=0;b<2;b++)if(!isFinite(c[a][b])||isNaN(c[a][b]))return false;return true}function g(b,a,c){if(!w(a))return;b.m_=a;if(c){var d=a[0][0]*a[1][1]-a[0][1]*a[1][0];b.lineScale_=B(C(d))}}a.translate=function(a,b){var c=[[1,0,0],[0,1,0],[a,b,1]];g(this,f(c,this.m_),false)};a.rotate=function(a){var b=m(a),c=n(a),d=[[b,c,0],[-c,b,0],[0,0,1]];g(this,f(d,this.m_),false)};a.scale=function(a,b){this.arcScaleX_*=a;this.arcScaleY_*=b;var c=[[a,0,0],[0,b,0],[0,0,1]];g(this,f(c,this.m_),true)};a.transform=function(a,b,c,d,e,h){var i=[[a,b,0],[c,d,0],[e,h,1]];g(this,f(i,this.m_),true)};a.setTransform=function(a,b,c,d,e,f){var h=[[a,b,0],[c,d,0],[e,f,1]];g(this,h,true)};a.clip=function(){};a.arcTo=function(){};a.createPattern=function(){return new p};function h(a){this.type_=a;this.x0_=0;this.y0_=0;this.r0_=0;this.x1_=0;this.y1_=0;this.r1_=0;this.colors_=[]}h.prototype.addColorStop=function(b,a){a=r(a);this.colors_.push({offset:b,color:a.color,alpha:a.alpha})};function p(){}G_vmlCanvasManager=o;CanvasRenderingContext2D=k;CanvasGradient=h;CanvasPattern=p})();$(document).ready(function(){var c=false,j=document.referrer.toLowerCase(),k=Math.random(1,1e6),b=$("body").attr("class"),l=b!=undefined&&b!=""?b.substring(3,b.length):"0",o=$("img.estadistica").attr("src"),m=o.replace(/^[^\?]+\??/,""),a=parseQuery(m),n=".lanacion.com.ar",g=GetUniqueBrowserId(n),e="";if(a.usuario!=null)e=a.usuario;var f="";if(a.pagina!=null)f=a.pagina;var d="";if(a.servidor!=null)d=a.servidor;var q,r=false,p=false;$("[class*='toi']").click(function(a){if(!c){c=true;$(this).each(function(){try{var u=$(this).tagName(),v=$(this).attr("href"),y=$(this).attr("target"),z=$(this).attr("onclick"),h=$(this).attr("class"),w,b,r="",q="",s,t;if(h===""||h==undefined)h=getParent($(this));b=h.split(" ");for(i=0;i<=b.length-1;i++){var n=b[i].substring(0,3);if(n=="toi")r=b[i].substring(3,b[i].length);if(n=="nid")q=b[i].substring(3,b[i].length)}var o=estaContenido(a.pageX);if(o){s=o;t=a.pageY}var p=0,m=0;if(u=="a")p=1;if($.browser.msie)m=1;$("body").append('<img class="clickstats" src="http://stats.lnol.com.ar/def.gif?pagina='+f+"/click&servidor="+d+"&usuario="+e+"&pid="+l+"&toi="+r+"&nota_id="+q+"&acc="+p+"&ie="+m+"&nro="+k+"&ubid="+g+"&referer="+j+"&x="+s+"&y="+t+'" />');c=false}catch(A){return}})}});var h=0;if($.browser.msie)h=1;$("body").append('<img class="clickstats" src="http://stats.lnol.com.ar/def.gif?pagina='+f+"&servidor="+d+"&usuario="+e+"&pid="+l+"&ie="+h+"&nro="+k+"&ubid="+g+"&referer="+j+'" />')});function Right(a,b){if(b<=0)return"";else if(b>String(a).length)return a;else{var c=String(a).length;return String(a).substring(c,c-b)}}function getParent(b){var a=b.parent().attr("class");if(a==""&&a!=undefined)if($(b.parent()).tagName()!="body")a=getParent(b.parent());return a.toString()}function estaContenido(b){var a=$("body").offset(),c=$("body").width(),d;return b<c+a.left&&b>a.left?b-a.left:false}$.fn.tagName=function(){return this.get(0).tagName.toLowerCase()};function parseQuery(f){var b={};if(!f)return b;for(var e=f.split(/[;&]/),d=0;d<e.length;d++){var a=e[d].split("=");if(!a||a.length!=2)continue;var g=unescape(a[0]),c=unescape(a[1]);c=c.replace(/\+/g," ");b[g]=c}return b}function changeFontSize(m,e){e=parseInt(e,10);var c=1,h=document.getElementById(m),g,j;g=parseInt(h.style.fontSize,10);j=parseInt(h.style.lineHeight,10);var d=g+e,f=j+e;if(e<0&&g==11){d=15;f=22}if(e>0&&g==23){d=15;f=22}h.style.fontSize=d+"px";h.style.lineHeight=f+"px";var l=LeerCookie("tamanoLetra"),k=LeerCookie("lineHeightLetra"),i=false,a="",b="";$.each(l.split("|"),function(g,e){var b=e.split("-");if(b.length>1){var f=b[1];if(f==c){i=true;a=a+d+"-"+c+"|"}else a=a+e+"|"}});$.each(k.split("|"),function(g,e){var a=e.split("-");if(a.length>1){var f=a[1];if(f==c){i=true;b=b+d+"-"+c+"|"}else b=b+e+"|"}});if(!i){a=a+d+"-"+c+"|";b=b+f+"-"+c+"|"}SetCookieFull("tamanoLetra",a,365,"/",".lanacion.com.ar","");SetCookieFull("lineHeightLetra",b,365,"/",".lanacion.com.ar","");return}function setearTamanoLetra(){var c=1,a;a=document.getElementById("cuerpo");var f,e,d,b;d=parseInt(a.style.fontSize,10);b=parseInt(a.style.lineHeight,10);if(LeerCookie("tamanoLetra")==""||LeerCookie("lineHeightLetra")==""){SetCookieFull("tamanoLetra",d+"-"+c+"|",365,"/",".lanacion.com.ar","");SetCookieFull("lineHeightLetra",b+"-"+c+"|",365,"/",window.location.hostname,"")}else{f=LeerCookie("tamanoLetra");e=LeerCookie("lineHeightLetra");$.each(f.split("|"),function(f,e){var a=e.split("-");if(a.length>1){var b=a[1];if(b==c)d=a[0]}});$.each(e.split("|"),function(f,e){var a=e.split("-");if(a.length>1){var d=a[1];if(d==c)b=a[0]}});a.style.fontSize=d+"px";a.style.lineHeight=b+"px"}}var sitio="http://www.lanacion.com.ar";if(document.location.href.indexOf("servicios.lanacion.com.ar")>0)sitio="http://servicios.lanacion.com.ar";function panelVotar(a,q,r,g){if(existenCookies()=="1"){var i=LeerCookie("cookieLogin");if(i!=""){nombre="aVotar";divVoto="aVotar";if(g=="1")nombre=nombre+"Pos";else nombre=nombre+"Neg";var b=parent.document.getElementById("solapa_tipo").value;textoVotos=document.getElementById(nombre+b+a).innerHTML;var h="",k=1,c=textoVotos.substring(textoVotos.indexOf("(")+1,textoVotos.length-1);c=parseInt(c)+1;var j=LeerCookie("cookieComentariosVotados"),o=i.split("="),e=o[1];if(j!=""){var d;d=j.split("|");var f,p,l;for(l in d){f=d[l].split(",");if(f[0]==a)if(f[1]==e){c=parseInt(c)-1;k=0;h="Ya Votaste";document.getElementById(nombre+b+a).innerHTML="("+c+")";document.getElementById("mensajeVotar"+b+a).innerHTML=h;document.getElementById("mensajeVotar"+b+a).style.display="block";document.getElementById("divVotar"+b+a).className="votoInactivo  floatFix";var n=divVoto+"Pos"+b+a,m=divVoto+"Neg"+b+a;document.getElementById(n).onclick="javascript:void(0);";document.getElementById(m).onclick="javascript:void(0);";break}}k&&computarVoto(a,e,g)}else computarVoto(a,e,g)}else layer("Ingresar",sitioRegistracionSeguro+"/ingresar-modal?pagina="+sitio+"/herramientas/comunidades/closeModalRegistracion.html&width=455&height=400&sitioId=1","")}}function panelReportarAbuso(a,c,f,b,d,e){if(LeerCookie("cookieLogin").length>0)layer("reportar de abuso","/herramientas/comunidades/reportarAbuso.html?comentario_id="+a+"&entrada_id="+c+"&categoria_id="+b+"&esPadre="+d+"&ip="+e+"&width=360&height=420","");else layer("Enviar e-mail",sitioRegistracionSeguro+"/ingresar-modal?pagina="+sitio+"/herramientas/comunidades/closeModalRegistracion.html&width=455&height=380&sitioId=1","")}function panelCaptcha(b){var d="";$.getJSON("http://jsonip.appspot.com?callback=?",function(a){d=a.ip});var a=document.getElementById("txtArea_comentario");if(a!=null&&a.value!=a.defaultValue){a.value=eliminarEspacios(a.value);a.value=stripHTML(a.value);if(a.value.length==0){alert("Por favor ingrese su comentario");a.focus();a=null;return false}var c=document.getElementById("btnEnviarCom").innerHTML;jQuery("#btnEnviarCom").html("<img src='../../_ui/desktop/imgs/layout/cargando-modal.gif' />");$.ajax({url:"/Proxy.svc/PostString/Herramienta/ActivaUsuario?query=sitio_id="+sitio_id+"%26cookie_usuario_usuario="+LeerCookie("usuario%5Fusuario")+"%26cookie_usuario_id="+LeerCookie("usuario%5Fid")+"%26cookie_usuario_detalle_nick="+LeerCookie("usuario%5Fdetalle%5Fnick")+"%26cookie_usuario_detalle_guid="+LeerCookie("usuario%5Fdetalle%5Fguid").replace("{","").replace("}","")+"%26texto="+a.value,type:"POST",contentType:"application/xml;charset=utf-8",data:"",success:function(e){var a="";a=$(e).find("string").text();a=a.split("|");if(a[0]!="0"){jQuery("#btnEnviarCom").html(c);layer("Comentario","/herramientas/comunidades/comentar.html?entrada_id="+b+"&width=460&height=300","")}else{SecureUserComment(b,"","","",d,false);jQuery("#btnEnviarCom").html(c)}}})}else{alert("Por favor ingrese su comentario");a.focus();a=null;return false}}function panelCaptchaHijo(d,b,f,c){var g="";$.getJSON("http://jsonip.appspot.com?callback=?",function(a){g=a.ip});var a=a=document.getElementById("txtArea_comentarioHijo");if(a!=null&&a.value!=a.defaultValue){a.value=eliminarEspacios(a.value);a.value=stripHTML(a.value);if(a.value.length==0){alert("Por favor ingrese su comentario");a.focus();a=null;return false}var e=document.getElementById("btnEnviarCom"+b).innerHTML;jQuery("#btnEnviarCom"+b).html("<img src='../../_ui/desktop/imgs/layout/cargando-modal.gif' />");$.ajax({url:"/Proxy.svc/PostString/Herramienta/ActivaUsuario?query=sitio_id="+sitio_id+"%26cookie_usuario_usuario="+LeerCookie("usuario%5Fusuario")+"%26cookie_usuario_id="+LeerCookie("usuario%5Fid")+"%26cookie_usuario_detalle_nick="+LeerCookie("usuario%5Fdetalle%5Fnick")+"%26cookie_usuario_detalle_guid="+LeerCookie("usuario%5Fdetalle%5Fguid").replace("{","").replace("}","")+"%26texto="+a.value,type:"POST",contentType:"application/xml;charset=utf-8",data:"",success:function(h){var a="";a=$(h).find("string").text();a=a.split("|");if(a[0]!="0"){jQuery("#btnEnviarCom"+b).html(e);layer("Comentario","/herramientas/comunidades/comentar.html?entrada_id="+d+"&ComentarioId="+b+"&bX3="+f+"&ComentarioNumero="+c+"&width=460&height=300","")}else{SecureUserComment(d,b,f,c,g,false);jQuery("#btnEnviarCom"+b).html(e)}}})}else{alert("Por favor ingrese su comentario");a.focus();a=null;return false}}function panelEmail(a){layer("Enviar e-mail","../herramientas/nota/enviar-por-mail.html?nota_id="+a+"&width=400&height=540&utm-source=p-herramientamail","")}function panelEmailHumor(){layer("Enviar e-mail","../herramientas/nota/enviar-humor-por-mail.html?width=360&height=520","")}(function(a){a.fn.touchwipe=function(c){var b={min_move_x:20,wipeLeft:function(){alert("left")},wipeRight:function(){alert("right")},preventDefaultEvents:true};c&&a.extend(b,c);this.each(function(){var c,a=false;function f(){this.removeEventListener("touchmove",d);c=null;a=false}function d(e){b.preventDefaultEvents&&e.preventDefault();if(a){var g=e.touches[0].pageX,d=c-g;if(Math.abs(d)>=b.min_move_x){f();if(d>0)b.wipeLeft();else b.wipeRight()}}}function e(b){if(b.touches.length==1){c=b.touches[0].pageX;a=true;this.addEventListener("touchmove",d,false)}}this.addEventListener("touchstart",e,false)});return this}})(jQuery);window.LN=window.LN||{};LN.Render=LN.Render||{};LN.Render.Galeria=LN.Render.Galeria||{};LN.Render.Layer=LN.Render.Layer||{};LN.Nota=LN.Nota||{};function abrirGaleriaImagenes(e,c,b){if(self.screen){var a=0;a=screen.width}if(a>640){var f=c!=0?"-imagen_id="+c:"",d=b!=0?"-galeria_id="+b:"";layerGaleriaFotos("/herramientas/galeria-imagenes/-nota_id="+e+f+d)}}function abrirGaleriaHumor(c,d){if(self.screen){var a=0;a=screen.width}if(a>640){var b=d?"-galeria=1":"";layerGaleriaFotos("/herramientas/galeria-humor/-nro="+c+b)}}function cerrarGaleria(a){a.keyCode=="27"&&cerrarGaleriaImagenes(self.parent.document)}function cerrarGaleriaImagenes(a){$("#LN_overlay",a).remove()}function cycleSlideGaleriaEmbebida(a){$("#slidesContainer"+a).cycle({play:false,speed:500,prev:"#prev"+a,next:"#next"+a,before:function(){var a=$("img",this),b=$(".slideshow").height()/2-a.height()/2;a.css({"margin-top":b+"px"})},after:function(d,e,b){$("#epigrafe"+a).html(this.childNodes[1].childNodes[0].alt);var c="Foto "+(b.currSlide+1)+" de "+b.slideCount;$("#total"+a).html(c)}}).cycle("pause");function b(b){b.keyCode=="37"&&$("#slidesContainer"+a).cycle("prev");b.keyCode=="39"&&$("#slidesContainer"+a).cycle("next");cerrarGaleria(b)}touchScreen(a);if($.browser.mozilla)$(document).keypress(b);else $(document).keydown(b)}function cycleSlideGaleriaNota(a,d,c){$("#slidesContainer"+a).cycle({height:"fit",width:"fit",play:false,speed:1e3,startingSlide:d,prev:"#galeria .prev",next:"#galeria .next",fit:1,before:function(){var a=$("img.foto",this);lazyLoadImage(a,"");checkImageSize(a)},after:function(d,e,a){$(".cajaEpigrafe .epigrafe").html($("img.foto",this).attr("alt"));var b="Foto "+(a.currSlide+1)+" de "+a.slideCount;$(".total").html(b);estadisticas($("img.foto",this).attr("src"),c)}}).cycle("pause");function b(b){b.keyCode=="37"&&$("#slidesContainer"+a).cycle("prev");b.keyCode=="39"&&$("#slidesContainer"+a).cycle("next");cerrarGaleria(b)}touchScreen(a);if($.browser.mozilla)$(document).keypress(b);else $(document).keydown(b)}function cycleSlideGaleriaTouch(a,c,b){var d="460";$("#slidesContainer"+a).cycle({play:false,speed:1e3,fit:1,startingSlide:c,prev:"#galeria .prev",next:"#galeria .next",before:function(){var a=$("img.foto",this);lazyLoadImage(a,d)},after:function(d,e,a){var c=a.currSlide+1+" de "+a.slideCount;$(".total").html(c);estadisticas($("img.foto",this).attr("src"),b)}}).cycle("pause");touchScreen(a)}function lazyLoadImage(b,c){if(b.length)if(!b.attr("src").length){var a=b.attr("id");if(a.length){var d="http://bucket.clanacion.com.ar/anexos/fotos/",e=!isNullOrEmpty(c)?"w"+c:$(window).width()<=480?"w480":"",f=d+a.substring(a.length-2)+"/"+a+e+".jpg";b.attr("src",f)}}}function estadisticas(a,c){if(a.length){var b="http://estadisticas.lanacion.com.ar/diario/default.gif";id=a.substring(a.lastIndexOf("/")+1,a.lastIndexOf("."));var d=Math.random(1,1e6);$("body").append('<img src="'+b+"?pagina="+c+"&amp;otros=imagen_id:"+id+"&amp;nro="+d+'" width="1" height="1"></img>')}}function checkImageSize(a){$(window).width()>480&&a.attr("src").indexOf("w480")>0&&a.attr("src",a.attr("src").replace("w480",""))}function ajustarGaleria(){var b=1090,a=790;if($(window).height()>=a&&$(window).width()>=b){$(".contenido").attr("style","margin:auto;width:960px;");$("#slidesContainer").attr("style","width:960px; height:640px;");$("img.foto").each(function(){$(this).attr("style","max-width:960px; max-height:640px;")})}else{$("#slidesContainer").attr("style","width:"+($(window).width()-100)+"px; height:"+($(window).height()-100)+"px;");$(".contenido").width($("#slidesContainer").width());$(".contenido").height($("#slidesContainer").height());$("img.foto").each(function(){$(this).attr("style","max-width:"+$("#slidesContainer").width()+"px; max-height:"+$("#slidesContainer").height()+"px;")})}$("img.foto").each(function(){checkImageSize($(this))})}function ajustarGaleriaIpad(){var b=1e3,a=760;if($(window).height()>=a&&$(window).width()>=b){$(".contenido").attr("style","margin:auto;width:960px;");$("#slidesContainer").attr("style","width:960px; height:640px;");$("img.foto").each(function(){$(this).attr("style","max-width:960px; max-height:640px;")})}else{$("#slidesContainer").attr("style","width:"+($(window).width()-100)+"px; height:"+($(window).height()-100)+"px;");$(".contenido").width($("#slidesContainer").width());$(".contenido").height($("#slidesContainer").height());$("img.foto").each(function(){$(this).attr("style","max-width:"+$("#slidesContainer").width()+"px; max-height:"+$("#slidesContainer").height()+"px;")})}$("img.foto").each(function(){checkImageSize($(this))})}function touchScreen(a){if(navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/iPad/i))$("#slidesContainer"+a).touchwipe({wipeRight:function(){$("#slidesContainer"+a).cycle("prev")},wipeLeft:function(){$("#slidesContainer"+a).cycle("next")}});else{touchSlide("next","ladoDerecho",a);touchSlide("prev","ladoizquierdo",a)}}function touchSlide(d,e,a){var c=$("#galeria"+a+">.imagen").width(),b=$("#galeria"+a+">.imagen").height();$("#galeria"+a+">.imagen").append('<div class="'+e+'" style="background-color:white;opacity:0;filter:alpha(opacity=0);" onclick="$(\'#slidesContainer'+a+"').cycle('"+d+"');\"></div>");$(".ladoDerecho").css({"float":"right",width:parseInt(c)/2,position:"absolute",top:"0",right:"0",height:b})}function ajustarGaleriaTouch(){var b=640,a=427;$("#slidesContainer").css("height",$(".imagen").height()+6)}LN.Render.Galeria.abrirGaleriaImagenes=function(d,b,a){var e=b!=0?"-imagen_id="+b:"",c=a!=0?"-galeria_id="+a:"";LN.Render.Layer.layerGaleriaFotos("/herramientas/galeria-imagenes/-nota_id="+d+e+c)};LN.Render.Galeria.getJsonGaleria=function(a){var b="http://contenidos.lanacion.com.ar/json/galeria-"+a;setTimeout(LN.Tools.getJSON(b,null,LN.Render.Galeria.armarGaleriaHtml),700)};function lta(){}LN.Render.Galeria.armarGaleriaHtml=function(a){var r="",p="javascript:void(0);",o=LN.Nota.ActualNotaId?LN.Nota.ActualNotaId:null,c=a.galeria_id,b=0,n=a.imagenes.length-1,g="",i="",l="slidesContainer"+c,q="total"+c,k="Foto 1 de "+a.imagenes.length,m="setTimeout(function () { LN.Render.Galeria.cycleSlideGaleriaEmbebida("+c+", 0); }, 800);",j=$("#slidesContainer_a_"+c).html();if(a.imagenes.length>0)for(b;b<=n;b++){if(a.imagenes[b].fuente_nombre!="")if(a.imagenes[b].fuente_nombre!="undefined"||a.imagenes[b].fuente_nombre!=null)g="Foto:";else g="Foto:"+a.imagenes[b].fuente_nombre;if(a.imagenes[b].imagen_autor!="")i=a.imagenes[b].imagen_autor;var e="http://bucket.clanacion.com.ar"+a.imagenes[b].src,h=e.substring(e.length-4),f=LN.Render.Galeria.TamanoGaleria?LN.Render.Galeria.TamanoGaleria[c]:null;if(!f)f="615";e=e.replace(h,"w"+f+h);var d=$(j).clone();$(d).attr("onclick","LN.Render.Galeria.abrirGaleriaImagenes('"+o+"','"+a.imagenes[b].imagen_id+"','"+c+"'); return false;");$(d).attr("href",p);$(".img_slide",$(d)).attr("alt",a.imagenes[b].epigrafe[0].valor+" "+g+" "+i).attr("src",e);$("#"+l).append(d);d={}}else return false;$("#"+q).append(k);$("#cycle"+c).append(m)};LN.Render.Galeria.cerrarGaleria=function(a){a.keyCode=="27"&&LN.Render.Galeria.cerrarGaleriaImagenes(self.parent.document)};LN.Render.Galeria.cerrarGaleriaImagenes=function(a){$("#LN_overlay",a).remove()};LN.Render.Galeria.cycleSlideGaleriaEmbebida=function(a){$("#slidesContainer"+a).cycle({play:false,speed:500,prev:"#prev"+a,next:"#next"+a,before:function(){var a=$("img",this),b=$(".slideshow").height()/2-a.height()/2},after:function(d,e,b){$("#galeria_"+a+"_img").val(this.childNodes[1].childNodes[0].src);$("#galeria_"+a+"_epigrafe").val(this.childNodes[1].childNodes[0].alt);$("#epigrafe"+a).html(this.childNodes[1].childNodes[0].alt);var c="Foto "+(b.currSlide+1)+" de "+b.slideCount;$("#total"+a).html(c)}}).cycle("pause");function b(b){b.keyCode=="37"&&$("#slidesContainer"+a).cycle("prev");b.keyCode=="39"&&$("#slidesContainer"+a).cycle("next");LN.Render.Galeria.cerrarGaleria(b)}touchScreen(a);if($.browser.mozilla)$(document).keypress(b);else $(document).keydown(b)};LN.Render.Galeria.cycleSlideGaleriaNota=function(a,d,c){$("#slidesContainer"+a).cycle({height:"fit",width:"fit",play:false,speed:1e3,startingSlide:d,prev:"#galeria .prev",next:"#galeria .next",fit:1,before:function(){var a=$("img.foto",this);lazyLoadImage(a,"");checkImageSize(a)},after:function(e,f,b){try{$("#galeria_"+a+"_img").val(this.childNodes[1].childNodes[0].src);$("#galeria_"+a+"_epigrafe").val(this.childNodes[1].childNodes[0].alt)}catch(g){}$(".cajaEpigrafe .epigrafe").html($("img.foto",this).attr("alt"));var d="Foto "+(b.currSlide+1)+" de "+b.slideCount;$(".total").html(d);estadisticas($("img.foto",this).attr("src"),c)}}).cycle("pause");function b(b){b.keyCode=="37"&&$("#slidesContainer"+a).cycle("prev");b.keyCode=="39"&&$("#slidesContainer"+a).cycle("next");LN.Render.Galeria.cerrarGaleria(b)}touchScreen(a);if($.browser.mozilla)$(document).keypress(b);else $(document).keydown(b)};function cycleSlideGaleriaNotaVista(a,d,c){$("#slidesContainer"+a).cycle({height:"fit",width:"fit",play:false,speed:1e3,startingSlide:d,prev:"#galeria .prev",next:"#galeria .next",fit:1,before:function(){var a=$("img.foto",this);lazyLoadImage(a,"");checkImageSize(a)},after:function(d,e,a){$(".epigrafe").html($("img.foto",this).attr("alt"));var b="Foto "+(a.currSlide+1)+" de "+a.slideCount;$(".total").html(b);estadisticas($("img.foto",this).attr("src"),c)}}).cycle("pause");function b(b){b.keyCode=="37"&&$("#slidesContainer"+a).cycle("prev");b.keyCode=="39"&&$("#slidesContainer"+a).cycle("next");LN.Render.Galeria.cerrarGaleria(b)}touchScreen(a);if($.browser.mozilla)$(document).keypress(b);else $(document).keydown(b)}function ajustarDisenoAncho(){var a=window.location.href.toString();if(a.indexOf("?")>0){var b=a.match("width=([0-9]+)")[1];b=="600"&&$("section.contenido-galeria").addClass("tableta")}}var url="http://cdn.lanacion.com.ar/anexos/Audios/";function audioPlayerRelacionado(b,c){var a="";a=c.toString();a=a.substring(a.length-2,a.length);$("#"+b).jPlayer({ready:function(){$(this).jPlayer("setMedia",{mp3:url+a+"/"+c+".mp3"})},cssSelectorAncestor:"",cssSelector:{play:"#audioRelacionadoContainer"+b+" .play",pause:"#audioRelacionadoContainer"+b+" .pause"},swfPath:"/scripts/interface",solution:"flash, html",backgroundColor:"#FFFFFF",supplied:"mp3",volume:1})}function audioPlayerPlayPause(b){var a=$("#"+b),c=a.data("jPlayer");if(c.status.paused==true)a.jPlayer("play");else a.jPlayer("pause")}function audioPlayerEmbebido(b,c){var a="";a=c.toString();a=a.substring(a.length-2,a.length);$("#"+b).jPlayer({ready:function(){$(this).jPlayer("setMedia",{mp3:url+a+"/"+c+".mp3"})},cssSelectorAncestor:"",cssSelector:{play:"#audioContainer"+b+" .play",pause:"#audioContainer"+b+" .pause",stop:"#audioContainer"+b+" .stop"},swfPath:"/scripts/interface",solution:"flash, html",backgroundColor:"#FFFFFF",supplied:"mp3"})}(function(a,b){a.fn.jPlayer=function(c){var d=typeof c==="string",e=Array.prototype.slice.call(arguments,1),f=this;c=!d&&e.length?a.extend.apply(null,[true,c].concat(e)):c;if(d&&c.charAt(0)==="_")return f;d?this.each(function(){var d=a.data(this,"jPlayer"),g=d&&a.isFunction(d[c])?d[c].apply(d,e):d;if(g!==d&&g!==b){f=g;return false}}):this.each(function(){var b=a.data(this,"jPlayer");if(b){b.option(c||{})._init();b.option(c||{})}else a.data(this,"jPlayer",new a.jPlayer(c,this))});return f};a.jPlayer=function(b,c){if(arguments.length){this.element=a(c);this.options=a.extend(true,{},this.options,b);var d=this;this.element.bind("remove.jPlayer",function(){d.destroy()});this._init()}};a.jPlayer.event={ready:"jPlayer_ready",resize:"jPlayer_resize",error:"jPlayer_error",warning:"jPlayer_warning",loadstart:"jPlayer_loadstart",progress:"jPlayer_progress",suspend:"jPlayer_suspend",abort:"jPlayer_abort",emptied:"jPlayer_emptied",stalled:"jPlayer_stalled",play:"jPlayer_play",pause:"jPlayer_pause",loadedmetadata:"jPlayer_loadedmetadata",loadeddata:"jPlayer_loadeddata",waiting:"jPlayer_waiting",playing:"jPlayer_playing",canplay:"jPlayer_canplay",canplaythrough:"jPlayer_canplaythrough",seeking:"jPlayer_seeking",seeked:"jPlayer_seeked",timeupdate:"jPlayer_timeupdate",ended:"jPlayer_ended",ratechange:"jPlayer_ratechange",durationchange:"jPlayer_durationchange",volumechange:"jPlayer_volumechange"};a.jPlayer.htmlEvent=["loadstart","abort","emptied","stalled","loadedmetadata","loadeddata","canplaythrough","ratechange"];a.jPlayer.pause=function(){a.each(a.jPlayer.prototype.instances,function(b,a){a.data("jPlayer").status.srcSet&&a.jPlayer("pause")})};a.jPlayer.timeFormat={showHour:false,showMin:true,showSec:true,padHour:false,padMin:true,padSec:true,sepHour:":",sepMin:":",sepSec:""};a.jPlayer.convertTime=function(b){b=new Date(b*1e3);var c=b.getUTCHours(),d=b.getUTCMinutes();b=b.getUTCSeconds();c=a.jPlayer.timeFormat.padHour&&c<10?"0"+c:c;d=a.jPlayer.timeFormat.padMin&&d<10?"0"+d:d;b=a.jPlayer.timeFormat.padSec&&b<10?"0"+b:b;return(a.jPlayer.timeFormat.showHour?c+a.jPlayer.timeFormat.sepHour:"")+(a.jPlayer.timeFormat.showMin?d+a.jPlayer.timeFormat.sepMin:"")+(a.jPlayer.timeFormat.showSec?b+a.jPlayer.timeFormat.sepSec:"")};a.jPlayer.uaMatch=function(a){a=a.toLowerCase();var b=/(opera)(?:.*version)?[ \/]([\w.]+)/,c=/(msie) ([\w.]+)/,d=/(mozilla)(?:.*? rv:([\w.]+))?/;a=/(webkit)[ \/]([\w.]+)/.exec(a)||b.exec(a)||c.exec(a)||a.indexOf("compatible")<0&&d.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}};a.jPlayer.browser={};var c=a.jPlayer.uaMatch(navigator.userAgent);if(c.browser){a.jPlayer.browser[c.browser]=true;a.jPlayer.browser.version=c.version}a.jPlayer.prototype={count:0,version:{script:"2.0.0",needFlash:"2.0.0",flash:"unknown"},options:{swfPath:"js",solution:"html, flash",supplied:"mp3",preload:"metadata",volume:.8,muted:false,backgroundColor:"#000000",cssSelectorAncestor:"#jp_interface_1",cssSelector:{videoPlay:".jp-video-play",play:".jp-play",pause:".jp-pause",stop:".jp-stop",seekBar:".jp-seek-bar",playBar:".jp-play-bar",mute:".jp-mute",unmute:".jp-unmute",volumeBar:".jp-volume-bar",volumeBarValue:".jp-volume-bar-value",currentTime:".jp-current-time",duration:".jp-duration"},idPrefix:"jp",errorAlerts:false,warningAlerts:false},instances:{},status:{src:"",media:{},paused:true,format:{},formatType:"",waitForPlay:true,waitForLoad:true,srcSet:false,video:false,seekPercent:0,currentPercentRelative:0,currentPercentAbsolute:0,currentTime:0,duration:0},_status:{volume:b,muted:false,width:0,height:0},"internal":{ready:false,instance:b,htmlDlyCmdId:b},solution:{html:true,flash:true},format:{mp3:{codec:'audio/mpeg; codecs="mp3"',flashCanPlay:true,media:"audio"},m4a:{codec:'audio/mp4; codecs="mp4a.40.2"',flashCanPlay:true,media:"audio"},oga:{codec:'audio/ogg; codecs="vorbis"',flashCanPlay:false,media:"audio"},wav:{codec:'audio/wav; codecs="1"',flashCanPlay:false,media:"audio"},webma:{codec:'audio/webm; codecs="vorbis"',flashCanPlay:false,media:"audio"},m4v:{codec:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:true,media:"video"},ogv:{codec:'video/ogg; codecs="theora, vorbis"',flashCanPlay:false,media:"video"},webmv:{codec:'video/webm; codecs="vorbis, vp8"',flashCanPlay:false,media:"video"}},_init:function(){var c=this;this.element.empty();this.status=a.extend({},this.status,this._status);this.internal=a.extend({},this.internal);this.formats=[];this.solutions=[];this.require={};this.htmlElement={};this.html={};this.html.audio={};this.html.video={};this.flash={};this.css={};this.css.cs={};this.css.jq={};this.status.volume=this._limitValue(this.options.volume,0,1);this.status.muted=this.options.muted;this.status.width=this.element.css("width");this.status.height=this.element.css("height");this.element.css({"background-color":this.options.backgroundColor});a.each(this.options.supplied.toLowerCase().split(","),function(f,e){var b=e.replace(/^\s+|\s+$/g,"");if(c.format[b]){var d=false;a.each(c.formats,function(c,a){if(b===a){d=true;return false}});d||c.formats.push(b)}});a.each(this.options.solution.toLowerCase().split(","),function(f,e){var b=e.replace(/^\s+|\s+$/g,"");if(c.solution[b]){var d=false;a.each(c.solutions,function(c,a){if(b===a){d=true;return false}});d||c.solutions.push(b)}});this.internal.instance="jp_"+this.count;this.instances[this.internal.instance]=this.element;this.element.attr("id")===""&&this.element.attr("id",this.options.idPrefix+"_jplayer_"+this.count);this.internal.self=a.extend({},{id:this.element.attr("id"),jq:this.element});this.internal.audio=a.extend({},{id:this.options.idPrefix+"_audio_"+this.count,jq:b});this.internal.video=a.extend({},{id:this.options.idPrefix+"_video_"+this.count,jq:b});this.internal.flash=a.extend({},{id:this.options.idPrefix+"_flash_"+this.count,jq:b,swf:this.options.swfPath+(this.options.swfPath!==""&&this.options.swfPath.slice(-1)!=="/"?"/":"")+"Jplayer.swf"});this.internal.poster=a.extend({},{id:this.options.idPrefix+"_poster_"+this.count,jq:b});a.each(a.jPlayer.event,function(a,d){if(c.options[a]!==b){c.element.bind(d+".jPlayer",c.options[a]);c.options[a]=b}});this.htmlElement.poster=document.createElement("img");this.htmlElement.poster.id=this.internal.poster.id;this.htmlElement.poster.onload=function(){(!c.status.video||c.status.waitForPlay)&&c.internal.poster.jq.show()};this.element.append(this.htmlElement.poster);this.internal.poster.jq=a("#"+this.internal.poster.id);this.internal.poster.jq.css({width:this.status.width,height:this.status.height});this.internal.poster.jq.hide();this.require.audio=false;this.require.video=false;a.each(this.formats,function(b,a){c.require[c.format[a].media]=true});this.html.audio.available=false;if(this.require.audio){this.htmlElement.audio=document.createElement("audio");this.htmlElement.audio.id=this.internal.audio.id;this.html.audio.available=!!this.htmlElement.audio.canPlayType}this.html.video.available=false;if(this.require.video){this.htmlElement.video=document.createElement("video");this.htmlElement.video.id=this.internal.video.id;this.html.video.available=!!this.htmlElement.video.canPlayType}this.flash.available=this._checkForFlash(10);this.html.canPlay={};this.flash.canPlay={};a.each(this.formats,function(b,a){c.html.canPlay[a]=c.html[c.format[a].media].available&&""!==c.htmlElement[c.format[a].media].canPlayType(c.format[a].codec);c.flash.canPlay[a]=c.format[a].flashCanPlay&&c.flash.available});this.html.desired=false;this.flash.desired=false;a.each(this.solutions,function(f,b){if(f===0)c[b].desired=true;else{var d=false,e=false;a.each(c.formats,function(b,a){if(c[c.solutions[0]].canPlay[a])if(c.format[a].media==="video")e=true;else d=true});c[b].desired=c.require.audio&&!d||c.require.video&&!e}});this.html.support={};this.flash.support={};a.each(this.formats,function(b,a){c.html.support[a]=c.html.canPlay[a]&&c.html.desired;c.flash.support[a]=c.flash.canPlay[a]&&c.flash.desired});this.html.used=false;this.flash.used=false;a.each(this.solutions,function(d,b){a.each(c.formats,function(d,a){if(c[b].support[a]){c[b].used=true;return false}})});this.html.used||this.flash.used||this._error({type:a.jPlayer.error.NO_SOLUTION,context:"{solution:'"+this.options.solution+"', supplied:'"+this.options.supplied+"'}",message:a.jPlayer.errorMsg.NO_SOLUTION,hint:a.jPlayer.errorHint.NO_SOLUTION});this.html.active=false;this.html.audio.gate=false;this.html.video.gate=false;this.flash.active=false;this.flash.gate=false;if(this.flash.used){var f="id="+escape(this.internal.self.id)+"&vol="+this.status.volume+"&muted="+this.status.muted;if(a.browser.msie&&Number(a.browser.version)<=8){var e='<object id="'+this.internal.flash.id+'"';e+=' classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"';e+=' codebase="'+document.URL.substring(0,document.URL.indexOf(":"))+'://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab"';e+=' type="application/x-shockwave-flash"';e+=' width="0" height="0">';e+="</object>";var d=[];d[0]='<param name="movie" value="'+this.internal.flash.swf+'" />';d[1]='<param name="quality" value="high" />';d[2]='<param name="FlashVars" value="'+f+'" />';d[3]='<param name="allowScriptAccess" value="always" />';d[4]='<param name="bgcolor" value="'+this.options.backgroundColor+'" />';f=document.createElement(e);for(e=0;e<d.length;e++)f.appendChild(document.createElement(d[e]));this.element.append(f)}else{d='<embed name="'+this.internal.flash.id+'" id="'+this.internal.flash.id+'" src="'+this.internal.flash.swf+'"';d+=' width="0" height="0" bgcolor="'+this.options.backgroundColor+'"';d+=' quality="high" FlashVars="'+f+'"';d+=' allowScriptAccess="always"';d+=' type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" />';this.element.append(d)}this.internal.flash.jq=a("#"+this.internal.flash.id);this.internal.flash.jq.css({width:"0px",height:"0px"})}if(this.html.used){if(this.html.audio.available){this._addHtmlEventListeners(this.htmlElement.audio,this.html.audio);this.element.append(this.htmlElement.audio);this.internal.audio.jq=a("#"+this.internal.audio.id)}if(this.html.video.available){this._addHtmlEventListeners(this.htmlElement.video,this.html.video);this.element.append(this.htmlElement.video);this.internal.video.jq=a("#"+this.internal.video.id);this.internal.video.jq.css({width:"0px",height:"0px"})}}this.html.used&&!this.flash.used&&window.setTimeout(function(){c.internal.ready=true;c.version.flash="n/a";c._trigger(a.jPlayer.event.ready)},100);a.each(this.options.cssSelector,function(a,b){c._cssSelector(a,b)});this._updateInterface();this._updateButtons(false);this._updateVolume(this.status.volume);this._updateMute(this.status.muted);this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide();a.jPlayer.prototype.count++},destroy:function(){this._resetStatus();this._updateInterface();this._seeked();this.css.jq.currentTime.length&&this.css.jq.currentTime.text("");this.css.jq.duration.length&&this.css.jq.duration.text("");this.status.srcSet&&this.pause();a.each(this.css.jq,function(b,a){a.unbind(".jPlayer")});this.element.removeData("jPlayer");this.element.unbind(".jPlayer");this.element.empty();this.instances[this.internal.instance]=b},enable:function(){},disable:function(){},_addHtmlEventListeners:function(c,d){var b=this;c.preload=this.options.preload;c.muted=this.options.muted;c.addEventListener("progress",function(){if(d.gate&&!b.status.waitForLoad){b._getHtmlStatus(c);b._updateInterface();b._trigger(a.jPlayer.event.progress)}},false);c.addEventListener("timeupdate",function(){if(d.gate&&!b.status.waitForLoad){b._getHtmlStatus(c);b._updateInterface();b._trigger(a.jPlayer.event.timeupdate)}},false);c.addEventListener("durationchange",function(){if(d.gate&&!b.status.waitForLoad){b.status.duration=this.duration;b._getHtmlStatus(c);b._updateInterface();b._trigger(a.jPlayer.event.durationchange)}},false);c.addEventListener("play",function(){if(d.gate&&!b.status.waitForLoad){b._updateButtons(true);b._trigger(a.jPlayer.event.play)}},false);c.addEventListener("playing",function(){if(d.gate&&!b.status.waitForLoad){b._updateButtons(true);b._seeked();b._trigger(a.jPlayer.event.playing)}},false);c.addEventListener("pause",function(){if(d.gate&&!b.status.waitForLoad){b._updateButtons(false);b._trigger(a.jPlayer.event.pause)}},false);c.addEventListener("waiting",function(){if(d.gate&&!b.status.waitForLoad){b._seeking();b._trigger(a.jPlayer.event.waiting)}},false);c.addEventListener("canplay",function(){if(d.gate&&!b.status.waitForLoad){c.volume=b._volumeFix(b.status.volume);b._trigger(a.jPlayer.event.canplay)}},false);c.addEventListener("seeking",function(){if(d.gate&&!b.status.waitForLoad){b._seeking();b._trigger(a.jPlayer.event.seeking)}},false);c.addEventListener("seeked",function(){if(d.gate&&!b.status.waitForLoad){b._seeked();b._trigger(a.jPlayer.event.seeked)}},false);c.addEventListener("suspend",function(){if(d.gate&&!b.status.waitForLoad){b._seeked();b._trigger(a.jPlayer.event.suspend)}},false);c.addEventListener("ended",function(){if(d.gate&&!b.status.waitForLoad){if(!a.jPlayer.browser.webkit)b.htmlElement.media.currentTime=0;b.htmlElement.media.pause();b._updateButtons(false);b._getHtmlStatus(c,true);b._updateInterface();b._trigger(a.jPlayer.event.ended)}},false);c.addEventListener("error",function(){if(d.gate&&!b.status.waitForLoad){b._updateButtons(false);b._seeked();if(b.status.srcSet){b.status.waitForLoad=true;b.status.waitForPlay=true;b.status.video&&b.internal.video.jq.css({width:"0px",height:"0px"});b._validString(b.status.media.poster)&&b.internal.poster.jq.show();b.css.jq.videoPlay.length&&b.css.jq.videoPlay.show();b._error({type:a.jPlayer.error.URL,context:b.status.src,message:a.jPlayer.errorMsg.URL,hint:a.jPlayer.errorHint.URL})}}},false);a.each(a.jPlayer.htmlEvent,function(f,e){c.addEventListener(this,function(){d.gate&&!b.status.waitForLoad&&b._trigger(a.jPlayer.event[e])},false)})},_getHtmlStatus:function(a,f){var b=0,c=0,e=0,d=0;b=a.currentTime;c=this.status.duration>0?100*b/this.status.duration:0;if(typeof a.seekable==="object"&&a.seekable.length>0){e=this.status.duration>0?100*a.seekable.end(a.seekable.length-1)/this.status.duration:100;d=100*a.currentTime/a.seekable.end(a.seekable.length-1)}else{e=100;d=c}if(f)c=d=b=0;this.status.seekPercent=e;this.status.currentPercentRelative=d;this.status.currentPercentAbsolute=c;this.status.currentTime=b},_resetStatus:function(){this.status=a.extend({},this.status,a.jPlayer.prototype.status)},_trigger:function(b,c,d){b=a.Event(b);b.jPlayer={};b.jPlayer.version=a.extend({},this.version);b.jPlayer.status=a.extend(true,{},this.status);b.jPlayer.html=a.extend(true,{},this.html);b.jPlayer.flash=a.extend(true,{},this.flash);if(c)b.jPlayer.error=a.extend({},c);if(d)b.jPlayer.warning=a.extend({},d);this.element.trigger(b)},jPlayerFlashEvent:function(b,c){if(b===a.jPlayer.event.ready&&!this.internal.ready){this.internal.ready=true;this.version.flash=c.version;this.version.needFlash!==this.version.flash&&this._error({type:a.jPlayer.error.VERSION,context:this.version.flash,message:a.jPlayer.errorMsg.VERSION+this.version.flash,hint:a.jPlayer.errorHint.VERSION});this._trigger(b)}if(this.flash.gate)switch(b){case a.jPlayer.event.progress:this._getFlashStatus(c);this._updateInterface();this._trigger(b);break;case a.jPlayer.event.timeupdate:this._getFlashStatus(c);this._updateInterface();this._trigger(b);break;case a.jPlayer.event.play:this._seeked();this._updateButtons(true);this._trigger(b);break;case a.jPlayer.event.pause:this._updateButtons(false);this._trigger(b);break;case a.jPlayer.event.ended:this._updateButtons(false);this._trigger(b);break;case a.jPlayer.event.error:this.status.waitForLoad=true;this.status.waitForPlay=true;this.status.video&&this.internal.flash.jq.css({width:"0px",height:"0px"});this._validString(this.status.media.poster)&&this.internal.poster.jq.show();this.css.jq.videoPlay.length&&this.css.jq.videoPlay.show();this.status.video?this._flash_setVideo(this.status.media):this._flash_setAudio(this.status.media);this._error({type:a.jPlayer.error.URL,context:c.src,message:a.jPlayer.errorMsg.URL,hint:a.jPlayer.errorHint.URL});break;case a.jPlayer.event.seeking:this._seeking();this._trigger(b);break;case a.jPlayer.event.seeked:this._seeked();this._trigger(b);break;default:this._trigger(b)}return false},_getFlashStatus:function(a){this.status.seekPercent=a.seekPercent;this.status.currentPercentRelative=a.currentPercentRelative;this.status.currentPercentAbsolute=a.currentPercentAbsolute;this.status.currentTime=a.currentTime;this.status.duration=a.duration},_updateButtons:function(a){this.status.paused=!a;if(this.css.jq.play.length&&this.css.jq.pause.length)if(a){this.css.jq.play.hide();this.css.jq.pause.show()}else{this.css.jq.play.show();this.css.jq.pause.hide()}},_updateInterface:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.width(this.status.seekPercent+"%");this.css.jq.playBar.length&&this.css.jq.playBar.width(this.status.currentPercentRelative+"%");this.css.jq.currentTime.length&&this.css.jq.currentTime.text(a.jPlayer.convertTime(this.status.currentTime));this.css.jq.duration.length&&this.css.jq.duration.text(a.jPlayer.convertTime(this.status.duration))},_seeking:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.addClass("jp-seeking-bg")},_seeked:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.removeClass("jp-seeking-bg")},setMedia:function(c){var b=this;this._seeked();clearTimeout(this.internal.htmlDlyCmdId);var e=this.html.audio.gate,f=this.html.video.gate,d=false;a.each(this.formats,function(i,g){var h=b.format[g].media==="video";a.each(b.solutions,function(j,i){if(b[i].support[g]&&b._validString(c[g])){var a=i==="html";if(h)if(a){b.html.audio.gate=false;b.html.video.gate=true;b.flash.gate=false}else{b.html.audio.gate=false;b.html.video.gate=false;b.flash.gate=true}else if(a){b.html.audio.gate=true;b.html.video.gate=false;b.flash.gate=false}else{b.html.audio.gate=false;b.html.video.gate=false;b.flash.gate=true}if(b.flash.active||b.html.active&&b.flash.gate||e===b.html.audio.gate&&f===b.html.video.gate)b.clearMedia();else if(e!==b.html.audio.gate&&f!==b.html.video.gate){b._html_pause();b.status.video&&b.internal.video.jq.css({width:"0px",height:"0px"});b._resetStatus()}if(h){if(a){b._html_setVideo(c);b.html.active=true;b.flash.active=false}else{b._flash_setVideo(c);b.html.active=false;b.flash.active=true}b.css.jq.videoPlay.length&&b.css.jq.videoPlay.show();b.status.video=true}else{if(a){b._html_setAudio(c);b.html.active=true;b.flash.active=false}else{b._flash_setAudio(c);b.html.active=false;b.flash.active=true}b.css.jq.videoPlay.length&&b.css.jq.videoPlay.hide();b.status.video=false}d=true;return false}});if(d)return false});if(d){if(this._validString(c.poster))if(this.htmlElement.poster.src!==c.poster)this.htmlElement.poster.src=c.poster;else this.internal.poster.jq.show();else this.internal.poster.jq.hide();this.status.srcSet=true;this.status.media=a.extend({},c);this._updateButtons(false);this._updateInterface()}else{this.status.srcSet&&!this.status.waitForPlay&&this.pause();this.html.audio.gate=false;this.html.video.gate=false;this.flash.gate=false;this.html.active=false;this.flash.active=false;this._resetStatus();this._updateInterface();this._updateButtons(false);this.internal.poster.jq.hide();this.html.used&&this.require.video&&this.internal.video.jq.css({width:"0px",height:"0px"});this.flash.used&&this.internal.flash.jq.css({width:"0px",height:"0px"});this._error({type:a.jPlayer.error.NO_SUPPORT,context:"{supplied:'"+this.options.supplied+"'}",message:a.jPlayer.errorMsg.NO_SUPPORT,hint:a.jPlayer.errorHint.NO_SUPPORT})}},clearMedia:function(){this._resetStatus();this._updateButtons(false);this.internal.poster.jq.hide();clearTimeout(this.internal.htmlDlyCmdId);if(this.html.active)this._html_clearMedia();else this.flash.active&&this._flash_clearMedia()},load:function(){if(this.status.srcSet)if(this.html.active)this._html_load();else this.flash.active&&this._flash_load();else this._urlNotSetError("load")},play:function(a){a=typeof a==="number"?a:NaN;if(this.status.srcSet)if(this.html.active)this._html_play(a);else this.flash.active&&this._flash_play(a);else this._urlNotSetError("play")},videoPlay:function(){this.play()},pause:function(a){a=typeof a==="number"?a:NaN;if(this.status.srcSet)if(this.html.active)this._html_pause(a);else this.flash.active&&this._flash_pause(a);else this._urlNotSetError("pause")},pauseOthers:function(){var b=this;a.each(this.instances,function(c,a){b.element!==a&&a.data("jPlayer").status.srcSet&&a.jPlayer("pause")})},stop:function(){if(this.status.srcSet)if(this.html.active)this._html_pause(0);else this.flash.active&&this._flash_pause(0);else this._urlNotSetError("stop")},playHead:function(a){a=this._limitValue(a,0,100);if(this.status.srcSet)if(this.html.active)this._html_playHead(a);else this.flash.active&&this._flash_playHead(a);else this._urlNotSetError("playHead")},mute:function(){this.status.muted=true;this.html.used&&this._html_mute(true);this.flash.used&&this._flash_mute(true);this._updateMute(true);this._updateVolume(0);this._trigger(a.jPlayer.event.volumechange)},unmute:function(){this.status.muted=false;this.html.used&&this._html_mute(false);this.flash.used&&this._flash_mute(false);this._updateMute(false);this._updateVolume(this.status.volume);this._trigger(a.jPlayer.event.volumechange)},_updateMute:function(a){if(this.css.jq.mute.length&&this.css.jq.unmute.length)if(a){this.css.jq.mute.hide();this.css.jq.unmute.show()}else{this.css.jq.mute.show();this.css.jq.unmute.hide()}},volume:function(b){b=this._limitValue(b,0,1);this.status.volume=b;this.html.used&&this._html_volume(b);this.flash.used&&this._flash_volume(b);this.status.muted||this._updateVolume(b);this._trigger(a.jPlayer.event.volumechange)},volumeBar:function(a){if(!this.status.muted&&this.css.jq.volumeBar){var b=this.css.jq.volumeBar.offset();a=a.pageX-b.left;b=this.css.jq.volumeBar.width();this.volume(a/b)}},volumeBarValue:function(a){this.volumeBar(a)},_updateVolume:function(a){this.css.jq.volumeBarValue.length&&this.css.jq.volumeBarValue.width(a*100+"%")},_volumeFix:function(a){var b=.001*Math.random();return a+(a<.5?b:-b)},_cssSelectorAncestor:function(b,c){this.options.cssSelectorAncestor=b;c&&a.each(this.options.cssSelector,function(a,b){self._cssSelector(a,b)})},_cssSelector:function(b,c){var d=this;if(typeof c==="string")if(a.jPlayer.prototype.options.cssSelector[b]){this.css.jq[b]&&this.css.jq[b].length&&this.css.jq[b].unbind(".jPlayer");this.options.cssSelector[b]=c;this.css.cs[b]=this.options.cssSelectorAncestor+" "+c;this.css.jq[b]=c?a(this.css.cs[b]):[];this.css.jq[b].length&&this.css.jq[b].bind("click.jPlayer",function(c){d[b](c);a(this).blur();return false});c&&this.css.jq[b].length!==1&&this._warning({type:a.jPlayer.warning.CSS_SELECTOR_COUNT,context:this.css.cs[b],message:a.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.css.jq[b].length+" found for "+b+" method.",hint:a.jPlayer.warningHint.CSS_SELECTOR_COUNT})}else this._warning({type:a.jPlayer.warning.CSS_SELECTOR_METHOD,context:b,message:a.jPlayer.warningMsg.CSS_SELECTOR_METHOD,hint:a.jPlayer.warningHint.CSS_SELECTOR_METHOD});else this._warning({type:a.jPlayer.warning.CSS_SELECTOR_STRING,context:c,message:a.jPlayer.warningMsg.CSS_SELECTOR_STRING,hint:a.jPlayer.warningHint.CSS_SELECTOR_STRING})},seekBar:function(a){if(this.css.jq.seekBar){var b=this.css.jq.seekBar.offset();a=a.pageX-b.left;b=this.css.jq.seekBar.width();this.playHead(100*a/b)}},playBar:function(a){this.seekBar(a)},currentTime:function(){},duration:function(){},option:function(f,g){var h=f;if(arguments.length===0)return a.extend(true,{},this.options);if(typeof f==="string"){var e=f.split(".");if(g===b){for(var d=a.extend(true,{},this.options),c=0;c<e.length;c++)if(d[e[c]]!==b)d=d[e[c]];else{this._warning({type:a.jPlayer.warning.OPTION_KEY,context:f,message:a.jPlayer.warningMsg.OPTION_KEY,hint:a.jPlayer.warningHint.OPTION_KEY});return b}return d}d=h={};for(c=0;c<e.length;c++)if(c<e.length-1){d[e[c]]={};d=d[e[c]]}else d[e[c]]=g}this._setOptions(h);return this},_setOptions:function(b){var c=this;a.each(b,function(a,b){c._setOption(a,b)});return this},_setOption:function(c,d){var b=this;switch(c){case"cssSelectorAncestor":this.options[c]=d;a.each(b.options.cssSelector,function(c,a){b._cssSelector(c,a)});break;case"cssSelector":a.each(d,function(c,a){b._cssSelector(c,a)})}return this},resize:function(b){this.html.active&&this._resizeHtml(b);this.flash.active&&this._resizeFlash(b);this._trigger(a.jPlayer.event.resize)},_resizePoster:function(){},_resizeHtml:function(){},_resizeFlash:function(a){this.internal.flash.jq.css({width:a.width,height:a.height})},_html_initMedia:function(){this.status.srcSet&&!this.status.waitForPlay&&this.htmlElement.media.pause();this.options.preload!=="none"&&this._html_load();this._trigger(a.jPlayer.event.timeupdate)},_html_setAudio:function(c){var b=this;a.each(this.formats,function(d,a){if(b.html.support[a]&&c[a]){b.status.src=c[a];b.status.format[a]=true;b.status.formatType=a;return false}});this.htmlElement.media=this.htmlElement.audio;this._html_initMedia()},_html_setVideo:function(c){var b=this;a.each(this.formats,function(d,a){if(b.html.support[a]&&c[a]){b.status.src=c[a];b.status.format[a]=true;b.status.formatType=a;return false}});this.htmlElement.media=this.htmlElement.video;this._html_initMedia()},_html_clearMedia:function(){if(this.htmlElement.media){this.htmlElement.media.id===this.internal.video.id&&this.internal.video.jq.css({width:"0px",height:"0px"});this.htmlElement.media.pause();this.htmlElement.media.src="";a.browser.msie&&Number(a.browser.version)>=9||this.htmlElement.media.load()}},_html_load:function(){if(this.status.waitForLoad){this.status.waitForLoad=false;this.htmlElement.media.src=this.status.src;try{this.htmlElement.media.load()}catch(a){}}clearTimeout(this.internal.htmlDlyCmdId)},_html_play:function(a){var b=this;this._html_load();this.htmlElement.media.play();if(!isNaN(a))try{this.htmlElement.media.currentTime=a}catch(c){this.internal.htmlDlyCmdId=setTimeout(function(){b.play(a)},100);return}this._html_checkWaitForPlay()},_html_pause:function(a){var b=this;a>0?this._html_load():clearTimeout(this.internal.htmlDlyCmdId);this.htmlElement.media.pause();if(!isNaN(a))try{this.htmlElement.media.currentTime=a}catch(c){this.internal.htmlDlyCmdId=setTimeout(function(){b.pause(a)},100);return}a>0&&this._html_checkWaitForPlay()},_html_playHead:function(a){var b=this;this._html_load();try{if(typeof this.htmlElement.media.seekable==="object"&&this.htmlElement.media.seekable.length>0)this.htmlElement.media.currentTime=a*this.htmlElement.media.seekable.end(this.htmlElement.media.seekable.length-1)/100;else if(this.htmlElement.media.duration>0&&!isNaN(this.htmlElement.media.duration))this.htmlElement.media.currentTime=a*this.htmlElement.media.duration/100;else throw"e";}catch(c){this.internal.htmlDlyCmdId=setTimeout(function(){b.playHead(a)},100);return}this.status.waitForLoad||this._html_checkWaitForPlay()},_html_checkWaitForPlay:function(){if(this.status.waitForPlay){this.status.waitForPlay=false;this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide();if(this.status.video){this.internal.poster.jq.hide();this.internal.video.jq.css({width:this.status.width,height:this.status.height})}}},_html_volume:function(a){if(this.html.audio.available)this.htmlElement.audio.volume=a;if(this.html.video.available)this.htmlElement.video.volume=a},_html_mute:function(a){if(this.html.audio.available)this.htmlElement.audio.muted=a;if(this.html.video.available)this.htmlElement.video.muted=a},_flash_setAudio:function(c){var b=this;try{a.each(this.formats,function(d,a){if(b.flash.support[a]&&c[a]){switch(a){case"m4a":b._getMovie().fl_setAudio_m4a(c[a]);break;case"mp3":b._getMovie().fl_setAudio_mp3(c[a])}b.status.src=c[a];b.status.format[a]=true;b.status.formatType=a;return false}});if(this.options.preload==="auto"){this._flash_load();this.status.waitForLoad=false}}catch(d){this._flashError(d)}},_flash_setVideo:function(c){var b=this;try{a.each(this.formats,function(d,a){if(b.flash.support[a]&&c[a]){switch(a){case"m4v":b._getMovie().fl_setVideo_m4v(c[a])}b.status.src=c[a];b.status.format[a]=true;b.status.formatType=a;return false}});if(this.options.preload==="auto"){this._flash_load();this.status.waitForLoad=false}}catch(d){this._flashError(d)}},_flash_clearMedia:function(){this.internal.flash.jq.css({width:"0px",height:"0px"});try{this._getMovie().fl_clearMedia()}catch(a){this._flashError(a)}},_flash_load:function(){try{this._getMovie().fl_load()}catch(a){this._flashError(a)}this.status.waitForLoad=false},_flash_play:function(a){try{this._getMovie().fl_play(a)}catch(b){this._flashError(b)}this.status.waitForLoad=false;this._flash_checkWaitForPlay()},_flash_pause:function(a){try{this._getMovie().fl_pause(a)}catch(b){this._flashError(b)}if(a>0){this.status.waitForLoad=false;this._flash_checkWaitForPlay()}},_flash_playHead:function(a){try{this._getMovie().fl_play_head(a)}catch(b){this._flashError(b)}this.status.waitForLoad||this._flash_checkWaitForPlay()},_flash_checkWaitForPlay:function(){if(this.status.waitForPlay){this.status.waitForPlay=false;this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide();if(this.status.video){this.internal.poster.jq.hide();this.internal.flash.jq.css({width:this.status.width,height:this.status.height})}}},_flash_volume:function(a){try{this._getMovie().fl_volume(a)}catch(b){this._flashError(b)}},_flash_mute:function(a){try{this._getMovie().fl_mute(a)}catch(b){this._flashError(b)}},_getMovie:function(){return document[this.internal.flash.id]},_checkForFlash:function(c){var b=false,d;if(window.ActiveXObject)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+c);b=true}catch(e){}else if(navigator.plugins&&navigator.mimeTypes.length>0)if(d=navigator.plugins["Shockwave Flash"])if(navigator.plugins["Shockwave Flash"].description.replace(/.*\s(\d+\.\d+).*/,"$1")>=c)b=true;return a.browser.msie&&Number(a.browser.version)>=9?false:b},_validString:function(a){return a&&typeof a==="string"},_limitValue:function(a,b,c){return a<b?b:a>c?c:a},_urlNotSetError:function(b){this._error({type:a.jPlayer.error.URL_NOT_SET,context:b,message:a.jPlayer.errorMsg.URL_NOT_SET,hint:a.jPlayer.errorHint.URL_NOT_SET})},_flashError:function(b){this._error({type:a.jPlayer.error.FLASH,context:this.internal.flash.swf,message:a.jPlayer.errorMsg.FLASH+b.message,hint:a.jPlayer.errorHint.FLASH})},_error:function(b){this._trigger(a.jPlayer.event.error,b);this.options.errorAlerts&&this._alert("Error!"+(b.message?"\n\n"+b.message:"")+(b.hint?"\n\n"+b.hint:"")+"\n\nContext: "+b.context)},_warning:function(c){this._trigger(a.jPlayer.event.warning,b,c);this.options.errorAlerts&&this._alert("Warning!"+(c.message?"\n\n"+c.message:"")+(c.hint?"\n\n"+c.hint:"")+"\n\nContext: "+c.context)},_alert:function(a){alert("jPlayer "+this.version.script+" : id='"+this.internal.self.id+"' : "+a)}};a.jPlayer.error={FLASH:"e_flash",NO_SOLUTION:"e_no_solution",NO_SUPPORT:"e_no_support",URL:"e_url",URL_NOT_SET:"e_url_not_set",VERSION:"e_version"};a.jPlayer.errorMsg={FLASH:"jPlayer's Flash fallback is not configured correctly, or a command was issued before the jPlayer Ready event. Details: ",NO_SOLUTION:"No solution can be found by jPlayer in this browser. Neither HTML nor Flash can be used.",NO_SUPPORT:"It is not possible to play any media format provided in setMedia() on this browser using your current options.",URL:"Media URL could not be loaded.",URL_NOT_SET:"Attempt to issue media playback commands, while no media url is set.",VERSION:"jPlayer "+a.jPlayer.prototype.version.script+" needs Jplayer.swf version "+a.jPlayer.prototype.version.needFlash+" but found "};a.jPlayer.errorHint={FLASH:"Check your swfPath option and that Jplayer.swf is there.",NO_SOLUTION:"Review the jPlayer options: support and supplied.",NO_SUPPORT:"Video or audio formats defined in the supplied option are missing.",URL:"Check media URL is valid.",URL_NOT_SET:"Use setMedia() to set the media URL.",VERSION:"Update jPlayer files."};a.jPlayer.warning={CSS_SELECTOR_COUNT:"e_css_selector_count",CSS_SELECTOR_METHOD:"e_css_selector_method",CSS_SELECTOR_STRING:"e_css_selector_string",OPTION_KEY:"e_option_key"};a.jPlayer.warningMsg={CSS_SELECTOR_COUNT:"The number of methodCssSelectors found did not equal one: ",CSS_SELECTOR_METHOD:"The methodName given in jPlayer('cssSelector') is not a valid jPlayer method.",CSS_SELECTOR_STRING:"The methodCssSelector given in jPlayer('cssSelector') is not a String or is empty.",OPTION_KEY:"The option requested in jPlayer('option') is undefined."};a.jPlayer.warningHint={CSS_SELECTOR_COUNT:"Check your css selector and the ancestor.",CSS_SELECTOR_METHOD:"Check your method name.",CSS_SELECTOR_STRING:"Check your css selector is a string.",OPTION_KEY:"Check your option name."}})(jQuery);$.browser.msie&&parseInt($.browser.version)<9&&(function(m,a){var f="abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",e=f.split("|"),h=e.length,n=new RegExp("(^|\\s)("+f+")","gi"),p=new RegExp("<(/*)("+f+")","gi"),o=new RegExp("(^|[^\\n]*?\\s)("+f+")([^\\n]*)({[\\n\\w\\W]*?})","gi"),i=a.createDocumentFragment(),g=a.documentElement,k=g.firstChild,c=a.createElement("body"),d=a.createElement("style"),b;function l(b){var a=-1;while(++a<h)b.createElement(e[a])}function j(c,b){var e=-1,f=c.length,a,d=[];while(++e<f){a=c[e];(b=a.media||b)!="screen"&&d.push(j(a.imports,b),a.cssText)}return d.join("")}l(a);l(i);k.insertBefore(d,k.firstChild);d.media="print";m.attachEvent("onbeforeprint",function(){var l=-1,s=j(a.styleSheets,"all"),q=[],f;b=b||a.body;while((f=o.exec(s))!=null)q.push((f[1]+f[2]+f[3]).replace(n,"$1.iepp_$2")+f[4]);d.styleSheet.cssText=q.join("\n");while(++l<h){var k=a.getElementsByTagName(e[l]),r=k.length,m=-1;while(++m<r)if(k[m].className.indexOf("iepp_")<0)k[m].className+=" iepp_"+e[l]}i.appendChild(b);g.appendChild(c);c.className=b.className;c.innerHTML=b.innerHTML.replace(p,"<$1font")});m.attachEvent("onafterprint",function(){c.innerHTML="";g.removeChild(c);g.appendChild(b);d.styleSheet.cssText=""})})(this,document);var CurrentComentarioDestacados="",CurrentComentarioRecientes="",textoVotos="",nombre=true,divVoto="aVotar",sitio_id=1,sitioRegistracionSeguro="https://registracion.lanacion.com.ar",sitioActual="http://www.lanacion.com.ar",paginaGlobal=0,entrada_idGlobal=0,nota_idGlobal=0,categoria_idGlobal=0,cantidadTotalComentariosGlobal=0,ingresarComentarioGlobal=0,preferencia_idGlobal=0,objeto_idGlobal=0,sitio_idGlobal=0,comentariosXPaginaGlobal=50,cargandoContenido=false,muestraComentarios=false,esPrimeraCarga=false,nivelesFixIe=3,cantMaxCaracteresComentario=1e3,cantMaxCaracteresComentarioConsigna=150,cantMaxCaracteresComentarioForo=1e3,cantMaxCaracteresComentarioCarteleraCine=1e3,modo=obtenerModoRequest(),request,sitioWebServices="http://wscomunidad.lanacion.com.ar/",XhrTimeOut=3e4;if(document.location.href.indexOf("servicios.lanacion.com.ar")>0)sitioActual="http://servicios.lanacion.com.ar";function computarVoto(b,d,k){var c=parent.document.getElementById("solapa_tipo").value;if(d=="")d="0";var h=LeerCookie("usuario%5Fdetalle%5Fguid").replace("{","").replace("}",""),i=LeerCookie("usuario%5Fdetalle%5Fnick"),j=LeerCookie("usuario%5Fid"),g=LeerCookie("usuario%5Fusuario"),e;e=3;var f;f=1;var a;a="/Proxy.svc/PostString/Herramienta/VCSec?query=";a=a+"tipoVoto="+k;a=a+"%26tipoObjeto_id="+e;a=a+"%26objeto_id="+b;a=a+"%26usuario_id="+d;a=a+"%26votoValor="+f;a=a+"%26cookie_usuario_GUID="+h;a=a+"%26cookie_usuario_nick="+i;a=a+"%26cookie_usuario_id="+j;a=a+"%26cookie_usuario_usuario="+g;$.ajax({url:a,type:"POST",timeout:XhrTimeOut,contentType:"application/xml;charset=utf-8",data:"",success:function(j){var f=textoVotos.substring(textoVotos.indexOf("(")+1,textoVotos.indexOf(")")),e="";e=$(j).find("string").text();e=e.split("|");if(e[0]=="1"){var a=new Date;a.setTime(a.getTime());a.setDate(a.getDate()+1);var g=LeerCookie("cookieComentariosVotados");if(g!="")document.cookie="cookieComentariosVotados="+g+b+","+d+"|;expires="+a.toGMTString()+"; path=/";else document.cookie="cookieComentariosVotados="+b+","+d+"|;expires="+a.toGMTString()+"; path=/";f=parseInt(f)+1;document.getElementById(nombre+c+b).innerHTML="("+f+")";document.getElementById("mensajeVotar"+c+b).innerHTML="Gracias por votar";document.getElementById("mensajeVotar"+c+b).style.display="block";document.getElementById("divVotar"+c+b).className="votoInactivo floatFix"}else if(e[0]=="2"){layer("Ingresar",sitioRegistracionSeguro+"/ingresar-modal?pagina="+sitioActual+"/herramientas/comunidades/closeModalRegistracion.html&width=455&height=400&sitioId=1","");return false}else{document.getElementById(nombre+c+b).innerHTML="("+f+")";document.getElementById("mensajeVotar"+c+b).innerHTML="Ya Votaste";document.getElementById("mensajeVotar"+c+b).style.display="block";document.getElementById("divVotar"+c+b).className="votoInactivo floatFix"}var i=divVoto+"Pos"+c+b,h=divVoto+"Neg"+c+b;document.getElementById(i).onclick="javascript:void(0);";document.getElementById(h).onclick="javascript:void(0);"},error:function(){request.abort}})}function Responder(b,f,l,j,g,m,i,e){var h,a,d;d=LeerCookie("usuario%5Ffacebook%5Fid");var c;c=window.location.href;var k;k=c.substr(c.indexOf("lanacion.com.ar")+15,c.length);if(document.getElementById("solapa_tipo").value=="Recientes"){if(CurrentComentarioRecientes!="")document.getElementById("Responder"+document.getElementById("solapa_tipo").value+CurrentComentarioRecientes).innerHTML=""}else if(CurrentComentarioDestacados!="")document.getElementById("Responder"+document.getElementById("solapa_tipo").value+CurrentComentarioDestacados).innerHTML="";a="";a+="<!-- CAJA RESPONDER COMENTARIO -->";a+="<input type='hidden' name='HijoRecibirMailRespuesta' value='"+i+"'>";a+="<input type='hidden' name='entrada_id' value='"+f+"'>";a+="<input type='hidden' name='nota_id' value='"+j+"'>";a+="<input type='hidden' name='nombre' value='"+LeerCookie("usuario%5Fdetalle%5Fnick")+"'>";a+="<input type='hidden' name='nick' value='"+LeerCookie("usuario%5Fdetalle%5Fnick")+"'>";a+="<input type='hidden' name='comentarioPadre_id' value='"+b+"'>";a+="<input type='hidden' name='ComentarioNumero' value='"+e+"'>";a+="<input type='hidden' name='Bx3' value='"+g+"'>";a+="<a name='comentar'></a>";if(LeerCookie("cookieLogin").length>0){a+="<section class='comenta floatFix'>";a+="<section class='form'>";a+="<textarea class='activo' name='txtArea_comentarioHijo' onblur='javascript:LimitarCaracteres(\"txtArea_comentarioHijo\","+b+");doFill(this);' onfocus='doClear(this);' onkeyup='javascript:LimitarCaracteres(\"txtArea_comentarioHijo\","+b+")' id='txtArea_comentarioHijo'>&nbsp;Escrib&iacute; ac&aacute; tu comentario</textarea>";a+="<span id='divLimCarac'><b>L&#237;mite de caracteres:</b> <span id='txtlimite"+b+"'>"+cantMaxCaracteresComentario+"</span></span>";a+="<p>";if(d!="")a+="<input type='checkbox' id='chkPublicarHijo' name='chkPublicarHijo' value='Publicar el comentario' checked='true'/><label for='chkPublicarHijo'>Publicar el comentario en mi Muro de <b>Facebook</b></label>";else a+="Publicar mi comentario en Facebook. <a href='"+sitioRegistracionSeguro+"/faq#Rfacebook' target='_blank'>&#191;C&#243;mo hacerlo?</a> - <a href='"+sitioRegistracionSeguro+"/mis-datos?pagina="+window.location.href+"'>&#160;&#161;Asoci&#225; tu cuenta!</a><br/>";a+="</p>";a+="<div id='btnEnviarCom"+b+"' class='enviar'><input name='enviar' type='button' class='boton activo' id='Button1' onclick='panelCaptchaHijo("+f+","+b+","+g+","+e+");' value='Enviar comentario' name='Enviar'></div>";a+="</section>";a+="</section>";h="Responder"+document.getElementById("solapa_tipo").value+b;document.getElementById(h).innerHTML=a;if(document.getElementById("solapa_tipo").value=="Recientes")CurrentComentarioRecientes=b;else CurrentComentarioDestacados=b}else layer("Login",sitioRegistracionSeguro+"/ingresar-modal?pagina="+sitioActual+"/herramientas/comunidades/closeModalRegistracion.html&width=455&height=400&tipoParticipacion=1&sitioId="+sitio_id,"")}function SecureUserComment(l,c,m,r,d,j){var a="",b="",i,f,g=LeerCookie("usuario%5Fid"),e=LeerCookie("usuario%5Fdetalle%5Fnick"),o=LeerCookie("usuario%5Fdetalle%5Fguid").replace("{","").replace("}",""),p=e,q=g,n=LeerCookie("usuario%5Fusuario"),h=0,k=0;if(d==""||typeof d=="undefined"||d==undefined)d="127.0.0.1";if(c!=""&&c!=undefined)if(j)b=stripHTML(self.parent.document.getElementById("txtArea_comentarioHijo").value);else b=stripHTML(document.getElementById("txtArea_comentarioHijo").value);else{if(j){b=stripHTML(self.parent.document.getElementById("txtArea_comentario").value);i=self.parent.document.getElementById("recibirMailPorComentario").checked;f=self.parent.document.getElementById("rd_calificacion")}else{b=stripHTML(document.getElementById("txtArea_comentario").value);i=document.getElementById("recibirMailPorComentario").checked;f=document.getElementById("rd_calificacion")}if(i)h=1;else h=0;if(f!=null)k=f.value}b=b.replace(/&/ig,"^").replace(/</ig,"&amp;amp;#60;").replace(/>/ig,"&amp;amp;#62;").replace(/#/ig,"-");b=encodeURIComponent(b);a="/Proxy.svc/PostString/Comentario/ICSec?query=";a=a+"entrada_id="+l;a=a+"%26comentario_id="+l;a=a+"%26comentario_nick="+e;a=a+"%26comentario_calificacion="+k;a=a+"%26comentario_texto="+b;a=a+"%26usuario_id="+g;a=a+"%26recibirmailrespuesta="+h;a=a+"%26ip="+d;if(c!=""&&c!=undefined){a=a+"%26comentarioPadre_id="+c;a=a+"%26ComentarioNumero="+r}else a=a+"%26comentarioPadre_id=0";a=a+"%26cookie_usuario_GUID="+o;a=a+"%26cookie_usuario_nick="+p;a=a+"%26cookie_usuario_id="+q;a=a+"%26cookie_usuario_usuario="+n;$.ajax({url:a,type:"POST",timeout:XhrTimeOut,contentType:"application/xml;charset=utf-8",data:"",success:function(){insertarFechaUltimoComentario();if(j)mostrarComentarioEnEspera(g,e,b,c,m);else mostrarComentarioEnEsperaSinModal(g,e,b,c,m)},error:function(){request.abort}})}function mostrarComentarioEnEspera(q,c,h,g){var e=self.parent.document.getElementById("nota_titulo").value,f=self.parent.document.getElementById("nota_id").value,n=self.parent.document.getElementById("txtArea_comentario"),k=self.parent.document.getElementById("comentario_vacio"),i=self.parent.document.getElementById("comentario_usuario"),j=self.parent.document.getElementById("comentario_fecha"),l=self.parent.document.getElementById("comentario_hora"),b=self.parent.document.getElementById("comentario_comentario"),m=self.parent.document.getElementById("imagenAvatar"),a=new Date,d=false;if(self.parent.document.getElementById("esConversacion")!=null&&self.parent.document.getElementById("esConversacion").value=="1"){if(self.parent.document.getElementById("chkPublicarHijo")!=null)d=self.parent.document.getElementById("chkPublicarHijo").checked}else{if(self.parent.document.getElementById("chkPublicar")!=null&&self.parent.document.getElementById("chkPublicar").parentNode.style.display=="block")d=self.parent.document.getElementById("chkPublicar").checked;if(self.parent.document.getElementById("chkPublicarHijo")!=null&&self.parent.document.getElementById("chkPublicar").parentNode.style.display=="block")d=self.parent.document.getElementById("chkPublicarHijo").checked}if(self.parent.document.getElementById("chkPublicar")!=null)self.parent.document.getElementById("chkPublicar").checked=false;if(self.parent.document.getElementById("txtArea_comentario")!=null)n.value="";if(LeerCookie("LNBannerGuia")==""){self.parent.document.getElementById("textoSinBannerGuia").style.display="none";self.parent.document.getElementById("textoConBannerGuia").style.display="block";SetCookieFullHoras("LNBannerGuia","1",5,"/",".lanacion.com.ar","")}else{self.parent.document.getElementById("textoConBannerGuia").style.display="none";self.parent.document.getElementById("textoSinBannerGuia").style.display="block"}i.innerHTML=c;h=decodeURIComponent(h);b.innerHTML=h.replace(/&amp;amp;#38;/ig,"&").replace(/&amp;amp;#62;/ig,">").replace(/&amp;amp;#60;/ig,"<");j.innerHTML=(a.getDate()<10?"0":"")+a.getDate()+"."+(a.getMonth()<9?"0":"")+(a.getMonth()+1)+"."+String(a.getFullYear()).substring(2,4);l.innerHTML=(a.getHours()<10?"0":"")+a.getHours()+":"+(a.getMinutes()<10?"0":"")+a.getMinutes();m.src="http://bucket.lanacion.com.ar/avatar/default.jpg";var p=parent.document.getElementById("solapa_tipo").value;if(g!=""&&typeof g!="undefined"){self.parent.document.getElementById("Responder"+p+g).innerHTML=k.innerHTML;self.parent.document.getElementById("comentario_vacio").style.display="none"}else{self.parent.document.getElementById("comentario_vacio").style.display="block";self.document.location="#comentar"}if(d){if(self.parent.document.getElementById("tipoComentario")!=null){if(self.parent.document.getElementById("tipoComentario").value=="1")var o={name:e,href:"http://www.lanacion.com.ar/"+f+"?utm-source=p-publicarFB",caption:c+' hizo el comentario "'+b.innerHTML.substr(0,140)+'..." en esta Nota de lanacion.com',description:"",media:[{type:"image",src:"http://www.lanacion.com.ar/_ui/desktop/imgs/logos/ln-com.gif",href:"http://www.lanacion.com.ar/"}]};if(self.parent.document.getElementById("tipoComentario").value=="C")var o={name:e,href:"http://servicios.lanacion.com.ar/consignas/"+f+"-",caption:c+' hizo el comentario "'+b.innerHTML.substr(0,140)+'..." en esta Consigna de lanacion.com',description:"",media:[{type:"image",src:"http://servicios.lanacion.com.ar/_ui/desktop/imgs/logos/ln-com.gif",href:"http://servicios.lanacion.com.ar/"}]};if(self.parent.document.getElementById("tipoComentario").value=="F")var o={name:e,href:"http://servicios.lanacion.com.ar/foros/"+f+"-",caption:c+' hizo el comentario "'+b.innerHTML.substr(0,140)+'..." en este Foro de lanacion.com',description:"",media:[{type:"image",src:"http://servicios.lanacion.com.ar/_ui/desktop/imgs/logos/ln-com.gif",href:"http://servicios.lanacion.com.ar/"}]};if(self.parent.document.getElementById("tipoComentario").value=="P")var o={name:e,href:"http://servicios.lanacion.com.ar/espectaculos/cartelera-cine/pelicula/"+f+"-",caption:c+' hizo el comentario "'+b.innerHTML.substr(0,140)+'..." en esta Película de lanacion.com',description:"",media:[{type:"image",src:"http://servicios.lanacion.com.ar/_ui/desktop/imgs/logos/ln-com.gif",href:"http://servicios.lanacion.com.ar/"}]};FB.ui({method:"stream.publish",message:"",target_id:LeerCookie("usuario%5Ffacebook%5Fid"),attachment:o,user_prompt_message:"En que estás pensando"},function(a){if(a&&a.post_id)self.parent.tb_remove();else self.parent.tb_remove()})}}else self.parent.tb_remove()}function VerComentarioReportado(a){var c,b;c=document.getElementById(a).style.display;if(c=="none"||c==""){document.getElementById(a).style.display="block";document.getElementById("link_"+a).innerHTML="Ocultar Comentario";document.getElementById("link_"+a).title="Ocultar Comentario"}else{document.getElementById(a).style.display="none";document.getElementById("link_"+a).innerHTML="Ver Comentario";document.getElementById("link_"+a).title="Ver Comentario"}b=document.getElementById("link_"+a).className;if(b.indexOf("mostrar")>=0)b=b.replace("mostrar","ocultar");else b=b.replace("ocultar","mostrar");document.getElementById("link_"+a).className=b}function MostrarRtas(a){var b=parent.document.getElementById("solapa_tipo").value;document.getElementById("Mostrar"+b+a).style.display="none";document.getElementById("Ocultar"+b+a).style.display="";document.getElementById("Rta"+b+a).style.display=""}function OcultarRtas(a){var b=parent.document.getElementById("solapa_tipo").value;document.getElementById("Ocultar"+b+a).style.display="none";document.getElementById("Mostrar"+b+a).style.display="";document.getElementById("Rta"+b+a).style.display="none"}function actualizarSolapa(a){document.getElementById("solapa_tipo").value=a;if(a=="Destacados"){if(CurrentComentarioRecientes!="")document.getElementById("ResponderRecientes"+CurrentComentarioRecientes).innerHTML="";if(document.getElementById("cargoDestacados").value=="0"){document.getElementById("cargoDestacados").value="1";getComentariosDestacados()}}else if(CurrentComentarioDestacados!="")document.getElementById("ResponderDestacados"+CurrentComentarioDestacados).innerHTML=""}function mostrarComentarioEnEsperaSinModal(q,c,h,g){var e=document.getElementById("nota_titulo").value,f=document.getElementById("nota_id").value,n=document.getElementById("txtArea_comentario"),k=document.getElementById("comentario_vacio"),i=document.getElementById("comentario_usuario"),j=document.getElementById("comentario_fecha"),l=document.getElementById("comentario_hora"),b=document.getElementById("comentario_comentario"),m=document.getElementById("imagenAvatar"),a=new Date,d=false;if(document.getElementById("esConversacion")!=null&&document.getElementById("esConversacion").value=="1"){if(document.getElementById("chkPublicarHijo")!=null)d=document.getElementById("chkPublicarHijo").checked}else{if(document.getElementById("chkPublicar")!=null&&document.getElementById("chkPublicar").parentNode.style.display=="block")d=document.getElementById("chkPublicar").checked;if(document.getElementById("chkPublicarHijo")!=null&&document.getElementById("chkPublicar").parentNode.style.display=="block")d=document.getElementById("chkPublicarHijo").checked}if(document.getElementById("chkPublicar")!=null)document.getElementById("chkPublicar").checked=false;if(document.getElementById("txtArea_comentario")!=null)n.value="";if(LeerCookie("LNBannerGuia")==""){self.parent.document.getElementById("textoSinBannerGuia").style.display="none";self.parent.document.getElementById("textoConBannerGuia").style.display="block";SetCookieFullHoras("LNBannerGuia","1",5,"/",".lanacion.com.ar","")}else{self.parent.document.getElementById("textoConBannerGuia").style.display="none";self.parent.document.getElementById("textoSinBannerGuia").style.display="block"}i.innerHTML=c;h=decodeURIComponent(h);b.innerHTML=h.replace(/&amp;amp;#38;/ig,"&").replace(/&amp;amp;#62;/ig,">").replace(/&amp;amp;#60;/ig,"<");j.innerHTML=(a.getDate()<10?"0":"")+a.getDate()+"."+(a.getMonth()<9?"0":"")+(a.getMonth()+1)+"."+String(a.getFullYear()).substring(2,4);l.innerHTML=(a.getHours()<10?"0":"")+a.getHours()+":"+(a.getMinutes()<10?"0":"")+a.getMinutes();m.src="http://bucket.lanacion.com.ar/avatar/default.jpg";var p=document.getElementById("solapa_tipo").value;if(g!=""&&typeof g!="undefined"){document.getElementById("Responder"+p+g).innerHTML=k.innerHTML;document.getElementById("comentario_vacio").style.display="none"}else{document.getElementById("comentario_vacio").style.display="block";document.location="#comentar"}if(d){if(document.getElementById("tipoComentario")!=null){if(document.getElementById("tipoComentario").value=="1")var o={name:e,href:"http://www.lanacion.com.ar/"+f+"?utm-source=p-publicarFB",caption:c+' hizo el comentario "'+b.innerHTML.substr(0,140)+'..." en esta Nota de lanacion.com',description:"",media:[{type:"image",src:"http://www.lanacion.com.ar/_ui/desktop/imgs/logos/ln-com.gif",href:"http://www.lanacion.com.ar/"}]};if(document.getElementById("tipoComentario").value=="C")var o={name:e,href:"http://servicios.lanacion.com.ar/consignas/"+f+"-",caption:c+' hizo el comentario "'+b.innerHTML.substr(0,140)+'..." en esta Consigna de lanacion.com',description:"",media:[{type:"image",src:"http://servicios.lanacion.com.ar/_ui/desktop/imgs/logos/ln-com.gif",href:"http://servicios.lanacion.com.ar/"}]};if(document.getElementById("tipoComentario").value=="F")var o={name:e,href:"http://servicios.lanacion.com.ar/foros/"+f+"-",caption:c+' hizo el comentario "'+b.innerHTML.substr(0,140)+'..." en este Foro de lanacion.com',description:"",media:[{type:"image",src:"http://servicios.lanacion.com.ar/_ui/desktop/imgs/logos/ln-com.gif",href:"http://servicios.lanacion.com.ar/"}]};if(document.getElementById("tipoComentario").value=="P")var o={name:e,href:"http://servicios.lanacion.com.ar/espectaculos/cartelera-cine/pelicula/"+f+"-",caption:c+' hizo el comentario "'+b.innerHTML.substr(0,140)+'..." en esta Película de lanacion.com',description:"",media:[{type:"image",src:"http://servicios.lanacion.com.ar/_ui/desktop/imgs/logos/ln-com.gif",href:"http://servicios.lanacion.com.ar/"}]};FB.init({appId:"4b14615ba13086d283ca588b256aa328",status:true,cookie:true,xfbml:true});FB.ui({method:"stream.publish",message:"",target_id:LeerCookie("usuario%5Ffacebook%5Fid"),attachment:o,user_prompt_message:"En que estás pensando"},function(a){if(a&&a.post_id)tb_remove();else tb_remove()})}}else tb_remove()}function insertarFechaUltimoComentario(){$.ajax({url:"/Proxy.svc/PostString/Herramienta/InsertarFechaUltimoComentario?query=usuario_id="+LeerCookie("usuario%5Fid")+"%26sitio_id=1",type:"POST",timeout:XhrTimeOut,contentType:"application/xml;charset=utf-8",data:"",success:function(){},error:function(){request.abort}})}function HabilitarReporteOpcional(){if(document.getElementById("cmb_reporte").value==8)document.getElementById("txt_motivo").disabled=false;else{document.getElementById("txt_motivo").value="";document.getElementById("txt_motivo").disabled=true}}function SecureModalReport(h,m,b,j,i,f,k,l){if(document.getElementById("cmb_reporte").value=="0")window.alert("Tenés que elegir un motivo.");else{var d=LeerCookie("usuario%5Fdetalle%5Fguid").replace("{","").replace("}",""),e=LeerCookie("usuario%5Fdetalle%5Fnick"),g=LeerCookie("usuario%5Fid"),c=LeerCookie("usuario%5Fusuario"),a="";a="../../Proxy.svc/PostString/Comentario/RASec?query=";a=a+"entrada_id="+h;a=a+"%26comentario_id="+b;a=a+"%26usuario_idReporte="+j;a=a+"%26ipDeReporte="+l;a=a+"%26comentarioReporte="+f;a=a+"%26reporte_id="+i;a=a+"%26cookie_usuario_GUID="+d;a=a+"%26cookie_usuario_nick="+e;a=a+"%26cookie_usuario_id="+g;a=a+"%26cookie_usuario_usuario="+c;$.ajax({url:a,type:"POST",contentType:"application/xml;charset=utf-8",data:"",timeout:XhrTimeOut,success:function(f){var e="";e=$(f).find("string").text();e=e.split("|");if(e[0]=="0"){$("#formLoginReportar_ocultar").css("display","none");$("#error").css("display","block");var g=$(f).find("string").text().split("|");$("#error").html("<div>"+g[1]+"</div>")}else{var a,c=parent.document.getElementById("solapa_tipo").value;if(k=="true")a="#_comentario_id"+c+b;else a="#_respuesta_id"+c+b;var d;d=self.parent.$(a).attr("class");d=d.replace("sinReporte","avisoReporte");self.parent.$(a).attr("class",d);a="#Reportar"+c+b;self.parent.$(a).attr("onclick","javascript:return false;");a="#Respuesta"+c+b;self.parent.$(a).attr("onclick","javascript:return false;");a="#aVotarPos"+c+b;self.parent.$(a).attr("onclick","javascript:return false;");a="#aVotarNeg"+c+b;self.parent.$(a).attr("onclick","javascript:return false;");self.parent.tb_remove()}},error:function(){request.abort}});return false}}function ocultarComentarios(){var b=parent.document.getElementById("solapa_tipo").value;if(b=="Recientes")CurrentComentarioRecientes="";else CurrentComentarioDestacados="";var a="";a=document.getElementById("lnkMostrarComentarios"+b);a.className="";a.innerHTML="";return false}function obtenerModoRequest(){var a=0;try{if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)||/Opera[\/\s](\d+\.\d+)/.test(navigator.userAgent))if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var b=new Number(RegExp.$1);if(b<8){request=new XMLHttpRequest;a=1}else{a=2;if(window.XDomainRequest)request=new XDomainRequest}}else{request=new XMLHttpRequest;a=1}else{a=3;request=new XMLHttpRequest}}catch(c){alert("No se puede instanciar un objecto Ajax: "+c.description)}return a}function mostrarComentariosTodos(a,w,u,q,b,r,s,g,v,d,p){var h="",t=true;if(p!="")h=p;else h=parent.document.getElementById("solapa_tipo").value;var c="";c=document.getElementById("cboOrdenComentario").value;if(h=="Destacados")c="mascalificado";if(!esPrimeraCarga){var l=$("#hddUltimoIdComentario_"+h).val();if(l==undefined)return false;$("#hddUltimoIdComentario_"+h).remove()}var i=$("#contenedorComentarios"+h),k=document.getElementById("tipoComentario"),o=$("#divNotaCerrada #hddNotaCerrada").val(),e="LN";if(k!=undefined){if(k.value=="C")e="LNCONSIGNA";if(k.value=="F")e="LNFORO";if(k.value=="P")e="LN"}i.append("<div id='divImgCargando' style='text-align:center;'><img align='center' id='imgCargando' src='/_ui/desktop/imgs/layout/cargando-modal.gif' /></div>");paginaGlobal=b;var j=0;if(q==0)j=comentariosXPaginaGlobal;else j=q;var f="",x=document.getElementById("contenedorTodosComentarios");entrada_idGlobal=a;nota_idGlobal=w;categoria_idGlobal=u;cantidadTotalComentariosGlobal=r;ingresarComentarioGlobal=s;preferencia_idGlobal=g;objeto_idGlobal=v;sitio_idGlobal=d;objeto_id_seleccionado=0;g=0;if(b=="")b=0;var f="";cookieLogin=LeerCookie("cookieLogin");if(cookieLogin=="")logueado="0";else logueado="1";if(modo=="0")return false;if(modo=="1"){if(esPrimeraCarga)f="/ProxyCache.svc/GetString/Comentario/ObtenerComentariosPrimerosRenderizado?query=codigoSitio="+e+"%26entradaId="+a+"%26parametros=<parametros><entrada_id>"+a+"</entrada_id><cantidad>0</cantidad><pagina>"+b+"</pagina><Sortby>"+c+"</Sortby><sitio_id>"+d+"</sitio_id></parametros>%26logueado="+logueado+"%26primeraCarga="+esPrimeraCarga;else f="/ProxyCache.svc/GetString/Comentario/ObtenerComentariosPaginadoRenderizadoSortPorID?query=codigoSitio="+e+"%26entradaId="+a+"%26pagina="+b+"%26comentariosXpagina="+j+"%26parametros=<parametros><entrada_id>"+a+"</entrada_id><cantidad>0</cantidad><pagina>"+b+"</pagina><Sortby>"+c+"</Sortby><preferencia_id>"+g+"</preferencia_id><objeto_id>"+objeto_id_seleccionado+"</objeto_id><sitio_id>"+d+"</sitio_id></parametros>%26SortBy="+c+"%26preferencia_id="+g+"%26objeto_id="+objeto_id_seleccionado+"%26sitio_id="+d+"%26comentario_id="+l+"%26logueado="+logueado+"%26primeraCarga="+esPrimeraCarga;cargandoContenido=true;$.ajax({url:f,type:"GET",timeout:XhrTimeOut,contentType:"application/xml;charset=utf-8",async:t,data:"",success:function(a){mostrarRespuestas(a,esPrimeraCarga,i)},error:function(){request.abort;ProcesarError()}})}else{if(esPrimeraCarga)f=sitioWebServices+"WCFComentario/Comentario.svc/ObtenerComentariosPrimerosRenderizado?codigoSitio="+e+"&entradaId="+a+"&parametros=<parametros><entrada_id>"+a+"</entrada_id><cantidad>0</cantidad><pagina>"+b+"</pagina><Sortby>"+c+"</Sortby><sitio_id>"+d+"</sitio_id><logueado>"+logueado+"</logueado><primeraCarga>"+esPrimeraCarga+"</primeraCarga><notaCerrada>"+o+"</notaCerrada></parametros>";else f=sitioWebServices+"WCFComentario/Comentario.svc/ObtenerComentariosPaginadoRenderizadoSortPorID?codigoSitio="+e+"&entradaId="+a+"&pagina="+b+"&comentariosXpagina="+j+"&parametros=<parametros><entrada_id>"+a+"</entrada_id><cantidad>0</cantidad><pagina>"+b+"</pagina><Sortby>"+c+"</Sortby><preferencia_id>"+g+"</preferencia_id><objeto_id>"+objeto_id_seleccionado+"</objeto_id><sitio_id>"+d+"</sitio_id><logueado>"+logueado+"</logueado><primeraCarga>"+esPrimeraCarga+"</primeraCarga><notaCerrada>"+o+"</notaCerrada></parametros>&SortBy="+c+"&preferencia_id="+g+"&objeto_id="+objeto_id_seleccionado+"&sitio_id="+d+"&comentario_id="+l+"&logueado="+logueado+"&primeraCarga="+esPrimeraCarga;if(modo=="2"){request.open("GET",f,true);request.onload=function(){clearTimeout(m);mostrarRespuestas(StringtoXML(request.responseText),esPrimeraCarga,i)};function n(){request.abort();ProcesarError()}var m=setTimeout(n,XhrTimeOut);request.send()}else{request.open("GET",f,true);request.onreadystatechange=function(){if(request.readyState==4&&request.status==200){clearTimeout(m);mostrarRespuestas(request.responseXML,esPrimeraCarga,i)}};function n(){request.abort();ProcesarError()}var m=setTimeout(n,XhrTimeOut);request.send()}}return false}function mostrarRespuestas(k,i,e){var a="";a=$(k).find("string").text();a=a.replace(/&gt;/g,">");a=a.replace(/&lt;/g,"<");a=a.replace(/&amp;/g,"&");fixComentariosHTML5(a,e);var h=$("#solapa_tipo").val(),j=parseInt($("#hddPaginaNumero"+h).val())+1;$("#hddPaginaNumero"+h).val(j);$("img#imgCargando",e).remove();estado="";if(i){var d=0,g=0,f=0,c=0,b=0;if(document.getElementById("hddTotalRespuestasRecientes")!=null)d=document.getElementById("hddTotalRespuestasRecientes").value;if(document.getElementById("hddTotalRecientes")!=null)g=document.getElementById("hddTotalRecientes").value;if(document.getElementById("hddTotalDestacados")!=null)f=document.getElementById("hddTotalDestacados").value;if(document.getElementById("hddTotalRespuestasDestacados")!=null)c=document.getElementById("hddTotalRespuestasDestacados").value;if(document.getElementById("hddTotalComentarios")!=null)b=document.getElementById("hddTotalComentarios").value;document.getElementById("totalRecientes").innerHTML=g;document.getElementById("totalRespuestasRecientes").innerHTML=d;if(document.getElementById("totalDestacados")!=null)document.getElementById("totalDestacados").innerHTML=f;if(document.getElementById("totalRespuestasDestacados")!=null)document.getElementById("totalRespuestasDestacados").innerHTML=c;if(document.getElementById("cantTotalComentarios")!=null)document.getElementById("cantTotalComentarios").innerHTML=b;if(document.getElementById("cantTotalComentariosAbajo")!=null)document.getElementById("cantTotalComentariosAbajo").innerHTML=b}cargandoContenido=false;FB.XFBML.parse()}function StringtoXML(b){if(window.ActiveXObject){var a=new ActiveXObject("Microsoft.XMLDOM");a.async="false";a.loadXML(b)}else var c=new DOMParser,a=c.parseFromString(b,"text/xml");return a}function getConversacion(d,a){var b="",c=$("#contenedorComentarios");c.append("<div id='divImgCargando' style='text-align:center;'><img align='center' id='imgCargando' src='/_ui/desktop/imgs/layout/cargando-modal.gif' /></div>");if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){b="/ProxyCache.svc/GetString/Comentario/ObtenerHiloDeComentario?query=comentario_id="+d+"%26entrada_id="+a+"%26sitio_id=1%26parametros=<parametros><entrada_id>"+a+"</entrada_id><sitio_id>1</sitio_id></parametros>";$.ajax({url:b,type:"GET",timeout:XhrTimeOut,contentType:"application/xml;charset=utf-8",async:true,data:"",success:function(a){MostrarComentariosConversacion(a,esPrimeraCarga,c)},error:function(){request.abort;ProcesarError()}})}else{b="http://wscomunidad.lanacion.com.ar/WCFComentario/Comentario.svc/ObtenerHiloDeComentario?comentario_id="+d+"&entrada_id="+a+"&sitio_id=1&parametros=<parametros><entrada_id>"+a+"</entrada_id><sitio_id>1</sitio_id></parametros>";request.open("GET",b,true);request.onreadystatechange=function(){if(request.readyState==4&&request.status==200){clearTimeout(e);mostrarRespuestas(request.responseXML,esPrimeraCarga,c)}};function f(){request.abort();ProcesarError()}var e=setTimeout(f,XhrTimeOut);request.send()}return false}function MostrarComentariosConversacion(c,d,b){var a="";a=$(c).find("string").text();a=a.replace(/&gt;/g,">");a=a.replace(/&lt;/g,"<");a=a.replace(/&amp;/g,"&");fixComentariosHTML5(a,b);$("img#imgCargando",b).remove();FB.XFBML.parse()}function traerMasComentarios(){var b=$("#solapa_tipo").val(),c=$("#hddPaginaNumero"+b).val();if(c>1)esPrimeraCarga=false;else esPrimeraCarga=true;if(document.getElementById("cantidadComentariosConsulta"+b)!=null){var d="";d=document.getElementById("cantidadComentariosConsulta"+b).innerHTML;var e;e=comentariosXPaginaGlobal;var a=0;a=(d-10)/e;a=Math.round(a*1e3)/1e3;a=Math.ceil(a)}if(cargandoContenido||!muestraComentarios||document.getElementById("hddPaginaNumero"+b).value==0||c>a||esPrimeraCarga)return;var f=$(window);if(f.height()+f.scrollTop()>=$(document).height()-80){var g=$("#hddEntradaId").val();mostrarComentariosTodos(g,0,0,0,parseInt(c),0,1,-1,-1,1,"")}}function getComentariosRecientes(){esPrimeraCarga=true;var a=$("#hddEntradaId").val();$("#hddPaginaNumeroRecientes").val(0);$("#hddPaginaNumeroDestacados").val(0);$("#cargoDestacados").val(0);$("#verComentariosRecientes").css("display","block");mostrarComentariosTodos(a,0,0,0,0,0,1,-1,-1,1,"Recientes")}function getComentariosDestacados(){esPrimeraCarga=true;var a=$("#hddEntradaId").val();$("#hddPaginaNumeroDestacados").val(0);$("#verComentariosDestacados").css("display","block");mostrarComentariosTodos(a,0,0,0,0,0,1,-1,-1,1,"Destacados")}function getComentarios(){esPrimeraCarga=false;var c=$("#solapa_tipo").val(),b=$("#hddPaginaNumero"+c).val(),a=$("#hddEntradaId").val();if(c=="Destacados"){$("#verComentariosDestacados").css("display","none");mostrarComentariosTodos(a,0,0,0,parseInt(b),0,1,-1,-1,1,"Destacados")}else{$("#verComentariosRecientes").css("display","none");mostrarComentariosTodos(a,0,0,0,parseInt(b),0,1,-1,-1,1,"Recientes")}muestraComentarios=true}function cajaComentarLogin(){LeerCookie("cookieLogin")==""&&layer("Enviar e-mail",sitioRegistracionSeguro+"/ingresar-modal?pagina="+sitioActual+"/herramientas/comunidades/closeModalRegistracion.html&width=455&height=400&tipoParticipacion=1&sitioId=1","")}function LimitarCaracteres(a,b){cantidad=cantMaxCaracteresComentario;if(LeerCookie("cookieLogin")=="")document.getElementById(a).value="";else{if(document.getElementById(a).value.length>=cantidad)document.getElementById(a).value=document.getElementById(a).value.substring(0,cantidad);var c=cantidad-parseInt(document.getElementById(a).value.length);document.getElementById("txtlimite"+b).innerHTML=c}}function maxChars(a,b){if(document.getElementById(a).value.length>b){document.getElementById(a).value=document.getElementById(a).value.substring(0,b);alert("Alcanzaste el límite de caracteres.")}}function fixComentariosHTML5(a,b){var c=["nav","section","header","article","footer"],d=["id","class"];$.each(c,function(d,b){var c=new RegExp("<(/?)"+b+"([^>]*)>","g");a=a.replace(c,'<$1span tag="'+b+'"$2>')});$(b).append(a);var e=function(c,a){a=$(a);var b=$("<"+a.attr("tag")+"/>");$.each(d,function(d,c){b.attr(c,a.attr(c))});b.html(a.html());a.replaceWith(b)};for(i=0;i<nivelesFixIe;i++)$("span[tag]",b).each(function(a,b){e(a,b)});return true}function actualizarCantidadCaracteres(b,a){switch(b){case"2":cantMaxCaracteresComentario=cantMaxCaracteresComentarioCarteleraCine;break;case"7":if(a=="1")cantMaxCaracteresComentario=cantMaxCaracteresComentarioConsigna;else cantMaxCaracteresComentario=cantMaxCaracteresComentarioForo}}function ProcesarError(){var a=$("#solapa_tipo").val(),b=$("#hddPaginaNumero"+a).val();if(b==0){$("#divDetalleComentarios"+a).css("display","none");$("#divVerTodos"+a).css("display","none")}$("div img#imgCargando").remove();$("#contenedorComentarios"+a).append("<div class='interfase' style='width:80%;margin-left:85px;'>Por el momento los comentarios no están disponibles. Intente en unos minutos.</div>")}window.LN=window.LN||{};LN.Utilitarios=LN.Utilitarios||{};function doFill(a){if(a.value=="")a.value=a.defaultValue}LN.Utilitarios.doFill=doFill;function doClear(a){if(a.value==a.defaultValue)a.value=""}LN.Utilitarios.doClear=doClear;function mostrarPorId(a){if(typeof a!="object")a=document.getElementById(a);if(a!=null)a.style.display="block"}function ocultarPorId(a){if(typeof a!="object")a=document.getElementById(a);if(a!=null)a.style.display="none"}jQuery.fn.tabs=function(){return jQuery(this).each(function(){var a={selected:"activo",visible:"on",invisible:"off"},c=location.hash.slice(1),b=jQuery(this);if(c!=""&&c.substring(0,3)=="tab"){var d=c.substring(4,c.length);b.find("."+a.selected).removeClass(a.selected);b.find("."+d).addClass(a.selected);b.find("."+a.visible).removeClass(a.visible).addClass(a.invisible);b.find("#"+d).addClass(a.visible)}b.find("ul:first li").click(function(){b.find("."+a.selected).removeClass(a.selected);var c=$(this).attr("class");$(this).addClass(a.selected);var d=b.find("."+a.visible);d.removeClass(a.visible);d.addClass(a.invisible);$("#"+c).removeClass(a.invisible);$("#"+c).addClass(a.visible);location.hash="tab-"+c})})};jQuery.fn.cleanTabs=function(){return jQuery(this).each(function(){var a={selected:"activo",visible:"on",invisible:"off"},b=jQuery(this);b.find("ul:first li").click(function(){b.find("."+a.selected).removeClass(a.selected);var d=$(this).attr("class");$(this).addClass(a.selected);var c=b.find("."+a.visible);c.removeClass(a.visible);c.addClass(a.invisible);$("#"+d).removeClass(a.invisible);$("#"+d).addClass(a.visible)})})};var cantidadNotasImportante=6,cantidadNotasInteresante=6,cantidadNotasInteresanteRevista=5;function obtenerCajaLoInteresantePorUbicacion(){$.ajax({url:"http://outbrain.glanacion.com/obtener-ubicacion",cache:true,dataType:"jsonp",jsonp:"callback",jsonpCallback:"callbackClientLocation",data:""})}function callbackClientLocation(b){var a=window.location.href.match("/[0-9]+")[0];a!=null?(a=a.split("/")[1]):(a="index");b.rgn!="2"?obtenerCajaLoInteresante(a):obtenerCajaLoInteresanteOutbrain(a)}function obtenerCajaLoInteresanteOutbrain(a){$("#item #entretenimiento").replaceWith('<div class="OUTBRAIN" data-src="www.lanacion.com.ar/'+a+'" data-widget-id="AR_1" data-ob-template="lanacion"></div><script type="text/javascript" async="async" src="http://widgets.outbrain.com/outbrain.js"><\/script>')}function obtenerCajaLoImportante(a){if(Math.ceil(Math.random()*2)==2)getJSONP("/jsonp/nota/cajaLoImportanteCTR",cajaLoImportanteCTRCallbackJSON,{root_nota_id:a,cant_notas:cantidadNotasImportante,imagen_width:209});else getJSONP("/jsonp/nota/cajaLoImportanteNoHome",cajaLoImportanteNoHomeCallbackJSON,{root_nota_id:a,cant_notas:cantidadNotasImportante,imagen_width:209})}function obtenerCajaLoInteresante(){if(Math.ceil(Math.random()*2)==2)getJSONP("/jsonp/nota/cajaLoInteresanteRevistas",cajaLoInteresanteRevistasCallbackJSON,{cant_notas:cantidadNotasInteresante,imagen_width:186});else getJSONP("/jsonp/nota/cajaLoInteresante",cajaLoInteresanteCallbackJSON,{cant_notas:cantidadNotasInteresante,imagen_width:186})}function cajaLoImportanteCallbackJSON(a){armarCajaLoImportante(a.loImportante,"v1");_gaq.push(["_trackEvent","ABcajaimportante","v1","view",1,true])}function cajaLoImportanteCTRCallbackJSON(a){armarCajaLoImportante(a.loImportante,"v2");_gaq.push(["_trackEvent","ABcajaimportante","v2","view",1,true])}function cajaLoImportanteNoHomeCallbackJSON(a){armarCajaLoImportante(a.loImportante,"v3");_gaq.push(["_trackEvent","ABcajaimportante","v3","view",1,true])}function cajaLoInteresanteCallbackJSON(a){armarCajaLoInteresante(a[0].loInteresante,{})}function cajaLoInteresanteRevistasCallbackJSON(a){$("section#entretenimiento").addClass("revistas");$("div#techo-caja-lo-interesante").html("lo último de las revistas");armarCajaLoInteresante(a[0].loInteresante,{},true)}function armarCajaLoImportante(c,h){for(var f=0,b=0;b<cantidadNotasImportante;b++){var a="#itemLoMasImportante_"+b,d=c[b].nota.hace;if(!isNullOrEmpty(d)){d="Hace <b>"+d+"'</b> ";$("#pipeline",a).html("&#xa0;|&#xa0;")}var e=c[b].nota.titulo,g=c[b].nota.firma;if(g.length>1){$("#itemLoMasImportante_por",a).html("Por&#xa0;");$("#itemLoMasImportante_firma",a).html(g)}$(a).addClass(c[b].nota.estilo);$(a).attr("class",$(a).attr("class").replace("toi-33","toi-33"+(b+1)));$(a).addClass("nid"+c[b].nota.id);$("a",a).each(function(){$(this).attr("href",c[b].nota.url+$(this).attr("href"));$(this).attr("target",c[b].nota.target);$(this).attr("rel",c[b].nota.rel);$(this).attr("title",e);$(this).attr("onclick","_gaq.push(['_trackEvent', 'ABcajaimportante', '"+h+"', 'click', 1, false]);")});$("#itemLoMasImportante_sitio",a).attr("href",c[b].nota.sitio_url);$("#itemLoMasImportante_sitio",a).attr("onclick","");$("#itemLoMasImportante_sitio",a).html(c[b].nota.sitio);$("#itemLoMasImportante_tema",a).html(c[b].nota.tema);$("#itemLoMasImportante_titulo",a).html(e);$("#itemLoMasImportante_imagen",a).attr("alt",e);$("#itemLoMasImportante_imagen",a).attr("src",c[b].nota.imagen.replace(".jpg","w184.jpg"));$("#itemLoMasImportante_bajada",a).html(c[b].nota.bajada);$("#itemLoMasImportante_hace",a).html();$("#itemLoMasImportante_por",a).html(c[b].nota.por);$("#itemLoMasImportante_firma",a).html(c[b].nota.firma);$("#itemLoMasImportante_cantComentarios",a).html(c[b].nota.comentarios);if(c[b].nota.id==NotaIdParaNotaRepetidaCajaLoImportante){f=1;$(a).css("display","none")}else $(a).css("display","block")}f==0&&$("#itemLoMasImportante_"+(cantidadNotasImportante-1)).css("display","none");$("section#informacion").css("display","block")}function armarCajaLoInteresante(c,a,e){var b=0;contNotasComunes=1;$.each(a,function(c,a){if(a.nota.id==NotaIdParaNotaRepetidaCajaLoImportante)b=1});$.each(c,function(m,d){var k=0;if(e!=true||a.length>0)k=b>0?0:1;if(d.nota.id!=NotaIdParaNotaRepetidaCajaLoImportante)if(contNotasComunes<=c.length-k){var l=d.nota.tema.split("_"),h=d.nota.titulo,i=d.nota.firma,g=d.nota.estilo,j="_gaq.push(['_trackEvent', 'entretenimiento', 'nota', 'nota_"+contNotasComunes+"']);";g+=" nid"+d.nota.id;if(g.indexOf("conFoto")<0)g+=" conFoto";g.replace("toi-44","toi-44"+contNotasComunes);g.replace("toi-55","toi-55"+contNotasComunes);var f="";f+='<article id="itemLoMasInteresante_'+contNotasComunes+'" class="'+g+'" style="display:block;">';f+='<a id="itemLoMasInteresante_sitio" class="sitio" onClick="'+j+'" title="'+h+'" rel="'+d.nota.rel+'" target="'+d.nota.target+'" href="'+d.nota.url+'">'+d.nota.sitio+"</a>";f+='<a id="itemLoMasInteresante_tema"  class="tema" onClick="'+j+'" title="'+h+'" rel="'+d.nota.rel+'" target="'+d.nota.target+'" href="'+d.nota.url+'"> '+l[1]+"</a>";f+='<a id="itemLoMasInteresante_info"  class="info" onClick="'+j+'" title="'+h+'" rel="'+d.nota.rel+'" target="'+d.nota.target+'" href="'+d.nota.url+'">';f+='<img id="itemLoMasInteresante_img" class="lazyLoad" title="" alt="'+h+'" src="'+d.nota.imagen+'"/>';f+='<h4 id="itemLoMasInteresante_titulo">'+h+"</h4>";f+="<p>";f+='<span id="itemLoMasInteresante_hace" class="hace"></span>';f+='<span id="itemLoMasInteresante_bajada">'+d.nota.bajada+"</span> ";f+='<span id="itemLoMasInteresante_por">'+(i.length>1)?"Por ":"</span>";f+='<b class="firma" id="itemLoMasInteresante_firma">'+(i.length>1)?i:"</b>";f+="</p>";f+="</a>";f+="</article> ";$("section#entretenimiento").append(f);contNotasComunes++}else return false});var d=1;$.each(a,function(i,a){if(a.nota.id!=NotaIdParaNotaRepetidaCajaLoImportante)if(contNotasComunes<=5){var h=a.nota.tema.split("_"),e=a.nota.titulo,f=a.nota.firma,c=a.nota.estilo,g="_gaq.push(['_trackEvent', 'entretenimiento', 'P-nota', 'nota_"+d+"']);";c+=" nid"+a.nota.id;c+=" tema-espacio-patrocinado";if(c.indexOf("conFoto")<0)c+=" conFoto";c.replace("toi-44","toi-44"+contNotasComunes);c.replace("toi-55","toi-55"+contNotasComunes);var b="";b+='<article id="itemLoMasInteresante_'+contNotasComunes+'" class="'+c+'" style="display:block;">';b+='<a id="itemLoMasInteresante_sitio" class="sitio" onClick="'+g+'" title="'+e+'" rel="'+a.nota.rel+'" target="'+a.nota.target+'" href="'+a.nota.url+'">'+a.nota.sitio+"</a>";b+='<a id="itemLoMasInteresante_tema"  class="tema" onClick="'+g+'" title="'+e+'" rel="'+a.nota.rel+'" target="'+a.nota.target+'" href="'+a.nota.url+'"> Espacio patrocinado</a>';b+='<a id="itemLoMasInteresante_info"  class="info" onClick="'+g+'" title="'+e+'" rel="'+a.nota.rel+'" target="'+a.nota.target+'" href="'+a.nota.url+'">';b+='<img id="itemLoMasInteresante_img" class="lazyLoad" title="" alt="'+e+'" src="'+a.nota.imagen+'"/>';b+='<h4 id="itemLoMasInteresante_titulo">'+e+"</h4>";b+="<p>";b+='<span id="itemLoMasInteresante_hace" class="hace"></span>';b+='<span id="itemLoMasInteresante_bajada">'+a.nota.bajada+"</span> ";b+='<span id="itemLoMasInteresante_por">'+(f.length>1)?"Por ":"</span>";b+='<b class="firma" id="itemLoMasInteresante_firma">'+(f.length>1)?f:"</b>";b+="</p>";b+="</a>";b+="</article> ";$("section#entretenimiento").append(b);d++;contNotasComunes++}});$("section#entretenimiento article").length==5&&$("section#entretenimiento").css("display","block")}$(document).ready(function(){setearTamanoLetra();var a=$("#hayComentarios").val();(a==1||a==2)&&$(window).scroll(traerMasComentarios);LeerCookie("cookieLogin")!=""&&refreshLogin();$(window).scroll(function(){var b=$("#cuerpo").height(),d=$("#cuerpo").offset().top,e=d+b,a=$("#herramientas").offset().top+$("#herramientas").height(),c=$("#footer").offset().top-245;if($(window).scrollTop()>600&&$(window).scrollTop()>a){$("#herramientas").addClass("scroll");$("header").css("z-index","1")}if($(window).scrollTop()>c||$(window).scrollTop()<600||$(window).scrollTop()<a){$("#herramientas").removeClass("scroll");$("header").css("z-index","2")}});counterFacebook(document.URL);counterTwitter(document.URL);/Android|webOS|iPhone|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&$(".wapp").css("display","inline-block")});window.LN=window.LN||{};LN.Compartir=LN.Compartir||{};function CompartirGaleriaFacebook(a){var d=$("#share_url").val(),e="lanacion.com",b=$("#galeria_"+a+"_epigrafe").val(),c=$("#galeria_"+a+"_img").val();postToFeed(d,c,e," ",b);_gaq.push(["_trackEvent","Compartir","Foto","En-Facebook"])}function CompartirTextoFacebook(b,e){var c=$("#share_url").val(),d=$("#share_title").val()+" - lanacion.com",a=b;picture="http://www.lanacion.com.ar/_ui/desktop/imgs/logos/ln-facebook.gif";postToFeed(c,picture,d," ",a);_gaq.push(["_trackEvent","Compartir",e,"En-Facebook"])}function postToFacebook(a){var c=$("#imagen_"+a).attr("src"),d=$("#share_url").val(),e=$("#imagen_"+a).attr("alt"),b=$("#epigrafe_"+a).text();postToFeed(d,c,e," ",b);_gaq.push(["_trackEvent","Compartir","Foto","En-Facebook"])}function postToFeed(e,d,f,c,a){a=a;var g={method:"feed",link:e,picture:d,name:f,caption:c,description:a};function b(){}FB.init({appId:"205326199490321",status:true,cookie:true,xfbml:true});FB.ui(g,b)}function CompartirGaleriaTwitter(b){var a=self.parent.$("#galeria_"+b+"_epigrafe").val();CompartirTextoTwitter(a,"Foto")}function postToTwitter(i){var a="https://twitter.com/intent/tweet?text=",d=self.parent.$("#epigrafe_"+i).text(),f=$("#share_url").val();a+=encodeURI(d);a+="&url="+f+"&via=lanacion.com&lang=es";var c=575,b=400,e=($(window).width()-c)/2,h=($(window).height()-b)/2,a=a,g="status=1,width="+c+",height="+b+",top="+h+",left="+e;window.open(a,"twitter",g);_gaq.push(["_trackEvent","Compartir","Foto","En-Twitter"]);return false}function CompartirTextoTwitter(e,i){var a="https://twitter.com/intent/tweet?text=",d=e,g=$("#share_url").val();a+=encodeURI(d);a+="&url="+g+"&via=lanacion.com&lang=es";var c=575,b=400,f=($(window).width()-c)/2,j=($(window).height()-b)/2,a=a,h="status=1,width="+c+",height="+b+",top="+j+",left="+f;window.open(a,"twitter",h);_gaq.push(["_trackEvent","Compartir",i,"En-Twitter"]);return false}function CompartirGaleriaPinterest(a){var d=$("#share_url").val(),b=$("#share_title").val()+"  "+$("#galeria_"+a+"_epigrafe").val(),c=$("#galeria_"+a+"_img").val();url="http://pinterest.com/pin/create/button/?url="+encodeURI(d)+"&media="+encodeURI(c)+"&description="+encodeURI(b),width=600,height=300,left=($(window).width()-width)/2,top=($(window).height()-height)/2,opts="status=1,width="+width+",height="+height+",top="+top+",left="+left;window.open(url,"Pinterest",opts);_gaq.push(["_trackEvent","Compartir","Foto","En-Pinterest"]);return false}function postToPinterest(c){var g=$("#share_url").val(),e=$("#imagen_"+c).attr("src"),d=$("#share_title").val()+"  "+$("#epigrafe_"+c).text(),j="http://pinterest.com/pin/create/button/?url="+encodeURI(g)+"&media="+encodeURI(e)+"&description="+encodeURI(d),b=600,a=300,f=($(window).width()-b)/2,i=($(window).height()-a)/2,h="status=1,width="+b+",height="+a+",top="+i+",left="+f;window.open(j,"Pinterest",h);_gaq.push(["_trackEvent","Compartir","Foto","En-Pinterest"]);return false}$(document).ready(function(){$(".compartir-redes-over").hide();var a=false;$(".redes").mouseenter(function(){$(this).closest(".boton-compartir-redes").find(".compartir-redes-over").fadeIn("fast")});$(".boton-compartir-redes").mouseleave(function(){$(this).find(".compartir-redes-over").fadeOut("fast")})});function counterFacebook(a){a="http://graph.facebook.com/?id="+a;$.ajax({url:a,cache:true,dataType:"jsonp",jsonp:"callback",type:"POST",jsonpCallback:"LN.Compartir.dibujaCounterFacebook",data:""})}function counterTwitter(a){a="https://cdn.api.twitter.com/1/urls/count.json?url="+a;$.ajax({url:a,cache:true,dataType:"jsonp",jsonp:"callback",type:"POST",jsonpCallback:"LN.Compartir.dibujaCounterTwitter",data:""})}LN.Compartir.dibujaCounterFacebook=function(b){var a=b.shares;$("#herramientas .facebook b").html(a)};LN.Compartir.dibujaCounterTwitter=function(b){var a=b.count;$("#herramientas .twitter b").html(a)};LN.Compartir.popUpRedSocial=function(a){open(a,"","top=300,left=550,width=800,height=380")};var servicios="http://servicios.lanacion.com.ar";function validarFormEncuesta(e){var d=0,a=1,b="frmEncuesta"+e,c="";while(a<document.forms[b].elements.length){if(document.forms[b].elements[a].type=="radio")if(document.forms[b].elements[a].checked){c=c+document.forms[b].elements[a].id+",";d=d+1}a=a+1}if(d>0){document.forms[b].respuestas.value=c;return true}else return false}function VotarEncuesta(a){var c="frmEncuesta"+a,b=document.forms[c].respuestas.value;Tayer("Votar Encuesta",servicios+"/herramientas/comunidades/encuestas/encuestaChequearVotar.html?encuesta_id="+a+"&respuestas="+b,"")}function obtenerNoticiaBomba(){getJSONP("/jsonp/home/notaBomba-semibomba=1",notaBombaHomeCallbackJSON)}function notaBombaHomeCallbackJSON(a){if(a!=null&&(a.id!=NotaIdParaNotaRepetidaAlertaNotaBomba||NotaIdParaNotaRepetidaAlertaNotaBomba=="")&&(a.temaId!=TemaIdParaNotaBomba||TemaIdParaNotaBomba!=null||a.temaId!=null))if(a.titulo!=""&&a.titulo!=undefined&&a.titulo!=null){var b=a.url;if(a.sitio_id!=1)if(a.tipo=="semiBomba")b=b+"?utm_source=lanacion&utm_medium=semibomba";else if(a.tipo=="bomba")b=b+"?utm_source=lanacion&utm_medium=bomba";var i=a.titulo,g=a.imagen,d=a.categoria_descripcion,e=a.tema,h=a.tema_url,f=a.clase;if(a.tipo=="semiBomba")$("#ultimoMomentoResponsive.suscripcion").remove();else a.tipo=="bomba"&&$("#ultimoMomentoResponsive.sinsuscripcion").remove();$("article","#ultimoMomentoResponsive").attr("class",f);if(a.tipo=="semiBomba"){var c="Importante: ";if(a.tipo_techo=="1")c="ULTIMO MOMENTO : ";else if(a.tipo_techo=="2")c="ALERTA : ";else if(a.tipo_techo=="3")c="IMPORTANTE : ";$("#tituloBomba").html(c)}else $("#tituloBomba").html("Último momento: ");$("#ultimoMomentoTitulo","#ultimoMomentoResponsive").html(i);$("#ultimoMomentoLinkTitulo","#ultimoMomentoResponsive").attr("href",b);if(e!=""){$("#ultimoMomentoTopico","#ultimoMomentoResponsive").html(e);$("#ultimoMomentoTopico","#ultimoMomentoResponsive").attr("href","/"+h)}$("#ultimoMomentoFoto","#ultimoMomentoResponsive").attr("href",b);$("img","#ultimoMomentoFoto","#ultimoMomentoResponsive").attr("src",g);$("img","#ultimoMomentoFoto","#ultimoMomentoResponsive").attr("alt",d);$("img","#ultimoMomentoFoto","#ultimoMomentoResponsive").attr("title",d);$("#ultimoMomentoResponsive").show("fast")}else $("#ultimoMomentoResponsive").hide("fast")}window.LN=window.LN||{};LN.LiveFyre=LN.LiveFyre||{};LN.LiveFyre.siteIdLiveFyre="356483";LN.LiveFyre.networkConfig=LN.LiveFyre.networkConfig||{};LN.LiveFyre.convConfig=LN.LiveFyre.convConfig||{};LN.LiveFyre.urlRegistracion="https://registracion.lanacion.com.ar";LN.LiveFyre.logueoUsuario=false;LN.LiveFyre.cargoCaja=false;LN.LiveFyre.handlers=LN.LiveFyre.handlers||{};LN.LiveFyre.cargueComentarios=false;LN.LiveFyre.Init=function(){if(!LN.LiveFyre.cargueComentarios){LN.LiveFyre.cargueComentarios=true;LN.LiveFyre.networkConfig={network:"la-nacion.fyre.co",authDelegate:new fyre.conv.RemoteAuthDelegate};LN.LiveFyre.customStrings={editProfile:"Editar perfil",modQ:"Configuración de notificaciones",signIn:"Ingresar",signOut:"Salir",siteAdmin:"Moderación",archiveHeaderTitle:"Cargar imagen desde archivo",archiveShowMore:"Mostrar más",backToHotThreads:'Volver a "Conversaciones destacadas"',backToComments:'Volver a "lo más nuevo"',sortHotThreads:"Conversaciones destacadas",sortNewest:"Más nuevos",sortOldest:"Más viejos",sortSeparator:"|",sortTopComments:"Destacados",streamSorting:"Cargando",hotThreadsContentNotFoundMsg:"Todavía no hay suficientes comentarios",topCommentsContentNotFoundMsg:'Todavía no hay suficientes "me gusta"',threadBreakoutButton:"Ver conversación completa",showMore:"Ver más",showMoreLiveblog:"Ver más posteos",streamRefreshMsg:"Lo nuevo",refresh:"Actualizar",newComment:"Nuevo comentario",newComments:"Nuevos comentarios",newReply:"Nueva respuesta",newReplies:"Nuevas respuestas",listenerCount:"persona siguiendo",listenerCountPlural:"personas siguiendo",commentCountLabel:"comentario",commentCountLabelPlural:"comentarios",liveblogPostCountLabel:"posteo",liveblogPostCountLabelPlural:"posteos",commentNotifier:"Nuevo comentario",commentNotifierPlural:"Nuevos comentarios",liveblogNotifier:"Nuevo posteo",liveblogNotifierPlural:"Nuevos posteos",hovercardViewProfile:"Ver perfil",moderator:"moderador",timeDaysAgo:"día atrás",timeDaysAgoPlural:"días atrás",timeHoursAgo:"una hora",timeHoursAgoPlural:"unas horas",timeInDays:"en 1 día",timeInDaysPlural:"en %s días",timeInHours:"en %s hora",timeInHoursPlural:"en %s horas",timeInMinutes:"en %s minuto",timeInMinutesPlural:"en %s minutos",timeJustNow:"Ahora mismo",timeMinutesAgo:"minuto atrás",timeMinutesAgoPlural:"minutos atrás",commentTombstone:"El comentario ha sido borrado. Las respuestas que generó se siguen mostrando aquí abajo.",likesPlural:"Me gusta",likesSingular:"Me gusta",moderatorEditTimestamp:"Editado por un moderador",permalinkNotFoundMsg:"",quickProfileTooltip:"Ver perfil",featuredCommentsTitlePlural:"Destacado por el editor",featuredCommentsTag:"Destacado por el editor",flagButton:"Reportar",flagCancelButton:"Cancelar",flagCommentTooltip:"Reportar",flagConfirmationMessage:"Reportar %s's comentario como %s?",flagConfirmButton:"Confirmar",flagDefaultSelectOption:"Seleccionar",flagDisagree:"En desacuerdo",flagDisagreeButton:"En desacuerdo",flagDisagreeCommentTooltip:"En desacuerdo",flagEmail:"Email",flagEmailPlaceholder:"usuario@dominio.com",flagNotes:"Notas",flagNotesPlaceholder:"Escribe aquí...",flagOffensive:"Ofensivo",flagOffensiveButton:"Ofensivo",flagOffensiveCommentTooltip:"Ofensivo",flagOffTopic:"Fuera de tema",flagOffTopicButton:"Fuera de tema",flagOffTopicCommentTooltip:"Fuera de tema",flagSpam:"Spam",flagSpamButton:"Spam",flagSpamCommentTooltip:"Spam",flagSubtitle:"Reportar como",flagSuccessMsg:"Este comentario ha sido reportado.",flagTitle:"Reportar comentario",follow:"Seguir",liveblogFollow:"Seguir 'Liveblog'",liveblogUnfollow:"Dejar de seguir 'Liveblog'",unfollow:"Dejar de seguir",likeButton:"Me gusta",unlikeButton:"Me gusta",loadingPermalink:"Cargando URL",shareButton:"Compartir",shareButtonText:"Compartir",shareDefaultText:"Mira el comentario de %s",shareLabel:"Compartir en:",sharePermalink:"URL",shareText:"Acabo de escribir un comentario. ¡Miralo!",shareTextFacebook:"Acabo de escribir un comentario. ¡Miralo!",shareTextLinkedin:"Acabo de escribir un comentario. ¡Miralo!",shareTextTwitter:"Acabo de escribir un comentario. ¡Miralo!",shareTitle:"Compartir comentario",mentionCancelButton:"Cancelar",mentionConfirmButton:"Confirmar",mentionDefaultText:"¡Te mencioné en un comentario!",mentionErrorGeneral:"¡Ups! Algo no funcionó. Ya fue reportado.",mentionErrorNoneSelected:"Tenés que mencionar al menos una persona.",mentionMenuTitle:"Conectá tu cuenta para mencionar a tus amigos:",mentionSubtitleFacebook:"Compartir el posteo de Facebook con:",mentionSubtitleTwitter:"Compartir el tweet con:",mentionSuccessMsg:"Las menciones se han realizado exitosamente.",mentionTitle:"Compartir mención",voteDownvote:"No",voteReplyTitle:"¿Te ha ayudado esta respuesta?",voteTitle:"¿Es valioso este comentario?",voteUpvote:"Si",customHtmlDialogTitle:"Add Custom HTML",editButton:"Editar",editorDisabled:"Esta nota se encuentra cerrada a comentarios.",livechatOtherInstruction:"Presioná CMD+Enter para comentar",livechatPostEditButton:"Editar",livechatPostButtonLabel:"Comentar",livechatWindowsInstruction:"Presioná CTRL + Enter para comentar",postAsButton:"Comentar",postEditAsButton:"Editar",postEditCancelButton:"Cancelar",postEditButton:"Comentar",postReplyAsButton:"Responder",postReplyButton:"Responder",postButton:"Comentar",replyButton:"Responder",replyButtonSingular:"Respuesta",replyButtonPlural:"Respuestas",banCancelButton:"Cancelar",banConfirmation:"¿Estás seguro que querés bannear a este usuario?",banConfirmButton:"Ok",banTitle:"Bannear usuario",banUserButton:"Bannear usuario",banUserTooltip:"Bannear usuario",bozoButton:"Bozo",bozoCommentTooltip:"Bozo",deleteButton:"Borrar",deleteCommentTooltip:"Borrar",featureButton:"Destacado",featureCommentTooltip:"Destacado",featuredCommentTooltip:"Dejar de destacar",pendingComment:"pendiente",shareCommentTooltip:"Compartir",unfeatureButton:"Dejar de destacar",errorAuthError:"No estás autorizado a comentar en esta conversación.",errorCommentsNotAllowed:"Los comentarios no están habilitados en esta nota.",errorDefault:"Ocurrió un error. Por favor intente nuevamente.",errorDuplicate:"Disculpe. No se puede comentar dos veces lo mismo.",errorEditDuplicate:"Tiene que modificar el cuerpo del comentario cuando lo edita.",errorEditNotAllowed:"No estás autorizado a editar el comentario.",errorEditTimeExceeded:"Disculpe, pero el tiempo para editar el comentario expiró.",errorEmpty:"Parece que estás intentando publicar un comentario vacío.",errorExpired:"La sesión ha expirado, por favor actualizá la página.",errorFlagNotSelected:"Por favor seleccione el motivo del reporte.",errorGuestLiked:'Disculpe, solo los usuarios registrados pueden sumar su "Me gusta".',errorInsufficientPermissions:"No posee los permisos suficientes.",errorInvalidChar:"Parece que hay un caractér inválido. Por favor revise el texto.",errorLikeOwnComment:' No es posible poner "Me gusta" en un comentario propio.',errorMalformed:"Parece que hay un error en el contenido del comentario. Por favor revíselo.",errorMaxChars:"Disculpe, su comentario es muy largo. Por favor edítelo y vuelva a intentarlo.",errorMediaNotAvailable:"Este contenido ya no se encuentra visible.",errorShowMore:"Hubo un error en la carga de nuevos comentarios.",MultipleMediaNotAllowedError:"Sólo puede adjuntar un contenido por comentario.",menuShareTitle:"Compartir",toggleCollapse:"Expandir / Contraer",mentionFacebookConnect:"Facebook",mentionFacebookFetching:"Cargando Contactos",mentionTwitterConnect:"Twitter",mentionTwitterFetching:"Cargando Contactos"};LN.LiveFyre.convConfig={siteId:LN.LiveFyre.siteIdLiveFyre,articleId:LN.LiveFyre.articleId,el:"livefyre",collectionMeta:LN.LiveFyre.collectionMeta,datetimeFormat:{minutesUntilAbsoluteTime:4,absoluteFormat:"HH:mm dd/MM/y"}};if(window.location.href.indexOf("/m1/")>=0)LN.LiveFyre.convConfig.initialNumVisible="50";LN.LiveFyre.networkConfig.authDelegate.login=function(a){Tayer("Login",LN.LiveFyre.urlRegistracion+"/ingresar-modal?pagina=http://www.lanacion.com.ar/herramientas/comunidades/closeModalRegistracion.html&amp;tipoParticipacion=1&amp;sitioId=1","");LN.LiveFyre.handlers=a;$("#LN_closeButton").click(LN.LiveFyre.cerrarModal)};LN.LiveFyre.cerrarModal=function(){tb_remove();LN.LiveFyre.handlers.failure()};LN.LiveFyre.networkConfig.authDelegate.logout=function(){};LN.LiveFyre.networkConfig.authDelegate.viewProfile=function(g,b){var c,a=b.id.match("[0-9]+"),d=b.profileUrl.match("facebook"),e=b.profileUrl.match("twitter");if(a.length>0){if(d!=null&&d!=undefined||e!=null&&e!=undefined)c=b.profileUrl;else{a=a[0];if(LN.Cookies.leerCookie("usuario%5Fid")==a)c=LN.LiveFyre.urlRegistracion+"/mis-datos";else c=LN.LiveFyre.urlRegistracion+"/mis-datos-publico?usuario_id="+a}var f=window.open(c,"_blank");f.focus()}};LN.LiveFyre.attachmentDelegate=function(c){for(var b=["slideshare","scribd","facebook","photobucket","twitter","imgur","tinypic","fbcdn","cloudfront","flickr"],a=0,d=b.length;a<d;a++)if(c.provider_url.indexOf(b[a])>-1)return false;return true};LN.LiveFyre.networkConfig.attachmentDelegate=LN.LiveFyre.attachmentDelegate;LN.LiveFyre.networkConfig.strings=LN.LiveFyre.customStrings;LN.LiveFyre.convConfig.postToButtons=["tw","fb"];fyre.conv.load(LN.LiveFyre.networkConfig,[LN.LiveFyre.convConfig],function(a){a.on("commentPosted",function(){ga("send","event","livefyre","commentPosted")});a.on("commentFlagged",function(){ga("send","event","livefyre","commentFlagged")});a.on("commentLiked",function(){ga("send","event","livefyre","commentLiked")});a.on("commentShared",function(){ga("send","event","livefyre","commentShared")});a.on("socialMention",function(){ga("send","event","livefyre","socialMention")});a.on("initialRenderComplete",function(){var a=$("<link rel='stylesheet' type='text/css' href='http://contenidos.lanacion.com.ar/_ui/desktop/css/livefyre.css?v=9' media='all'>");$("head").append(a);$("#contenedor #comunidad").attr("style","display:block;");if(LeerCookie("cookieLogin")!="")if(LN.Cookies.leerCookie("usuario%5Flogtkn")!="")if(LN.Usuario.validoUsuarioGuid){fyre.conv.login(LN.Cookies.leerCookie("usuario%5Flogtkn"));LN.LiveFyre.logueoUsuario=true}});a.on("commentPosted",function(){var a,b;a=LeerCookie("usuario%5Fdetalle%5Fguid");if(a!=""){a=a.replace("{","").replace("}","");b=LeerCookie("usuario%5Fid");if(b!=""){var c="/Proxy.svc/PostString/Usuario/ValidarUsuarioGUID?query=usuario_id="+b+"%26guid="+a;$.ajax({url:c,type:"POST",contentType:"application/xml;charset=utf-8",async:true,data:"",success:function(b){var a="";a=$(b).find("string").text();a=a.split("|");if(a[0]!="1"){document.getElementById("usuario").innerHTML="<a target='_top' href='"+sitioSeguroRegistracion+"/ingresar-modal?pagina="+sitio+"/herramientas/comunidades/closeModalRegistracion.html&amp;width=455&amp;height=400&amp;sitioId=1' onclick=\"_gaq.push(['_trackEvent','cabezal','registracion','ingresar']);modal(this);return false;\">Ingresar</a>";document.getElementById("salir").style.display="none";fyre.conv.logout()}}})}}})})}else if(LeerCookie("cookieLogin")!="")if(LN.Cookies.leerCookie("usuario%5Flogtkn")!=""){fyre.conv.login(LN.Cookies.leerCookie("usuario%5Flogtkn"));LN.LiveFyre.logueoUsuario=true}};$(document).ready(function(){setTimeout(function(){$("#comunidad-load, #cantidad-comentarios-load").hide();$("#comunidad, #cantidad-comentarios").show()},5e3)});
/*
 * Bootstrap v3.3.1 (http://getbootstrap.com)
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */
if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(b){var a=b.fn.jquery.split(" ")[0].split(".");if(a[0]<2&&a[1]<9||1==a[0]&&9==a[1]&&a[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher");}(jQuery),+function(a){"use strict";function b(){var c=document.createElement("bootstrap"),a={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var b in a)if(void 0!==c.style[b])return{end:a[b]};return!1}a.fn.emulateTransitionEnd=function(c){var b=!1,d=this;a(this).one("bsTransitionEnd",function(){b=!0});var e=function(){b||a(d).trigger(a.support.transition.end)};return setTimeout(e,c),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){if(a(b.target).is(this))return b.handleObj.handler.apply(this,arguments)}})})}(jQuery),+function(a){"use strict";function d(c){return this.each(function(){var d=a(this),e=d.data("bs.alert");e||d.data("bs.alert",e=new b(this)),"string"==typeof c&&e[c].call(d)})}var c='[data-dismiss="alert"]',b=function(b){a(b).on("click",c,this.close)};b.VERSION="3.3.1",b.TRANSITION_DURATION=150,b.prototype.close=function(e){function g(){c.detach().trigger("closed.bs.alert").remove()}var f=a(this),d=f.attr("data-target");d||(d=f.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,""));var c=a(d);e&&e.preventDefault(),c.length||(c=f.closest(".alert")),c.trigger(e=a.Event("close.bs.alert")),e.isDefaultPrevented()||(c.removeClass("in"),a.support.transition&&c.hasClass("fade")?c.one("bsTransitionEnd",g).emulateTransitionEnd(b.TRANSITION_DURATION):g())};var e=a.fn.alert;a.fn.alert=d,a.fn.alert.Constructor=b,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,b.prototype.close)}(jQuery),+function(a){"use strict";function c(c){return this.each(function(){var e=a(this),d=e.data("bs.button"),f="object"==typeof c&&c;d||e.data("bs.button",d=new b(this,f)),"toggle"==c?d.toggle():c&&d.setState(c)})}var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d),this.isLoading=!1};b.VERSION="3.3.1",b.DEFAULTS={loadingText:"loading..."},b.prototype.setState=function(c){var d="disabled",b=this.$element,f=b.is("input")?"val":"html",e=b.data();c+="Text",null==e.resetText&&b.data("resetText",b[f]()),setTimeout(a.proxy(function(){b[f](null==e[c]?this.options[c]:e[c]),"loadingText"==c?(this.isLoading=!0,b.addClass(d).attr(d,d)):this.isLoading&&(this.isLoading=!1,b.removeClass(d).removeAttr(d))},this),0)},b.prototype.toggle=function(){var a=!0,c=this.$element.closest('[data-toggle="buttons"]');if(c.length){var b=this.$element.find("input");"radio"==b.prop("type")&&(b.prop("checked")&&this.$element.hasClass("active")?(a=!1):c.find(".active").removeClass("active")),a&&b.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));a&&this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=c,a.fn.button.Constructor=b,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(d){var b=a(d.target);b.hasClass("btn")||(b=b.closest(".btn")),c.call(b,"toggle"),d.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(b){a(b.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(b.type))})}(jQuery),+function(a){"use strict";function c(c){return this.each(function(){var e=a(this),d=e.data("bs.carousel"),f=a.extend({},b.DEFAULTS,e.data(),"object"==typeof c&&c),g="string"==typeof c?c:f.slide;d||e.data("bs.carousel",d=new b(this,f)),"number"==typeof c?d.to(c):g?d[g]():f.interval&&d.pause().cycle()})}var b=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=this.sliding=this.interval=this.$active=this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",a.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};b.VERSION="3.3.1",b.TRANSITION_DURATION=600,b.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},b.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}},b.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},b.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},b.prototype.getItemForDirection=function(a,b){var c="prev"==a?-1:1,d=this.getItemIndex(b),e=(d+c)%this.$items.length;return this.$items.eq(e)},b.prototype.to=function(a){var c=this,b=this.getItemIndex(this.$active=this.$element.find(".item.active"));return a>this.$items.length-1||0>a?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){c.to(a)}):b==a?this.pause().cycle():this.slide(a>b?"next":"prev",this.$items.eq(a))},b.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},b.prototype.next=function(){return this.sliding?void 0:this.slide("next")},b.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},b.prototype.slide=function(e,m){var f=this.$element.find(".item.active"),c=m||this.getItemForDirection(e,f),g=this.interval,d="next"==e?"left":"right",n="next"==e?"first":"last",h=this;if(!c.length){if(!this.options.wrap)return;c=this.$element.find(".item")[n]()}if(c.hasClass("active"))return this.sliding=!1;var i=c[0],j=a.Event("slide.bs.carousel",{relatedTarget:i,direction:d});if(this.$element.trigger(j),!j.isDefaultPrevented()){if(this.sliding=!0,g&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var k=a(this.$indicators.children()[this.getItemIndex(c)]);k&&k.addClass("active")}var l=a.Event("slid.bs.carousel",{relatedTarget:i,direction:d});return a.support.transition&&this.$element.hasClass("slide")?(c.addClass(e),c[0].offsetWidth,f.addClass(d),c.addClass(d),f.one("bsTransitionEnd",function(){c.removeClass([e,d].join(" ")).addClass("active"),f.removeClass(["active",d].join(" ")),h.sliding=!1,setTimeout(function(){h.$element.trigger(l)},0)}).emulateTransitionEnd(b.TRANSITION_DURATION)):(f.removeClass("active"),c.addClass("active"),this.sliding=!1,this.$element.trigger(l)),g&&this.cycle(),this}};var e=a.fn.carousel;a.fn.carousel=c,a.fn.carousel.Constructor=b,a.fn.carousel.noConflict=function(){return a.fn.carousel=e,this};var d=function(h){var f,b=a(this),d=a(b.attr("data-target")||(f=b.attr("href"))&&f.replace(/.*(?=#[^\s]+$)/,""));if(d.hasClass("carousel")){var g=a.extend({},d.data(),b.data()),e=b.attr("data-slide-to");e&&(g.interval=!1),c.call(d,g),e&&d.data("bs.carousel").to(e),h.preventDefault()}};a(document).on("click.bs.carousel.data-api","[data-slide]",d).on("click.bs.carousel.data-api","[data-slide-to]",d),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){"use strict";function d(b){var c,d=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(d)}function c(c){return this.each(function(){var e=a(this),d=e.data("bs.collapse"),f=a.extend({},b.DEFAULTS,e.data(),"object"==typeof c&&c);!d&&f.toggle&&"show"==c&&(f.toggle=!1),d||e.data("bs.collapse",d=new b(this,f)),"string"==typeof c&&d[c]()})}var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d),this.$trigger=a(this.options.trigger).filter('[href="#'+c.id+'"], [data-target="#'+c.id+'"]'),this.transitioning=null,this.options.parent?(this.$parent=this.getParent()):this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};b.VERSION="3.3.1",b.TRANSITION_DURATION=350,b.DEFAULTS={toggle:!0,trigger:'[data-toggle="collapse"]'},b.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},b.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,d=this.$parent&&this.$parent.find("> .panel").children(".in, .collapsing");if(!(d&&d.length&&(e=d.data("bs.collapse"),e&&e.transitioning))){var g=a.Event("show.bs.collapse");if(this.$element.trigger(g),!g.isDefaultPrevented()){d&&d.length&&(c.call(d,"hide"),e||d.data("bs.collapse",null));var f=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[f](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var h=function(){this.$element.removeClass("collapsing").addClass("collapse in")[f](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return h.call(this);var i=a.camelCase(["scroll",f].join("-"));this.$element.one("bsTransitionEnd",a.proxy(h,this)).emulateTransitionEnd(b.TRANSITION_DURATION)[f](this.$element[0][i])}}}},b.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var d=a.Event("hide.bs.collapse");if(this.$element.trigger(d),!d.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var e=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(e,this)).emulateTransitionEnd(b.TRANSITION_DURATION):e.call(this)}}},b.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},b.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(e,c){var b=a(c);this.addAriaAndCollapsedClass(d(b),b)},this)).end()},b.prototype.addAriaAndCollapsedClass=function(b,c){var a=b.hasClass("in");b.attr("aria-expanded",a),c.toggleClass("collapsed",!a).attr("aria-expanded",a)};var e=a.fn.collapse;a.fn.collapse=c,a.fn.collapse.Constructor=b,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(f){var b=a(this);b.attr("data-target")||f.preventDefault();var e=d(b),g=e.data("bs.collapse"),h=g?"toggle":a.extend({},b.data(),{trigger:this});c.call(e,h)})}(jQuery),+function(a){"use strict";function d(b){b&&3===b.which||(a(g).remove(),a(c).each(function(){var d=a(this),c=e(d),f={relatedTarget:this};c.hasClass("open")&&(c.trigger(b=a.Event("hide.bs.dropdown",f)),b.isDefaultPrevented()||(d.attr("aria-expanded","false"),c.removeClass("open").trigger("hidden.bs.dropdown",f)))}))}function e(c){var b=c.attr("data-target");b||(b=c.attr("href"),b=b&&/#[A-Za-z]/.test(b)&&b.replace(/.*(?=#[^\s]*$)/,""));var d=b&&a(b);return d&&d.length?d:c.parent()}function f(c){return this.each(function(){var d=a(this),e=d.data("bs.dropdown");e||d.data("bs.dropdown",e=new b(this)),"string"==typeof c&&e[c].call(d)})}var g=".dropdown-backdrop",c='[data-toggle="dropdown"]',b=function(b){a(b).on("click.bs.dropdown",this.toggle)};b.VERSION="3.3.1",b.prototype.toggle=function(f){var c=a(this);if(!c.is(".disabled, :disabled")){var b=e(c),h=b.hasClass("open");if(d(),!h){"ontouchstart"in document.documentElement&&!b.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",d);var g={relatedTarget:this};if(b.trigger(f=a.Event("show.bs.dropdown",g)),f.isDefaultPrevented())return;c.trigger("focus").attr("aria-expanded","true"),b.toggleClass("open").trigger("shown.bs.dropdown",g)}return!1}},b.prototype.keydown=function(b){if(/(38|40|27|32)/.test(b.which)&&!/input|textarea/i.test(b.target.tagName)){var g=a(this);if(b.preventDefault(),b.stopPropagation(),!g.is(".disabled, :disabled")){var h=e(g),i=h.hasClass("open");if(!i&&27!=b.which||i&&27==b.which)return 27==b.which&&h.find(c).trigger("focus"),g.trigger("click");var j=" li:not(.divider):visible a",f=h.find('[role="menu"]'+j+', [role="listbox"]'+j);if(f.length){var d=f.index(b.target);38==b.which&&d>0&&d--,40==b.which&&d<f.length-1&&d++,~d||(d=0),f.eq(d).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=f,a.fn.dropdown.Constructor=b,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",d).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",c,b.prototype.toggle).on("keydown.bs.dropdown.data-api",c,b.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',b.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',b.prototype.keydown)}(jQuery),+function(a){"use strict";function c(c,d){return this.each(function(){var f=a(this),e=f.data("bs.modal"),g=a.extend({},b.DEFAULTS,f.data(),"object"==typeof c&&c);e||f.data("bs.modal",e=new b(this,g)),"string"==typeof c?e[c](d):g.show&&e.show(d)})}var b=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};b.VERSION="3.3.1",b.TRANSITION_DURATION=300,b.BACKDROP_TRANSITION_DURATION=150,b.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},b.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},b.prototype.show=function(d){var c=this,e=a.Event("show.bs.modal",{relatedTarget:d});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var e=a.support.transition&&c.$element.hasClass("fade");c.$element.parent().length||c.$element.appendTo(c.$body),c.$element.show().scrollTop(0),c.options.backdrop&&c.adjustBackdrop(),c.adjustDialog(),e&&c.$element[0].offsetWidth,c.$element.addClass("in").attr("aria-hidden",!1),c.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:d});e?c.$element.find(".modal-dialog").one("bsTransitionEnd",function(){c.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(b.TRANSITION_DURATION):c.$element.trigger("focus").trigger(f)}))},b.prototype.hide=function(c){c&&c.preventDefault(),c=a.Event("hide.bs.modal"),this.$element.trigger(c),this.isShown&&!c.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(b.TRANSITION_DURATION):this.hideModal())},b.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},b.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},b.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},b.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},b.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},b.prototype.backdrop=function(c){var g=this,d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=a.support.transition&&d;if(this.$backdrop=a('<div class="modal-backdrop '+d+'" />').prependTo(this.$element).on("click.dismiss.bs.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),e&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!c)return;e?this.$backdrop.one("bsTransitionEnd",c).emulateTransitionEnd(b.BACKDROP_TRANSITION_DURATION):c()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var f=function(){g.removeBackdrop(),c&&c()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",f).emulateTransitionEnd(b.BACKDROP_TRANSITION_DURATION):f()}else c&&c()},b.prototype.handleUpdate=function(){this.options.backdrop&&this.adjustBackdrop(),this.adjustDialog()},b.prototype.adjustBackdrop=function(){this.$backdrop.css("height",0).css("height",this.$element[0].scrollHeight)},b.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},b.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},b.prototype.checkScrollbar=function(){this.bodyIsOverflowing=document.body.scrollHeight>document.documentElement.clientHeight,this.scrollbarWidth=this.measureScrollbar()},b.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},b.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},b.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=c,a.fn.modal.Constructor=b,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(f){var b=a(this),e=b.attr("href"),d=a(b.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=d.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},d.data(),b.data());b.is("a")&&f.preventDefault(),d.one("show.bs.modal",function(a){a.isDefaultPrevented()||d.one("hidden.bs.modal",function(){b.is(":visible")&&b.trigger("focus")})}),c.call(d,g,this)})}(jQuery),+function(b){"use strict";function c(c){return this.each(function(){var f=b(this),d=f.data("bs.tooltip"),e="object"==typeof c&&c,g=e&&e.selector;(d||"destroy"!=c)&&(g?(d||f.data("bs.tooltip",d={}),d[g]||(d[g]=new a(this,e))):d||f.data("bs.tooltip",d=new a(this,e)),"string"==typeof c&&d[c]())})}var a=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",a,b)};a.VERSION="3.3.1",a.TRANSITION_DURATION=150,a.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},a.prototype.init=function(e,f,g){this.enabled=!0,this.type=e,this.$element=b(f),this.options=this.getOptions(g),this.$viewport=this.options.viewport&&b(this.options.viewport.selector||this.options.viewport);for(var c=this.options.trigger.split(" "),d=c.length;d--;){var a=c[d];if("click"==a)this.$element.on("click."+this.type,this.options.selector,b.proxy(this.toggle,this));else if("manual"!=a){var h="hover"==a?"mouseenter":"focusin",i="hover"==a?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,b.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,b.proxy(this.leave,this))}}this.options.selector?(this._options=b.extend({},this.options,{trigger:"manual",selector:""})):this.fixTitle()},a.prototype.getDefaults=function(){return a.DEFAULTS},a.prototype.getOptions=function(a){return a=b.extend({},this.getDefaults(),this.$element.data(),a),a.delay&&"number"==typeof a.delay&&(a.delay={show:a.delay,hide:a.delay}),a},a.prototype.getDelegateOptions=function(){var a={},c=this.getDefaults();return this._options&&b.each(this._options,function(b,d){c[b]!=d&&(a[b]=d)}),a},a.prototype.enter=function(c){var a=c instanceof this.constructor?c:b(c.currentTarget).data("bs."+this.type);return a&&a.$tip&&a.$tip.is(":visible")?void(a.hoverState="in"):(a||(a=new this.constructor(c.currentTarget,this.getDelegateOptions()),b(c.currentTarget).data("bs."+this.type,a)),clearTimeout(a.timeout),a.hoverState="in",a.options.delay&&a.options.delay.show?void(a.timeout=setTimeout(function(){"in"==a.hoverState&&a.show()},a.options.delay.show)):a.show())},a.prototype.leave=function(c){var a=c instanceof this.constructor?c:b(c.currentTarget).data("bs."+this.type);return a||(a=new this.constructor(c.currentTarget,this.getDelegateOptions()),b(c.currentTarget).data("bs."+this.type,a)),clearTimeout(a.timeout),a.hoverState="out",a.options.delay&&a.options.delay.hide?void(a.timeout=setTimeout(function(){"out"==a.hoverState&&a.hide()},a.options.delay.hide)):a.hide()},a.prototype.show=function(){var j=b.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(j);var o=b.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(j.isDefaultPrevented()||!o)return;var e=this,d=this.tip(),k=this.getUID(this.type);this.setContent(),d.attr("id",k),this.$element.attr("aria-describedby",k),this.options.animation&&d.addClass("fade");var c="function"==typeof this.options.placement?this.options.placement.call(this,d[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,m=l.test(c);m&&(c=c.replace(l,"")||"top"),d.detach().css({top:0,left:0,display:"block"}).addClass(c).data("bs."+this.type,this),this.options.container?d.appendTo(this.options.container):d.insertAfter(this.$element);var f=this.getPosition(),h=d[0].offsetWidth,i=d[0].offsetHeight;if(m){var p=c,q=this.options.container?b(this.options.container):this.$element.parent(),g=this.getPosition(q);c="bottom"==c&&f.bottom+i>g.bottom?"top":"top"==c&&f.top-i<g.top?"bottom":"right"==c&&f.right+h>g.width?"left":"left"==c&&f.left-h<g.left?"right":c,d.removeClass(p).addClass(c)}var r=this.getCalculatedOffset(c,f,h,i);this.applyPlacement(r,c);var n=function(){var a=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==a&&e.leave(e)};b.support.transition&&this.$tip.hasClass("fade")?d.one("bsTransitionEnd",n).emulateTransitionEnd(a.TRANSITION_DURATION):n()}},a.prototype.applyPlacement=function(a,f){var c=this.tip(),l=c[0].offsetWidth,g=c[0].offsetHeight,h=parseInt(c.css("margin-top"),10),i=parseInt(c.css("margin-left"),10);isNaN(h)&&(h=0),isNaN(i)&&(i=0),a.top=a.top+h,a.left=a.left+i,b.offset.setOffset(c[0],b.extend({using:function(a){c.css({top:Math.round(a.top),left:Math.round(a.left)})}},a),0),c.addClass("in");var k=c[0].offsetWidth,e=c[0].offsetHeight;"top"==f&&e!=g&&(a.top=a.top+g-e);var d=this.getViewportAdjustedDelta(f,a,k,e);d.left?(a.left+=d.left):(a.top+=d.top);var j=/top|bottom/.test(f),m=j?2*d.left-l+k:2*d.top-g+e,n=j?"offsetWidth":"offsetHeight";c.offset(a),this.replaceArrow(m,c[0][n],j)},a.prototype.replaceArrow=function(b,c,a){this.arrow().css(a?"left":"top",50*(1-b/c)+"%").css(a?"top":"left","")},a.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},a.prototype.hide=function(e){function f(){"in"!=c.hoverState&&d.detach(),c.$element.removeAttr("aria-describedby").trigger("hidden.bs."+c.type),e&&e()}var c=this,d=this.tip(),g=b.Event("hide.bs."+this.type);return this.$element.trigger(g),g.isDefaultPrevented()?void 0:(d.removeClass("in"),b.support.transition&&this.$tip.hasClass("fade")?d.one("bsTransitionEnd",f).emulateTransitionEnd(a.TRANSITION_DURATION):f(),this.hoverState=null,this)},a.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},a.prototype.hasContent=function(){return this.getTitle()},a.prototype.getPosition=function(c){c=c||this.$element;var e=c[0],d="BODY"==e.tagName,a=e.getBoundingClientRect();null==a.width&&(a=b.extend({},a,{width:a.right-a.left,height:a.bottom-a.top}));var f=d?{top:0,left:0}:c.offset(),g={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:c.scrollTop()},h=d?{width:b(window).width(),height:b(window).height()}:null;return b.extend({},a,g,h,f)},a.prototype.getCalculatedOffset=function(b,a,c,d){return"bottom"==b?{top:a.top+a.height,left:a.left+a.width/2-c/2}:"top"==b?{top:a.top-d,left:a.left+a.width/2-c/2}:"left"==b?{top:a.top+a.height/2-d/2,left:a.left-c}:{top:a.top+a.height/2-d/2,left:a.left+a.width}},a.prototype.getViewportAdjustedDelta=function(i,c,j,k){var b={top:0,left:0};if(!this.$viewport)return b;var d=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(i)){var e=c.top-d-a.scroll,f=c.top+d-a.scroll+k;e<a.top?(b.top=a.top-e):f>a.top+a.height&&(b.top=a.top+a.height-f)}else{var g=c.left-d,h=c.left+d+j;g<a.left?(b.left=a.left-g):h>a.width&&(b.left=a.left+a.width-h)}return b},a.prototype.getTitle=function(){var c,b=this.$element,a=this.options;return c=b.attr("data-original-title")||("function"==typeof a.title?a.title.call(b[0]):a.title)},a.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},a.prototype.tip=function(){return this.$tip=this.$tip||b(this.options.template)},a.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},a.prototype.enable=function(){this.enabled=!0},a.prototype.disable=function(){this.enabled=!1},a.prototype.toggleEnabled=function(){this.enabled=!this.enabled},a.prototype.toggle=function(c){var a=this;c&&(a=b(c.currentTarget).data("bs."+this.type),a||(a=new this.constructor(c.currentTarget,this.getDelegateOptions()),b(c.currentTarget).data("bs."+this.type,a))),a.tip().hasClass("in")?a.leave(a):a.enter(a)},a.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type)})};var d=b.fn.tooltip;b.fn.tooltip=c,b.fn.tooltip.Constructor=a,b.fn.tooltip.noConflict=function(){return b.fn.tooltip=d,this}}(jQuery),+function(b){"use strict";function c(c){return this.each(function(){var f=b(this),d=f.data("bs.popover"),e="object"==typeof c&&c,g=e&&e.selector;(d||"destroy"!=c)&&(g?(d||f.data("bs.popover",d={}),d[g]||(d[g]=new a(this,e))):d||f.data("bs.popover",d=new a(this,e)),"string"==typeof c&&d[c]())})}var a=function(a,b){this.init("popover",a,b)};if(!b.fn.tooltip)throw new Error("Popover requires tooltip.js");a.VERSION="3.3.1",a.DEFAULTS=b.extend({},b.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),a.prototype=b.extend({},b.fn.tooltip.Constructor.prototype),a.prototype.constructor=a,a.prototype.getDefaults=function(){return a.DEFAULTS},a.prototype.setContent=function(){var a=this.tip(),c=this.getTitle(),b=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](c),a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof b?"html":"append":"text"](b),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},a.prototype.hasContent=function(){return this.getTitle()||this.getContent()},a.prototype.getContent=function(){var b=this.$element,a=this.options;return b.attr("data-content")||("function"==typeof a.content?a.content.call(b[0]):a.content)},a.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},a.prototype.tip=function(){return this.$tip||(this.$tip=b(this.options.template)),this.$tip};var d=b.fn.popover;b.fn.popover=c,b.fn.popover.Constructor=a,b.fn.popover.noConflict=function(){return b.fn.popover=d,this}}(jQuery),+function(a){"use strict";function b(c,d){var e=a.proxy(this.process,this);this.$body=a("body"),this.$scrollElement=a(a(c).is("body")?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e),this.refresh(),this.process()}function c(c){return this.each(function(){var e=a(this),d=e.data("bs.scrollspy"),f="object"==typeof c&&c;d||e.data("bs.scrollspy",d=new b(this,f)),"string"==typeof c&&d[c]()})}b.VERSION="3.3.1",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b="offset",c=0;a.isWindow(this.$scrollElement[0])||(b="position",c=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var d=this;this.$body.find(this.selector).map(function(){var f=a(this),e=f.data("target")||f.attr("href"),d=/^#./.test(e)&&a(e);return d&&d.length&&d.is(":visible")&&[[d[b]().top+c,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){d.offsets.push(this[0]),d.targets.push(this[1])})},b.prototype.process=function(){var a,c=this.$scrollElement.scrollTop()+this.options.offset,f=this.getScrollHeight(),g=this.options.offset+f-this.$scrollElement.height(),b=this.offsets,d=this.targets,e=this.activeTarget;if(this.scrollHeight!=f&&this.refresh(),c>=g)return e!=(a=d[d.length-1])&&this.activate(a);if(e&&c<b[0])return this.activeTarget=null,this.clear();for(a=b.length;a--;)e!=d[a]&&c>=b[a]&&(!b[a+1]||c<=b[a+1])&&this.activate(d[a])},b.prototype.activate=function(c){this.activeTarget=c,this.clear();var d=this.selector+'[data-target="'+c+'"],'+this.selector+'[href="'+c+'"]',b=a(d).parents("li").addClass("active");b.parent(".dropdown-menu").length&&(b=b.closest("li.dropdown").addClass("active")),b.trigger("activate.bs.scrollspy")},b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){"use strict";function c(c){return this.each(function(){var e=a(this),d=e.data("bs.tab");d||e.data("bs.tab",d=new b(this)),"string"==typeof c&&d[c]()})}var b=function(b){this.element=a(b)};b.VERSION="3.3.1",b.TRANSITION_DURATION=150,b.prototype.show=function(){var b=this.element,e=b.closest("ul:not(.dropdown-menu)"),c=b.data("target");if(c||(c=b.attr("href"),c=c&&c.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var d=e.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),g=a.Event("show.bs.tab",{relatedTarget:d[0]});if(d.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(c);this.activate(b.closest("li"),e),this.activate(h,h.parent(),function(){d.trigger({type:"hidden.bs.tab",relatedTarget:b[0]}),b.trigger({type:"shown.bs.tab",relatedTarget:d[0]})})}}},b.prototype.activate=function(c,f,e){function g(){d.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),c.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),h?(c[0].offsetWidth,c.addClass("in")):c.removeClass("fade"),c.parent(".dropdown-menu")&&c.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),e&&e()}var d=f.find("> .active"),h=e&&a.support.transition&&(d.length&&d.hasClass("fade")||!!f.find("> .fade").length);d.length&&h?d.one("bsTransitionEnd",g).emulateTransitionEnd(b.TRANSITION_DURATION):g(),d.removeClass("in")};var e=a.fn.tab;a.fn.tab=c,a.fn.tab.Constructor=b,a.fn.tab.noConflict=function(){return a.fn.tab=e,this};var d=function(b){b.preventDefault(),c.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',d).on("click.bs.tab.data-api",'[data-toggle="pill"]',d)}(jQuery),+function(a){"use strict";function c(c){return this.each(function(){var e=a(this),d=e.data("bs.affix"),f="object"==typeof c&&c;d||e.data("bs.affix",d=new b(this,f)),"string"==typeof c&&d[c]()})}var b=function(c,d){this.options=a.extend({},b.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(c),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};b.VERSION="3.3.1",b.RESET="affix affix-top affix-bottom",b.DEFAULTS={offset:0,target:window},b.prototype.getState=function(d,i,a,c){var b=this.$target.scrollTop(),e=this.$element.offset(),f=this.$target.height();if(null!=a&&"top"==this.affixed)return a>b?"top":!1;if("bottom"==this.affixed)return null!=a?b+this.unpin<=e.top?!1:"bottom":d-c>=b+f?!1:"bottom";var g=null==this.affixed,h=g?b:e.top,j=g?f:i;return null!=a&&a>=h?"top":null!=c&&h+j>=d-c?"bottom":!1},b.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(b.RESET).addClass("affix");var a=this.$target.scrollTop(),c=this.$element.offset();return this.pinnedOffset=c.top-a},b.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},b.prototype.checkPosition=function(){if(this.$element.is(":visible")){var h=this.$element.height(),c=this.options.offset,f=c.top,e=c.bottom,i=a("body").height();"object"!=typeof c&&(e=f=c),"function"==typeof f&&(f=c.top(this.$element)),"function"==typeof e&&(e=c.bottom(this.$element));var d=this.getState(i,h,f,e);if(this.affixed!=d){null!=this.unpin&&this.$element.css("top","");var g="affix"+(d?"-"+d:""),j=a.Event(g+".bs.affix");if(this.$element.trigger(j),j.isDefaultPrevented())return;this.affixed=d,this.unpin="bottom"==d?this.getPinnedOffset():null,this.$element.removeClass(b.RESET).addClass(g).trigger(g.replace("affix","affixed")+".bs.affix")}"bottom"==d&&this.$element.offset({top:i-h-e})}};var d=a.fn.affix;a.fn.affix=c,a.fn.affix.Constructor=b,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var d=a(this),b=d.data();b.offset=b.offset||{},null!=b.offsetBottom&&(b.offset.bottom=b.offsetBottom),null!=b.offsetTop&&(b.offset.top=b.offsetTop),c.call(d,b)})})}(jQuery);!function(a){"use strict";var c=function(a,b){this.init(a,b)};c.prototype={constructor:c,init:function(e,d){this.$element=a(e);this.options=a.extend({},a.fn.modalmanager.defaults,this.$element.data(),typeof d=="object"&&d);this.stack=[];this.backdropCount=0;if(this.options.resize){var b,c=this;a(window).on("resize.modal",function(){b&&clearTimeout(b);b=setTimeout(function(){for(var a=0;a<c.stack.length;a++)c.stack[a].isShown&&c.stack[a].layout()},10)})}},createModal:function(b,c){a(b).modal(a.extend({manager:this},c))},appendModal:function(c){this.stack.push(c);var d=this;c.$element.on("show.modalmanager",b(function(){var b=function(){c.isShown=true;var b=a.support.transition&&c.$element.hasClass("fade");d.$element.toggleClass("modal-open",d.hasOpenModal()).toggleClass("page-overflow",a(window).height()<d.$element.height());c.$parent=c.$element.parent();c.$container=d.createContainer(c);c.$element.appendTo(c.$container);d.backdrop(c,function(){c.$element.show();if(b)c.$element[0].offsetWidth;c.layout();c.$element.addClass("in").attr("aria-hidden",false);var e=function(){d.setFocus();c.$element.trigger("shown")};b?c.$element.one(a.support.transition.end,e):e()})};c.options.replace?d.replace(b):b()}));c.$element.on("hidden.modalmanager",b(function(){d.backdrop(c);if(!c.$element.parent().length)d.destroyModal(c);else if(c.$backdrop){var b=a.support.transition&&c.$element.hasClass("fade");if(b)c.$element[0].offsetWidth;a.support.transition&&c.$element.hasClass("fade")?c.$backdrop.one(a.support.transition.end,function(){c.destroy()}):c.destroy()}else c.destroy()}));c.$element.on("destroyed.modalmanager",b(function(){d.destroyModal(c)}))},getOpenModals:function(){for(var b=[],a=0;a<this.stack.length;a++)this.stack[a].isShown&&b.push(this.stack[a]);return b},hasOpenModal:function(){return this.getOpenModals().length>0},setFocus:function(){for(var b,a=0;a<this.stack.length;a++)if(this.stack[a].isShown)b=this.stack[a];if(!b)return;b.focus()},destroyModal:function(a){a.$element.off(".modalmanager");a.$backdrop&&this.removeBackdrop(a);this.stack.splice(this.getIndexOfModal(a),1);var b=this.hasOpenModal();this.$element.toggleClass("modal-open",b);!b&&this.$element.removeClass("page-overflow");this.removeContainer(a);this.setFocus()},getModalAt:function(a){return this.stack[a]},getIndexOfModal:function(b){for(var a=0;a<this.stack.length;a++)if(b===this.stack[a])return a},replace:function(d){for(var c,e=0;e<this.stack.length;e++)if(this.stack[e].isShown)c=this.stack[e];if(c){this.$backdropHandle=c.$backdrop;c.$backdrop=null;d&&c.$element.one("hidden",b(a.proxy(d,this)));c.hide()}else d&&d()},removeBackdrop:function(a){a.$backdrop.remove();a.$backdrop=null},createBackdrop:function(c,d){var b;if(!this.$backdropHandle)b=a(d).addClass(c).appendTo(this.$element);else{b=this.$backdropHandle;b.off(".modalmanager");this.$backdropHandle=null;this.isLoading&&this.removeSpinner()}return b},removeContainer:function(a){a.$container.remove();a.$container=null},createContainer:function(c){var e;e=a('<div class="modal-scrollable">').css("z-index",d("modal",this.getOpenModals().length)).appendTo(this.$element);if(c&&c.options.backdrop!="static")e.on("click.modal",b(function(){c.hide()}));else if(c)e.on("click.modal",b(function(){c.attention()}));return e},backdrop:function(b,c){var f=b.$element.hasClass("fade")?"fade":"",h=b.options.backdrop&&this.backdropCount<this.options.backdropLimit;if(b.isShown&&h){var e=a.support.transition&&f&&!this.$backdropHandle;b.$backdrop=this.createBackdrop(f,b.options.backdropTemplate);b.$backdrop.css("z-index",d("backdrop",this.getOpenModals().length));if(e)b.$backdrop[0].offsetWidth;b.$backdrop.addClass("in");this.backdropCount+=1;e?b.$backdrop.one(a.support.transition.end,c):c()}else if(!b.isShown&&b.$backdrop){b.$backdrop.removeClass("in");this.backdropCount-=1;var g=this;a.support.transition&&b.$element.hasClass("fade")?b.$backdrop.one(a.support.transition.end,function(){g.removeBackdrop(b)}):g.removeBackdrop(b)}else c&&c()},removeSpinner:function(){this.$spinner&&this.$spinner.remove();this.$spinner=null;this.isLoading=false},removeLoading:function(){this.$backdropHandle&&this.$backdropHandle.remove();this.$backdropHandle=null;this.removeSpinner()},loading:function(b){b=b||function(){};this.$element.toggleClass("modal-open",!this.isLoading||this.hasOpenModal()).toggleClass("page-overflow",a(window).height()<this.$element.height());if(!this.isLoading){this.$backdropHandle=this.createBackdrop("fade",this.options.backdropTemplate);this.$backdropHandle[0].offsetWidth;var c=this.getOpenModals();this.$backdropHandle.css("z-index",d("backdrop",c.length+1)).addClass("in");var f=a(this.options.spinner).css("z-index",d("modal",c.length+1)).appendTo(this.$element).addClass("in");this.$spinner=a(this.createContainer()).append(f).on("click.modalmanager",a.proxy(this.loading,this));this.isLoading=true;a.support.transition?this.$backdropHandle.one(a.support.transition.end,b):b()}else if(this.isLoading&&this.$backdropHandle){this.$backdropHandle.removeClass("in");var e=this;a.support.transition?this.$backdropHandle.one(a.support.transition.end,function(){e.removeLoading()}):e.removeLoading()}else b&&b(this.isLoading)}};var d=function(){var c,b={};return function(f,g){if(typeof c==="undefined"){var e=a('<div class="modal hide" />').appendTo("body"),d=a('<div class="modal-backdrop hide" />').appendTo("body");b.modal=+e.css("z-index");b.backdrop=+d.css("z-index");c=b.modal-b.backdrop;e.remove();d.remove();d=e=null}return b[f]+c*g}}();function b(a){return function(b){if(this===b.target)return a.apply(this,arguments)}}a.fn.modalmanager=function(b,d){return this.each(function(){var f=a(this),e=f.data("modalmanager");!e&&f.data("modalmanager",e=new c(this,b));typeof b==="string"&&e[b].apply(e,[].concat(d))})};a.fn.modalmanager.defaults={backdropLimit:999,resize:true,spinner:'<div class="loading-spinner fade" style="width: 200px; margin-left: -100px;"><div class="progress progress-striped active"><div class="bar" style="width: 100%;"></div></div></div>',backdropTemplate:'<div class="modal-backdrop" />'};a.fn.modalmanager.Constructor=c;a(function(){a(document).off("show.bs.modal").off("hidden.bs.modal")})}(jQuery);!function(a){"use strict";var b=function(a,b){this.init(a,b)};b.prototype={constructor:b,init:function(c,d){var e=this;this.options=d;this.$element=a(c).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this));this.options.remote&&this.$element.find(".modal-body").load(this.options.remote,function(){var b=a.Event("loaded");e.$element.trigger(b)});var b=typeof this.options.manager==="function"?this.options.manager.call(this):this.options.manager;b=b.appendModal?b:a(b).modalmanager().data("modalmanager");b.appendModal(this)},toggle:function(){return this[!this.isShown?"show":"hide"]()},show:function(){var b=a.Event("show");if(this.isShown)return;this.$element.trigger(b);if(b.isDefaultPrevented())return;this.escape();this.tab();this.options.loading&&this.loading()},hide:function(b){b&&b.preventDefault();b=a.Event("hide");this.$element.trigger(b);if(!this.isShown||b.isDefaultPrevented())return;this.isShown=false;this.escape();this.tab();this.isLoading&&this.loading();a(document).off("focusin.modal");this.$element.removeClass("in").removeClass("animated").removeClass(this.options.attentionAnimation).removeClass("modal-overflow").attr("aria-hidden",true);a.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},layout:function(){var c=this.options.height?"height":"max-height",b=this.options.height||this.options.maxHeight;if(this.options.width){this.$element.css("width",this.options.width);var d=this;this.$element.css("margin-left",function(){return/%/ig.test(d.options.width)?-(parseInt(d.options.width)/2)+"%":-(a(this).width()/2)+"px"})}else{this.$element.css("width","");this.$element.css("margin-left","")}this.$element.find(".modal-body").css("overflow","").css(c,"");b&&this.$element.find(".modal-body").css("overflow","auto").css(c,b);var e=a(window).height()-10<this.$element.height();if(e||this.options.modalOverflow)this.$element.css("margin-top",0).addClass("modal-overflow");else this.$element.css("margin-top",0-this.$element.height()/2).removeClass("modal-overflow")},tab:function(){var b=this;if(this.isShown&&this.options.consumeTab)this.$element.on("keydown.tabindex.modal","[data-tabindex]",function(e){if(e.keyCode&&e.keyCode==9){var c=a(this),d=a(this);b.$element.find("[data-tabindex]:enabled:not([readonly])").each(function(b){if(!b.shiftKey)c=c.data("tabindex")<a(this).data("tabindex")?(c=a(this)):(d=a(this));else c=c.data("tabindex")>a(this).data("tabindex")?(c=a(this)):(d=a(this))});c[0]!==a(this)[0]?c.focus():d.focus();e.preventDefault()}});else!this.isShown&&this.$element.off("keydown.tabindex.modal")},escape:function(){var a=this;if(this.isShown&&this.options.keyboard){!this.$element.attr("tabindex")&&this.$element.attr("tabindex",-1);this.$element.on("keyup.dismiss.modal",function(b){b.which==27&&a.hide()})}else!this.isShown&&this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var b=this,c=setTimeout(function(){b.$element.off(a.support.transition.end);b.hideModal()},500);this.$element.one(a.support.transition.end,function(){clearTimeout(c);b.hideModal()})},hideModal:function(){var b=this.options.height?"height":"max-height",a=this.options.height||this.options.maxHeight;a&&this.$element.find(".modal-body").css("overflow","").css(b,"");this.$element.hide().trigger("hidden")},removeLoading:function(){this.$loading.remove();this.$loading=null;this.isLoading=false},loading:function(b){b=b||function(){};var d=this.$element.hasClass("fade")?"fade":"";if(!this.isLoading){var c=a.support.transition&&d;this.$loading=a('<div class="loading-mask '+d+'">').append(this.options.spinner).appendTo(this.$element);if(c)this.$loading[0].offsetWidth;this.$loading.addClass("in");this.isLoading=true;c?this.$loading.one(a.support.transition.end,b):b()}else if(this.isLoading&&this.$loading){this.$loading.removeClass("in");var e=this;a.support.transition&&this.$element.hasClass("fade")?this.$loading.one(a.support.transition.end,function(){e.removeLoading()}):e.removeLoading()}else b&&b(this.isLoading)},focus:function(){var a=this.$element.find(this.options.focusOn);a=a.length?a:this.$element;a.focus()},attention:function(){if(this.options.attentionAnimation){this.$element.removeClass("animated").removeClass(this.options.attentionAnimation);var a=this;setTimeout(function(){a.$element.addClass("animated").addClass(a.options.attentionAnimation)},0)}this.focus()},destroy:function(){var b=a.Event("destroy");this.$element.trigger(b);if(b.isDefaultPrevented())return;this.$element.off(".modal").removeData("modal").removeClass("in").attr("aria-hidden",true);if(this.$parent!==this.$element.parent())this.$element.appendTo(this.$parent);else if(!this.$parent.length){this.$element.remove();this.$element=null}this.$element.trigger("destroyed")}};a.fn.modal=function(c,d){return this.each(function(){var f=a(this),e=f.data("modal"),g=a.extend({},a.fn.modal.defaults,f.data(),typeof c=="object"&&c);!e&&f.data("modal",e=new b(this,g));if(typeof c=="string")e[c].apply(e,[].concat(d));else g.show&&e.show()})};a.fn.modal.defaults={keyboard:true,backdrop:true,loading:false,show:true,width:null,height:null,maxHeight:null,modalOverflow:false,consumeTab:true,focusOn:null,replace:false,resize:false,attentionAnimation:"shake",manager:"body",spinner:'<div class="loading-spinner" style="width: 200px; margin-left: -100px;"><div class="progress progress-striped active"><div class="bar" style="width: 100%;"></div></div></div>',backdropTemplate:'<div class="modal-backdrop" />'};a.fn.modal.Constructor=b;a(function(){a(document).off("click.modal").on("click.modal.data-api",'[data-toggle="modal"]',function(f){var b=a(this),c=b.attr("href"),d=a(b.attr("data-target")||c&&c.replace(/.*(?=#[^\s]+$)/,"")),e=d.data("modal")?"toggle":a.extend({remote:!/#/.test(c)&&c},d.data(),b.data());f.preventDefault();d.modal(e).one("hide",function(){b.focus()})})})}(window.jQuery);function refreshLogin(){var b=mustRelogin(),a="";b&&jQuery.ajax({url:"http://wscomunidad.lanacion.com.ar/WCFUsuario/Usuario.svc/refreshLogin",type:"GET",dataType:"jsonp",contentType:"text/xml;charset=utf-8",data:"",async:false,success:function(){a="";top.frames.iRelogin.location.href="http://passport.lanacion.com.ar/cifrador.aspx?pagina="+top.frames.iRelogin.location.href},error:function(a){console.log("error: "+a.toString())}});return a}function mustRelogin(){var b=true,e=(new Date).getTime(),c=1.728e8,a=LeerCookie("syncLfLN");if(a!=""){var d=(new Date(a)).getTime();if(e<d-c)b=false}return b}